<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>2021 å¹´è®¡åˆ’æ¸…å•</title>
      <link href="/2021/07/12/2021-to-do-list/"/>
      <url>/2021/07/12/2021-to-do-list/</url>
      
        <content type="html"><![CDATA[<p>é­”å¹»çš„ 2020 å·²ç»æˆä¸ºè¿‡å»â€¦â€¦</p><ul><li><input disabled="" type="checkbox"> <em>å¥½å¥½æ´»ç€</em></li><li><input disabled="" type="checkbox"> <em>giorgio-spa æ”¹ç‰ˆ</em></li><li><input checked="" disabled="" type="checkbox"> ç”¨ Qt åšä¸ªå°å·¥å…·ç®±</li><li><input checked="" disabled="" type="checkbox"> æ³°æ‹‰ç‘äºšæ¯•ä¸š</li><li><input disabled="" type="checkbox"> <em>æ¢³ç†è®¾è®¡æ¨¡å¼</em></li><li><input disabled="" type="checkbox"> redis è¿›ä¸€æ­¥å­¦ä¹ </li><li><input disabled="" type="checkbox"> rabbitmq è¿›ä¸€æ­¥å­¦ä¹ </li><li><input disabled="" type="checkbox"> æœ‰æ—¶é—´çš„è¯ç ”ç©¶ä¸‹ App</li><li><input disabled="" type="checkbox"> æ›´å¤šçš„ composer æ‰©å±•åŒ…</li><li><input checked="" disabled="" type="checkbox"> å†å‰ªå‡ ä¸ªè§†é¢‘ç©ç© <a href="https://space.bilibili.com/12148036">[ bilibili ]</a></li><li><input disabled="" type="checkbox"> ç»§ç»­å»å¹´çš„è½¯è€ƒ</li><li><input disabled="" type="checkbox"> ç­‰ wsl gui å‡ºä¸–ï¼Œç„¶åè¯•è¯•å¥½ä¸å¥½ç”¨</li><li><input disabled="" type="checkbox"> <del>æƒ³ç»“å©šï¼Œå¸Œæœ›èƒ½</del> å¥½äº†ï¼Œæˆ‘å®¶å¤§é­”ç‹è€ƒä¸Šäº†ç ”ç©¶ç”Ÿï¼ŒåŠªåŠ›æé’±å§ï¼</li></ul><p>è®¡åˆ’æ¸…å•è¿™ä¸ªä¸œè¥¿ï¼Œç¡®å®æ˜¯è¶Šå˜è¶Šé•¿çš„ã€‚</p><blockquote><p>2021-04-25<br>è®¾è®¡æ¨¡å¼è¿˜æœ‰å¤§æ¦‚ 13 ç¯‡å†…å®¹ã€‚<br>spa æ”¹ç‰ˆè¿›è¡Œä¸­ï¼Œæœ€è¿‘å¡åœ¨ä¾§è¾¹æ ã€‚<br>æ›´å¤š composer åŒ…æˆ‘é€‰äº†èäº‘ + layim é¡¹ç›®é‡æ„ï¼Œç›®å‰å‰©ä½™ä¸€ä¸¢ä¸¢ï¼Œåšå®Œä»¥ååº”è¯¥ä¼šå½•ä¸€ç³»åˆ—è§†é¢‘ã€‚<br>wslg å·²ç»å‡ºæ¥äº†ï¼Œè™šæ‹Ÿæœºå·²ä¸‹è½½ï¼Œä½†æ˜¯è¿˜æ²¡å¼€å§‹å®‰è£…ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
          <category> è®¡åˆ’æ¸…å• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
            <tag> è®¡åˆ’æ¸…å• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac m1 ä¸‹å®‰è£… php7.4 ssh2 æ‰©å±•</title>
      <link href="/2021/05/19/m1-php-ssh2/"/>
      <url>/2021/05/19/m1-php-ssh2/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®é‡Œç”¨åˆ°äº† sftpï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹ ssh2ã€‚</p><p>å®‰è£…è¿‡ç¨‹æœ‰ä¸ªæŠ¥é”™ï¼Œå¼€å§‹è¿˜ä»¥ä¸ºæ˜¯ä¸å…¼å®¹ m1ï¼Œå¥½åœ¨æœ€åé¡ºåˆ©å®‰è£…ã€‚</p><p>è®°å½•ä¸€ä¸‹ï¼Œä»¥å…å†æ¬¡è·³å‘ã€‚</p><h4 id="å®‰è£…-ssh"><a href="#å®‰è£…-ssh" class="headerlink" title="å®‰è£… ssh"></a>å®‰è£… ssh</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pech install ssh2-1.3</span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡ç¨‹ä¸­ä¼šè¯¢é—® libssh2 çš„è·¯å¾„ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ£€æµ‹ï¼Œç„¶åï¼Œæˆ‘çš„é—®é¢˜å°±æ¥äº†ï¼š</p><blockquote><p>The required libssh2 library was not found</p></blockquote><p>é¦–å…ˆæ’é™¤ä¸€ä¸‹ libssh2 æœ‰æ²¡æœ‰å®‰è£…ï¼Œæ²¡æœ‰å®‰è£…çš„è¯æ‰§è¡Œ <code>brew install libssh2</code>ï¼Œç„¶åæ‰§è¡Œ <code>brew link libssh2</code> æŸ¥çœ‹å…¶è·¯å¾„ä¿¡æ¯ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/brew-link-libssh.png" alt="brew-link-libssh"></p><p>æ¥ä¸‹æ¥ï¼Œé‡æ–°æ‰§è¡Œ <code>pecl install ssh2-1.3</code>ï¼Œå‘½ä»¤è¡Œè¯¢é—®è·¯å¾„æ—¶ï¼Œå°† <code>/opt/homebrew/Cellar/libssh2/1.9.0_1</code> æ•²å…¥å›è½¦å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos php7.4 å®‰è£…è®°å½•</title>
      <link href="/2021/05/11/centos-php74/"/>
      <url>/2021/05/11/centos-php74/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘è®°æ€§ä¸å¤ªå¥½ï¼Œåšä¸ªè®°å½•ï¼Œé˜²æ­¢ä¸‹æ¬¡å¿˜äº†ã€‚</p><p>è‹¥æœæœ‰é—æ¼ï¼Œä¹‹åå†è¡¥å……ã€‚</p><h4 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update &amp;&amp; yum upgrade </span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-php7-4-çš„-yum-æº"><a href="#å®‰è£…-php7-4-çš„-yum-æº" class="headerlink" title="å®‰è£… php7.4 çš„ yum æº"></a>å®‰è£… php7.4 çš„ yum æº</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line"></span><br><span class="line">yum -y install https://rpms.remirepo.net/enterprise/remi-release-7.rpm</span><br><span class="line"></span><br><span class="line">yum -y install yum-utils</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-php-7-4"><a href="#å®‰è£…-php-7-4" class="headerlink" title="å®‰è£… php 7.4"></a>å®‰è£… php 7.4</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --enable remi-php74</span><br><span class="line">yum install php php-cli php-fpm php-mysqlnd php-zip php-devel php-gd php-mcrypt php-mbstring php-curl php-xml php-pear php-bcmath php-json</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…æ–°ç‰ˆ-mariadb"><a href="#å®‰è£…æ–°ç‰ˆ-mariadb" class="headerlink" title="å®‰è£…æ–°ç‰ˆ mariadb"></a>å®‰è£…æ–°ç‰ˆ mariadb</h4><p>å…ˆåŠ ä¸ªæºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/mariadb.repo</span><br><span class="line"></span><br><span class="line">[mariadb]</span><br><span class="line">name = MariaDB</span><br><span class="line">baseurl = https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/10.5/centos7-amd64/</span><br><span class="line">gpgkey =  https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB</span><br><span class="line">gpgcheck = 1</span><br></pre></td></tr></table></figure><p>å®‰è£…æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line">yum install mariadb-server</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å¯†ç ï¼š</p><blockquote><p>æ•²å›è½¦çš„æ—¶å€™æ³¨æ„åˆ«æŠŠç”¨æˆ·è¿œç¨‹ç™»å½•ç»™ç¦äº†ï¼ï¼ï¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-nginx"><a href="#å®‰è£…-nginx" class="headerlink" title="å®‰è£… nginx"></a>å®‰è£… nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl start php</span><br><span class="line">systemctl start php-fpm</span><br><span class="line">systemctl start mariadb</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel å¯¼å…¥ excel æŠ¥é”™æ’æŸ¥è®°å½•</title>
      <link href="/2021/04/21/laravel-excel-import-bug/"/>
      <url>/2021/04/21/laravel-excel-import-bug/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å…¬å¸é¡¹ç›®å¯¼å…¥ excel æ—¶çªé‡ä¸€ä¸ªæŠ¥é”™ï¼š<code>Undefined index: Sheet1</code>ï¼Œä¸€ä¸‹ç»™æˆ‘æ•´æ‡µé€¼äº†ï¼Œä¸€é€šæ’æŸ¥ï¼Œå‘ç°æ˜¯å› ä¸ºæ‰§è¡Œè¿‡ composer updateï¼ŒæŠŠä¸€ä¸ªåŒ…å‡çº§åˆ°äº†æœ€é«˜ï¼Œç„¶åï¼Œå®ƒå°±ä¸èƒ½ç”¨äº†ã€‚</p><p>çœ‹å®˜æ–¹ issues è¯´ï¼š</p><blockquote><p>This is a known bug in PhpSpreadsheet PHPOffice/PhpSpreadsheet#1895. Until they release a new version, you have to lock the phpspreadsheet version to 1.16</p></blockquote><p>å•¥æ„æ€å‘¢ï¼Œç¿»è¯‘ä¸€ä¸‹å§ï¼š<br>è¿™æ˜¯PhpSpreadsheet PHPOffice / PhpSpreadsheetï¼ƒ1895ä¸­çš„ä¸€ä¸ªå·²çŸ¥é”™è¯¯ã€‚åœ¨ä»–ä»¬å‘å¸ƒæ–°ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å°†phpspreadsheetç‰ˆæœ¬é”å®šä¸º1.16</p><p>ç‰ˆæœ¬å¤ªé«˜æœ‰æ—¶å€™ä¹Ÿä¸æ˜¯ä¸ªå¥½äº‹å‘€ï¼</p><p><a href="https://github.com/Maatwebsite/Laravel-Excel/issues/3057">issuse</a></p>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€å¥è¯çœ‹æ‡‚é›†ç¾¤ã€å¾®æœåŠ¡å’Œåˆ†å¸ƒå¼çš„åŒºåˆ«</title>
      <link href="/2021/04/13/distributed-system/"/>
      <url>/2021/04/13/distributed-system/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå®Œæ•´çš„æœåŠ¡æ‹†åˆ†æˆå¤šä¸ªå¾®å°çš„æœåŠ¡ï¼Œå°±æ˜¯å¾®æœåŠ¡ã€‚</p><p>æ¯ä¸ªæœåŠ¡ä¸æ­¢ä¸€ä¸ªå°±æ˜¯é›†ç¾¤ã€‚</p><p>å¾®æœåŠ¡éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ä¹‹é—´å¯ä»¥ç›¸äº’é€šä¿¡å°±æ˜¯åˆ†å¸ƒå¼ã€‚</p><p>å¾®æœåŠ¡ä¸åˆ†å¸ƒå¼çš„ç»†å¾®å·®åˆ«æ˜¯å¾®æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç ä¸èƒ½åœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°‘å¹´ï¼Œç•™ä¸‹ä½ çš„é”®å¸½å§ï¼</title>
      <link href="/2021/04/08/keyboard/"/>
      <url>/2021/04/08/keyboard/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å¹²äº†ä¸€ä»¶æœ‰ç‚¹ä¼¤æ„Ÿï¼Œä½†æ˜¯æŒºæœ‰æ„æ€çš„äº‹æƒ…ã€‚è™½ç„¶æ˜¯ä¸ªæµæ°´è´¦ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æœ‰å¿…è¦è®°å½•ä¸€ä¸‹ã€‚</p><p>æˆ‘è·Ÿè¦ç¦»èŒçš„ <a href="https://alon.wang/">é˜¿é¾™åŒå­¦</a> æ¢äº†ä¸€ä¸ªé”®å¸½ã€‚</p><p>æˆ‘æƒ³ï¼Œå¦‚æœæŠŠè¿™ä¸ªåšæ³•ä¸€ç›´å»¶ç»­ä¸‹å»ï¼Œæ¯ç¦»èŒä¸€ä¸ªå…³ç³»ä¸é”™çš„å°ä¼™ä¼´å°±ç›¸äº’äº¤æ¢ä¸€ä¸ªé”®å¸½ï¼Œé‚£æœ€åè¿™æŠŠé”®ç›˜ä¹Ÿå°±éå¸¸æœ‰æ„ä¹‰äº†ï¼Œå¯¹å§ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/page-wodn-long.jpeg" alt="page-down"></p><p>ğŸ˜“çœ‹æˆ‘è¿™æ²¹å…‰é“®äº®çš„ç©ºæ ¼â€¦â€¦</p><p>ç½‘ç»œä¸€çº¿ç‰µï¼Œçæƒœè¿™æ®µç¼˜ã€‚</p><p>ç¥æ„¿é˜¿é¾™çš„å·¥ä½œè¶Šæ¥è¶Šå¥½ï¼</p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo è¡¨æ ¼æµ‹è¯•</title>
      <link href="/2021/03/28/table-test/"/>
      <url>/2021/03/28/table-test/</url>
      
        <content type="html"><![CDATA[<p>å‘ç°ä¹‹å‰å†™çš„ä¸€ç¯‡æ–‡ç« è¡¨æ ¼ä¸æ˜¾ç¤ºï¼Œè¯•è¯•å’‹å›äº‹â€¦â€¦</p><table><thead><tr><th align="left">æ’åºæ–¹æ³•</th><th align="left">å¹³å‡æƒ…å†µ</th><th align="left">æœ€å¥½æƒ…å†µ</th><th align="left">æœ€åæƒ…å†µ</th><th align="left">è¾…åŠ©ç©ºé—´</th><th align="left">ç¨³å®šæ€§</th></tr></thead><tbody><tr><td align="left">å†’æ³¡æ’åº</td><td align="left">O(nÂ²)</td><td align="left">O(nlogn)</td><td align="left">O(nÂ²)</td><td align="left">O(1)</td><td align="left">ç¨³å®š</td></tr><tr><td align="left">ç®€å•é€‰æ‹©</td><td align="left">O(nÂ²)</td><td align="left">O(nÂ²)</td><td align="left">O(nÂ²)</td><td align="left">O(1)</td><td align="left">ç¨³å®š</td></tr><tr><td align="left">ç›´æ¥æ’å…¥</td><td align="left">O(nÂ²)</td><td align="left">O(n)</td><td align="left">O(nÂ²)</td><td align="left">O(1)</td><td align="left">ç¨³å®š</td></tr><tr><td align="left">å¸Œå°”æ’åº</td><td align="left">O(nlogn)~O(nÂ²)</td><td align="left">O(n^1.3)</td><td align="left">O(nÂ²)</td><td align="left">O(1)</td><td align="left">ä¸ç¨³å®š</td></tr><tr><td align="left">å †æ’åº</td><td align="left">O(nlogn)</td><td align="left">O(nlogn)</td><td align="left">O(nlogn)</td><td align="left">O(1)</td><td align="left">ä¸ç¨³å®š</td></tr><tr><td align="left">å½’å¹¶æ’åº</td><td align="left">O(nlogn)</td><td align="left">O(nlogn)</td><td align="left">O(nlogn)</td><td align="left">O(n)</td><td align="left">ä¸ç¨³å®š</td></tr><tr><td align="left">å¿«é€Ÿæ’åº</td><td align="left">O(nlogn)</td><td align="left">O(nlogn)</td><td align="left">O(nÂ²)</td><td align="left">O(nlogn)~O(n)</td><td align="left">ä¸ç¨³å®š</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æµ‹è¯•åŒº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac é»˜è®¤ç»ˆç«¯è®°ä½ ssh å¯†ç </title>
      <link href="/2021/03/28/mac-terminal-ssh/"/>
      <url>/2021/03/28/mac-terminal-ssh/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©ï¼Œåœ¨å°ä¼™ä¼´çš„æåŠ›æ¨èä¸‹è£…äº† iTerm2ï¼Œç”¨äº†å‡ å¤©ï¼Œå¥ˆä½•ä¸æˆ‘å…«å­—ä¸åˆï¼Œssh å vi æ¨¡å¼é”™ä¹±ï¼Œå„ç§ä¿®å¤æ— æœï¼Œä½†æ˜¯åœ¨è‡ªå¸¦ç»ˆç«¯å´åˆæ­£å¸¸ï¼Œæ— å¥ˆåªèƒ½åˆ‡å›ã€‚</p><p>iTerm2 ç”¨ sh æ–‡ä»¶é…ç½®è¿‡ ssh è®°ä½å¯†ç ï¼Œåœ¨é»˜è®¤ç»ˆç«¯ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ã€‚</p><p>é…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p><h4 id="æ–°å»º-sh-è„šæœ¬"><a href="#æ–°å»º-sh-è„šæœ¬" class="headerlink" title="æ–°å»º sh è„šæœ¬"></a>æ–°å»º sh è„šæœ¬</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/local/bin/terminal.sh</span><br></pre></td></tr></table></figure><p>ç„¶åæ”¾å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/expect</span></span><br><span class="line"></span><br><span class="line">set timeout 30</span><br><span class="line">set host [lindex $argv 0]</span><br><span class="line">set port [lindex $argv 1]</span><br><span class="line">set user [lindex $argv 2]</span><br><span class="line">set pswd [lindex $argv 3]</span><br><span class="line"></span><br><span class="line">spawn ssh -p $port $user@$host </span><br><span class="line"></span><br><span class="line">expect &#123;</span><br><span class="line">        &quot;(yes/no)?&quot;</span><br><span class="line">        &#123;send &quot;yes\n&quot;;exp_continue;&#125;</span><br><span class="line">          -re &quot;(p|P)ass(word|wd):&quot;</span><br><span class="line">        &#123;send &quot;$pswd\n&quot;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interact</span><br></pre></td></tr></table></figure><p>å†ç»™ä¸‹è¿è¡Œæƒé™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/local/bin/terminal.sh</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-terminal"><a href="#é…ç½®-terminal" class="headerlink" title="é…ç½® terminal"></a>é…ç½® terminal</h4><p>æ‰“å¼€ç»ˆç«¯ï¼Œå·¦ä¸Šè§’é€‰æ‹©åå¥½è®¾ç½®ï¼Œç„¶åï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/add_shell.jpg" alt="æ–°å»ºçª—å£"></p><p><img src= "/img/loading.gif" data-lazy-src="/images/terminal_sh.png" alt="æ·»åŠ è„šæœ¬"></p><p>å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œæ³¨æ„æŠŠ host å’Œè´¦å·å¯†ç æ›¿æ¢æˆè‡ªå·±çš„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/terminal.sh 127.0.0.1 22 root rootpassword</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œå·¦ä¸Šè§’é€‰æ‹© shell -&gt; æ–°å»ºçª—å£ï¼Œç„¶åé€‰æ‹©ç›®æ ‡çª—å£å³å¯è‡ªåŠ¨ç™»å½•ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/select_terminall.png" alt="æ–°å»ºçª—å£"></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mweb hexo è®¾ç½®</title>
      <link href="/2021/03/26/mweb-hexo-setting/"/>
      <url>/2021/03/26/mweb-hexo-setting/</url>
      
        <content type="html"><![CDATA[<p>hexo å€ŸåŠ©å›¾ç‰‡æ’ä»¶å¯ä»¥åœ¨ post ç›®å½•å»ºç«‹è·Ÿæ–‡ç« æ–‡ä»¶çš„åŒåæ–‡ä»¶å¤¹æ¥ä¿å­˜å›¾ç‰‡ï¼Œä¹‹å‰ä¹Ÿä¸€ç›´éƒ½æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†æ˜¯åœ¨ mweb ä¸Šé¢„è§ˆæ—¶å›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œåæ­£æ€»ä¼šæœ‰ä¸€ç•ªæŠ˜è…¾ï¼Œè€Œä¸”ä¹Ÿå°‘ä¸äº†ä¸€ç•ªæŠ˜è…¾ä»¥åï¼Œå¼„å¥½äº†ã€‚</p><p>ç°åœ¨å°†æŠ˜è…¾çš„ç»è¿‡è®°ä¸‹æ¥ç•™æ¡£ã€‚</p><p>é¦–å…ˆï¼Œç”¨ mweb çš„å¤–éƒ¨æ¨¡å¼æ‰“å¼€ hexo ä¸‹çš„ source ç›®å½•ï¼Œç„¶åå³é”®ç›®å½•ï¼Œé€‰æ‹©ç¼–è¾‘ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹å›¾ï¼Œå¦‚æœæ²¡æœ‰é…ç½®å›¾åºŠå¯ä»¥ä¸ç”¨ç†å®ƒï¼Œæˆ‘é…å®Œä¹Ÿæ²¡ç†å®ƒï¼Œä¸ºå•¥å‘¢ï¼Œå› ä¸ºæ…¢ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/mweb-images.png" alt="å›¾ç‰‡è·¯å¾„"></p><p>æŠŠ hexo çš„é…ç½®æ–‡ä»¶ä¸­ï¼š<code>post_asset_folder</code> æ”¹ä¸º <code>false</code>ã€‚</p><p>ä¸‹ä¸€æ­¥ï¼ŒæŠŠä½ èŠ±èŠ±å“¨å“¨çš„å›¾ç‰‡æ”¾åˆ° source/images ç›®å½•å³å¯ï¼Œæ–°å¢å›¾ç‰‡æ—¶ç”¨ mweb çš„å›¾ç‰‡å·¥å…·æ·»åŠ ï¼Œä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ–‡ä»¶å¤¹å†…ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ·»åŠ  mackdown æ ¼å¼çš„å›¾ç‰‡åˆ°æ–‡æ¡£å†…ã€‚</p><p>ç„¶åï¼Œå°±æ²¡äº†ã€‚</p><p>å“¦ï¼Œå¯èƒ½éœ€è¦æ‰§è¡Œä¸€ä¸‹è¿™ä¸ªï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>è¿™æ¬¡çœŸçš„æ²¡äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php ziparchive addfile return false</title>
      <link href="/2021/03/25/php-zip-addfile/"/>
      <url>/2021/03/25/php-zip-addfile/</url>
      
        <content type="html"><![CDATA[<p>æœ‰ä¸ªæ–‡ä»¶ï¼Œå­˜å‚¨äº†ä¸¤æ¡å‡†å¤‡ç”¨äºç»™æ–‡ä»¶é‡å‘½åçš„å­—ç¬¦ä¸²å’Œæ–‡ä»¶è·¯å¾„çš„æ•°æ®ï¼Œæ¯è¡Œä¸€æ¡ï¼Œåç§°å’Œå­—ç¬¦ä¸²ä»¥ <code>,</code> é—´éš”ã€‚</p><p>ç„¶åé—®é¢˜æ¥äº†ï¼Œé€šè¿‡è¯»æ–‡ä»¶å–å‡ºæ•°æ®ï¼Œç„¶åè·å–æ–‡ä»¶è·¯å¾„å¹¶æ‰“åŒ…æ—¶ï¼Œ<code>ZipArchive</code> çš„ <code>addFile</code> æ€»ä¼šæœ‰ä¸€ä¸ª <code>false</code>ã€‚</p><p>æŠ˜è…¾åŠå¤©ï¼Œæœ€åå‘ç°è¿˜æ˜¯å› ä¸ºç²—å¿ƒå¤§æ„ï¼Œæ²¡è¿‡æ»¤è¡Œå°¾çš„æ¢è¡Œç¬¦â€¦â€¦</p><p>ä¸€å£°å¹æ¯ï¼Œæå‡ºå°æœ¬æœ¬é»˜é»˜è®°ä¸Šä¸€ç¬”ã€‚</p><p>æœ€åé™„ä¸Šä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$txt_file</span> = <span class="string">&#x27;./zip.txt&#x27;</span>;</span><br><span class="line"><span class="variable">$zip</span> = <span class="keyword">new</span> ZipArchive();</span><br><span class="line"><span class="variable">$fileName</span> = <span class="string">&#x27;./res.zip&#x27;</span>;</span><br><span class="line"><span class="variable">$path</span> = <span class="string">&#x27;/opt/homebrew/var/www/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(file_exists(<span class="variable">$fileName</span>))&#123;</span><br><span class="line">    unlink(<span class="variable">$fileName</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$zip</span>-&gt;open(<span class="variable">$fileName</span>, ZipArchive::CREATE))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;æ–‡ä»¶è¯»å–å¤±è´¥&#x27;</span>, PHP_EOL;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$handler</span> = fopen(<span class="variable">$txt_file</span>, <span class="string">&#x27;r&#x27;</span>))&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable">$info</span> = fgets(<span class="variable">$handler</span>)) &#123;</span><br><span class="line">        <span class="variable">$arr</span> = explode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$info</span>);</span><br><span class="line">        <span class="keyword">if</span>(file_exists(trim(<span class="variable">$arr</span>[<span class="number">1</span>])))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$zip</span>-&gt;addFile(trim(<span class="variable">$path</span>.<span class="variable">$arr</span>[<span class="number">1</span>]), <span class="variable">$arr</span>[<span class="number">0</span>].<span class="string">&#x27;.img&#x27;</span>) ? <span class="string">&#x27;ok&#x27;</span> : <span class="string">&#x27;false&#x27;</span>, PHP_EOL;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$zip</span>-&gt;close();</span><br><span class="line">    fclose(<span class="variable">$handler</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/res.png" alt="res"></p><blockquote><p>æ‰€ä»¥ï¼Œä¸è¦æ€€ç–‘ï¼Œåªè¦ addfile è¿”å›äº† falseï¼Œè‚¯å®šæ˜¯è·¯å¾„æœ‰é—®é¢˜æˆ–è€…æ–‡ä»¶ä¸å­˜åœ¨ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - é—¨é¢æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-facade/"/>
      <url>/2021/03/21/design-pattern-facade/</url>
      
        <content type="html"><![CDATA[<p>é—¨é¢æ¨¡å¼ä¹Ÿå«å¤–è§‚æ¨¡å¼ï¼Œä¸»è¦æ˜¯ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œfacade æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</p><p>ä¸€ä¸ªç®€å•çš„ğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Facade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Subsystem <span class="variable">$subsystemA</span>;</span><br><span class="line">    <span class="keyword">private</span> Subsystem <span class="variable">$subsystemB</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Subsystem <span class="variable">$subsystemA</span>, Subsystem <span class="variable">$subsystemB</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;subsystemA = <span class="variable">$subsystemA</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;subsystemB = <span class="variable">$subsystemB</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">subsystemARun</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;subsystemA-&gt;run();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">subsystemBRun</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;subsystemB-&gt;run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subsystem</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubsystemA</span> <span class="keyword">implements</span> <span class="title">Subsystem</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;å­ç³»ç»Ÿ A è¿è¡Œ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubsystemB</span> <span class="keyword">implements</span> <span class="title">Subsystem</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;å­ç³»ç»Ÿ B è¿è¡Œ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$subsystemA</span> = <span class="keyword">new</span> SubsystemA();</span><br><span class="line"><span class="variable">$subsystemB</span> = <span class="keyword">new</span> SubsystemB();</span><br><span class="line"><span class="variable">$facade</span> = <span class="keyword">new</span> Facade(<span class="variable">$subsystemA</span>, <span class="variable">$subsystemB</span>);</span><br><span class="line"><span class="variable">$facade</span>-&gt;subsystemARun();</span><br><span class="line"><span class="variable">$facade</span>-&gt;subsystemBRun();</span><br></pre></td></tr></table></figure><p>å½“éœ€è¦ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•çš„æ¥å£æ—¶ï¼Œé—¨é¢æ¨¡å¼éå¸¸é€‚ç”¨ã€‚åŒæ—¶å½“éœ€è¦æ„å»ºä¸€ä¸ªå±‚æ¬¡ç»“æ„çš„å­ç³»ç»Ÿæ—¶ï¼Œé—¨é¢æ¨¡å¼ä¹Ÿå¯ä»¥å……å½“æ¯å±‚å­ç³»ç»Ÿçš„å…¥å£ç‚¹ï¼Œä¾‹å¦‚ MVC æ¡†æ¶ã€‚</p><p>è¿™ä¸ªæ¨¡å¼è·Ÿåœ¨ laravel æ¡†æ¶ä¸­çœ‹çš„çš„è¿˜æœ‰æ‰€ä¸åŒï¼Œåœ¨æ¡†æ¶ä¸­ï¼Œè°ƒç”¨é—¨é¢æ—¶ï¼Œä¼šé€šè¿‡é­”æœ¯æ–¹æ³•å»è°ƒç”¨èƒŒåçœŸæ­£çš„åŠŸèƒ½ç±»æ–¹æ³•ï¼Œè€Œä¸”æ¯ä¸ªé—¨é¢åªè´Ÿè´£ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ã€‚ç›¸å¯¹æ¥è¯´ï¼Œæ¡†æ¶ä¸­çš„ç”¨æ³•æ›´ç¬¦åˆå•ä¸€èŒè´£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ä¸­ä»‹è€…æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-mediator/"/>
      <url>/2021/03/21/design-pattern-mediator/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å¤ªå¿™ï¼Œæ‹–æ›´å¥½å¤šå¤©ï¼Œéš¾å—â€¦â€¦</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹çœ‹æ¦‚å¿µï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°äº’ç›¸å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥è‚šé‡Œåœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p><p>ä¹Ÿå°±ç›¸å½“äºä½ ç§Ÿäº†ä¸ªæˆ¿å­ï¼Œä½†æ˜¯æˆ¿ä¸œå¸¸å¹´æ—…å±…å›½å¤–ï¼Œæœ‰äº‹æƒ…ä½ ä¹Ÿä¸éœ€è¦æ‰¾æˆ¿ä¸œï¼Œå› ä¸ºæˆ¿ä¸œæŠŠæ‰€æœ‰äº‹æƒ…éƒ½å§”æ‰˜ç»™äº†ä¸­ä»‹ã€‚</p><p>ä»¤äººç¾¡æ…•çš„æˆ¿ä¸œå•Šâ€¦â€¦</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­ä»‹è€…æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MediatorInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"><span class="variable">$service</span>, <span class="keyword">string</span> <span class="variable">$message</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mediator</span> <span class="keyword">implements</span> <span class="title">MediatorInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"><span class="variable">$service</span>, <span class="keyword">string</span> <span class="variable">$message</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$service</span>-&gt;notify(<span class="variable">$message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Colleague</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MediatorInterface <span class="variable">$mediator</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Colleague <span class="variable">$colleague</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setColleague</span>(<span class="params">Colleague <span class="variable">$colleague</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;colleague = <span class="variable">$colleague</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColleague</span>(<span class="params"></span>): <span class="title">Colleague</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;colleague;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setMediator</span>(<span class="params">MediatorInterface <span class="variable">$mediator</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;mediator = <span class="variable">$mediator</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getMediator</span>(<span class="params"></span>): <span class="title">MediatorInterface</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;mediator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$message</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientA</span> <span class="keyword">extends</span> <span class="title">Colleague</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"><span class="variable">$message</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;getMediator()-&gt;send(<span class="keyword">$this</span>, <span class="variable">$message</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$message</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> get_class(<span class="keyword">$this</span>-&gt;getColleague()), <span class="string">&#x27; æ”¶åˆ°æ¶ˆæ¯ï¼š&#x27;</span>,  <span class="variable">$message</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientB</span> <span class="keyword">extends</span> <span class="title">Colleague</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"><span class="variable">$message</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;getMediator()-&gt;send(<span class="keyword">$this</span>, <span class="variable">$message</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$message</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> get_class(<span class="keyword">$this</span>-&gt;getColleague()), <span class="string">&#x27; æ”¶åˆ°æ¶ˆæ¯ï¼š&#x27;</span>, <span class="variable">$message</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$mediator</span> = <span class="keyword">new</span> Mediator();</span><br><span class="line"><span class="variable">$clientA</span> = <span class="keyword">new</span> ClientA();</span><br><span class="line"><span class="variable">$clientB</span> = <span class="keyword">new</span> ClientB();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$clientA</span>-&gt;setMediator(<span class="variable">$mediator</span>);</span><br><span class="line"><span class="variable">$clientB</span>-&gt;setMediator(<span class="variable">$mediator</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$clientA</span>-&gt;setColleague(<span class="variable">$clientB</span>);</span><br><span class="line"><span class="variable">$clientB</span>-&gt;setColleague(<span class="variable">$clientA</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$clientA</span>-&gt;send(<span class="string">&#x27;åƒé¥­äº†æ²¡ï¼Ÿ&#x27;</span>);</span><br><span class="line"><span class="variable">$clientB</span>-&gt;send(<span class="string">&#x27;æ²¡å‘¢ï¼Œè¦è¯·å®¢ï¼Ÿ&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡å¼æ¯”è¾ƒé€‚ç”¨äºé€šè®¯ç±»äº§å“ï¼ŒèŠå¤©å•Šã€ç›´æ’­ä»€ä¹ˆçš„ï¼Œå¯ä»¥å®ç°ç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´çš„ç»“å¶ï¼Œä¸éœ€è¦è®©ä¸€ä¸ªç”¨æˆ·å»ç»´æŠ¤æ‰€æœ‰ç®¡ç†çš„ç”¨æˆ·å¯¹è±¡ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚å½“ä¸šåŠ¡é€»è¾‘æ›´åŠ å¤æ‚æ—¶ï¼Œä¸­ä»‹ç±»å°±ä¼šæ›´åŠ å¤æ‚å’Œåºå¤§ï¼Œæ‰€ä»¥åº”ç”¨çš„åŒæ—¶ä¹Ÿè¦è€ƒè™‘è¯¥å¦‚ä½•å–èˆã€‚</p><p>okï¼Œä»¥ä¸Šå°±æ˜¯ç»ˆç»“è€…æ¨¡å¼äº†ï¼Œä»£ç è¿˜æ˜¯æ¯”è¾ƒé€šé€çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è®¿é—®è€…æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-visitor/"/>
      <url>/2021/03/21/design-pattern-visitor/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªæ¨¡å¼å°±æ¯”è¾ƒå¤æ‚ï¼Œé¦–å…ˆä»æ¦‚å¿µæ¥è¯´ï¼Œå°±æ˜¯å°†å¯¹è±¡çš„æ“ä½œå¤–åŒ…ç»™å…¶ä»–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è®¿é—®è€…ï¼Œä»è€Œå®ç°åœ¨ä¸æ”¹å˜ä¸ªå…ƒç´ çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚</p><p>å½“ä¸€ä¸ªåŸºç±»å¯ä»¥è¢«è®¿é—®ï¼Œå¹¶å…·æœ‰åä¸º acceptVisitor çš„å…¬å…±æ–¹æ³•ï¼Œæ”¹æ–¹æ³•æ¥å—å‚æ•° Visitorï¼Œç„¶åæ ¹æ®ä¼ é€’ Visitor å¯¹è±¡è°ƒç”¨å…¬å…±æ–¹æ³• visitã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">Visitor</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visit</span>(<span class="params"><span class="variable">$visitor</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Element</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Visitor <span class="variable">$visitor</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">acceptVisitor</span>(<span class="params">Visitor <span class="variable">$visitor</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$visitor</span>-&gt;visit(<span class="keyword">$this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameVisitor</span> <span class="keyword">implements</span> <span class="title">Visitor</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">visit</span>(<span class="params"><span class="variable">$visitor</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$visitor</span>-&gt;getName(), PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$element</span> = <span class="keyword">new</span> Element(<span class="string">&#x27;wu&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$element</span>-&gt;getName(), PHP_EOL;</span><br><span class="line"><span class="variable">$element</span>-&gt;acceptVisitor(<span class="keyword">new</span> NameVisitor());</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è°ƒç”¨ acceptVisitor æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè®¿é—®è€…ï¼Œå…·ä½“å¯¹è±¡å¯ä»¥æŠŠè®¿é—®è€…çš„getName èƒ½åŠ›ä¹Ÿæ‰©å±•ä¸ºè‡ªå·±èƒ½åŠ›ã€‚å½“ç„¶å¦‚æœä½ éœ€è¦å¤šä¸ªæ‰©å±•èƒ½åŠ›ï¼Œä½ å¯ä»¥æœ‰å¤šä¸ªè®¿é—®è€…ã€‚è€Œ acceptVisitor æ–¹æ³•è°ƒç”¨è®¿é—®è€…çš„visit æ–¹æ³•æ—¶ï¼Œä¼ å…¥ $this æ˜¯ä¸ºäº†èƒ½ä½¿ç”¨ Element çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½¿å…¶æ„Ÿè§‰æ‰©å±•å®Œå°±æ˜¯ Element çš„çœŸæ­£ä¸€éƒ¨åˆ†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - çŠ¶æ€æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-state/"/>
      <url>/2021/03/21/design-pattern-state/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡æ”¹å˜ç±»çš„çŠ¶æ€æ¥å®ç°å¯¹å®ƒè¡Œä¸ºçš„åˆ‡æ¢ã€‚</p><p>çœ‹ä»£ç è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$state</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateContext</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> State <span class="variable">$state</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setState</span>(<span class="params">State <span class="variable">$state</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = <span class="variable">$state</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;state-&gt;getState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state-&gt;handle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateOrder</span> <span class="keyword">extends</span> <span class="title">State</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = <span class="string">&#x27;create&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;åˆ›å»ºè®¢å•&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FinishOrder</span> <span class="keyword">extends</span> <span class="title">State</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = <span class="string">&#x27;finish&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ç»“æŸè®¢å•&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$stateContext</span> = <span class="keyword">new</span> StateContext();</span><br><span class="line"><span class="variable">$stateContext</span>-&gt;setState(<span class="keyword">new</span> CreateOrder());</span><br><span class="line"><span class="variable">$stateContext</span>-&gt;handle();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$stateContext</span>-&gt;getState(), PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="variable">$stateContext</span>-&gt;setState(<span class="keyword">new</span> FinishOrder());</span><br><span class="line"><span class="variable">$stateContext</span>-&gt;handle();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$stateContext</span>-&gt;getState(), PHP_EOL;</span><br></pre></td></tr></table></figure><p>å°†çŠ¶æ€ç‹¬ç«‹ï¼Œç„¶ååœ¨å¤–éƒ¨æ§åˆ¶çŠ¶æ€åˆ‡æ¢ï¼Œå·²å®ç°å¯¹å…¶è¡Œä¸ºæ§åˆ¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - å¤‡å¿˜å½•æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-memento/"/>
      <url>/2021/03/21/design-pattern-memento/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¯¥å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚è¿™æ ·å°±å¯ä»¥æ–¹ä¾¿çš„æ¢å¤åˆ°ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Memento</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$state</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$state</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = <span class="variable">$state</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Originator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Memento <span class="variable">$memento</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$state</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setMemento</span>(<span class="params">Memento <span class="variable">$memento</span></span>): <span class="title">Memento</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;memento = <span class="variable">$memento</span>;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;memento;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getMemento</span>(<span class="params"></span>): <span class="title">Memento</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;memento;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;state = <span class="keyword">$this</span>-&gt;memento-&gt;getState();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$state</span> = <span class="string">&#x27;new state&#x27;</span>;</span><br><span class="line"><span class="variable">$originator</span> = <span class="keyword">new</span> Originator();</span><br><span class="line"><span class="variable">$memento</span> = <span class="keyword">new</span> Memento(<span class="string">&#x27;memento state&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$memento</span>-&gt;getState(), PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="variable">$originator</span>-&gt;setMemento(<span class="variable">$memento</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$originator</span>-&gt;getState(), PHP_EOL;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„å¤‡å¿˜å½•æ¨¡å¼äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - å‘½ä»¤è¡Œæ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-command/"/>
      <url>/2021/03/21/design-pattern-command/</url>
      
        <content type="html"><![CDATA[<p>ç”¨è¿‡ laravel æ¡†æ¶çš„åº”è¯¥éƒ½çŸ¥é“ï¼Œå…¶è„šæœ¬æ¨¡å—éå¸¸å¼ºå¤§ï¼Œè¿™äº›è„šæœ¬ï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤è¡Œæ¨¡å¼ã€‚</p><p>è¯´åˆ°å‘½ä»¤è¡Œï¼Œå°±ä¸å¾—æ­¥æä¸€ä¸‹ cli å’Œ cgi çš„åŒºåˆ«ï¼Œåœ¨ nginx ä¸­ï¼Œphp å¹¶ä¸æ˜¯ç›´æ¥æ‰§è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡ cgi è°ƒç”¨ php å¹¶è·å–æ‰§è¡Œç»“æœã€‚</p><p>è€Œ cli å°±æ˜¯å‘½ä»¤è¡Œæ¥å£ï¼Œä¸»è¦ç”¨äº shell è„šæœ¬çš„å¼€å‘ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">php command.php</span><br><span class="line">/opt/homebrew/var/www/design-pattern</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">php-cli command.php</span><br><span class="line">X-Powered-By: PHP/7.4.16</span><br><span class="line">Content-type: text/html; charset=UTF-8</span><br><span class="line"></span><br><span class="line">/opt/homebrew/var/www/design-pattern</span><br></pre></td></tr></table></figure><p>ä¸å¤šè¯´äº†ï¼Œå›å¤´å†ä¸“é—¨çœ‹ä¸€ä¸‹è¿™æ–¹é¢çš„ä¸œè¥¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è´£ä»»é“¾æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-cor/"/>
      <url>/2021/03/21/design-pattern-cor/</url>
      
        <content type="html"><![CDATA[<p>å»ºç«‹ä¸€ä¸ªå¯¹è±¡é“¾æ¥æŒ‰æŒ‡å®šé¡ºåºå¤„ç†è°ƒç”¨ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ— æ³•å¤„ç†å‘½ä»¤ï¼Œå®ƒä¼šå§”æ‰˜è¿™ä¸ªè°ƒç”¨ç»™å®ƒçš„ä¸‹ä¸€ä¸ªå¯¹è±¡æ¥è¿›è¡Œå¤„ç†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> ?Handler <span class="variable">$successor</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Handler <span class="variable">$handler</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;successor = <span class="variable">$handler</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpInNumeric</span> <span class="keyword">extends</span> <span class="title">Handler</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Handler <span class="variable">$successor</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::__construct(<span class="variable">$successor</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (is_numeric(<span class="variable">$request</span>)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;æ•°å­—è¯·æ±‚&#x27;</span>, PHP_EOL;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;successor) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;successor-&gt;handle(<span class="variable">$request</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpInArray</span> <span class="keyword">extends</span> <span class="title">Handler</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;æ•°ç»„è¯·æ±‚&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$handler</span> = <span class="keyword">new</span> HttpInNumeric(<span class="keyword">new</span> HttpInArray());</span><br><span class="line"><span class="variable">$handler</span>-&gt;handle(<span class="number">1</span>);</span><br><span class="line"><span class="variable">$handler</span>-&gt;handle([<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><p>è¿˜ç®—ç®€å•ï¼Œå°±æ˜¯ä¾æ¬¡å¾€ä¸‹ä¼ é€’ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è¿­ä»£å™¨æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-iterator/"/>
      <url>/2021/03/21/design-pattern-iterator/</url>
      
        <content type="html"><![CDATA[<p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªé›†åˆå¯¹è±¡ä¸­çš„å„ç§å…ƒç´ ,è€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p><p>foreach çš„åº•å±‚å°±æ˜¯è¿­ä»£å™¨ã€‚å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½å·²ç»å°†å…¶ä½œä¸ºä¸€ä¸ªåŸºç¡€ç±»åº“å®ç°å‡ºæ¥äº†ï¼Œæ‰€ä»¥ä¹Ÿå°±æœ‰äº†è¿™ä¸ªæ¨¡å¼ç›®å‰å­¦ä¹ æ„ä¹‰å¤§äºå®é™…æ„ä¹‰çš„è¯´æ³•ã€‚</p><p>åœ¨ php ä¸­ï¼Œå†…éƒ¨å·²æä¾› Iterator æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bookshelf</span> <span class="keyword">implements</span> \<span class="title">Countable</span>, \<span class="title">Iterator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">array</span> <span class="variable">$books</span> = [];</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> <span class="variable">$current</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">Book <span class="variable">$book</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;books[] = <span class="variable">$book</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">current</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;books[<span class="keyword">$this</span>-&gt;current];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;current++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">key</span>(<span class="params"></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;current;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">valid</span>(<span class="params"></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;books[<span class="keyword">$this</span>-&gt;current]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rewind</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;current = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count(<span class="keyword">$this</span>-&gt;books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$author</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$title</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$author</span>, <span class="keyword">string</span> <span class="variable">$title</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;author = <span class="variable">$author</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;title = <span class="variable">$title</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getAuthor</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getAuthorAndTitle</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;getAuthor() . <span class="string">&#x27;-&#x27;</span> . <span class="keyword">$this</span>-&gt;getTitle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bookA</span> = <span class="keyword">new</span> Book(<span class="string">&#x27;wu&#x27;</span>, <span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"><span class="variable">$bookB</span> = <span class="keyword">new</span> Book(<span class="string">&#x27;wu&#x27;</span>, <span class="string">&#x27;redis&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$bookshelf</span> = <span class="keyword">new</span> Bookshelf();</span><br><span class="line"><span class="variable">$bookshelf</span>-&gt;addBook(<span class="variable">$bookA</span>);</span><br><span class="line"><span class="variable">$bookshelf</span>-&gt;addBook(<span class="variable">$bookB</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$bookshelf</span> <span class="keyword">as</span> <span class="variable">$book</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$book</span>-&gt;getAuthorAndTitle(), PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè‡³äºå¦‚ä½•å®ç°å°±ä¸å†™äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-observer/"/>
      <url>/2021/03/21/design-pattern-observer/</url>
      
        <content type="html"><![CDATA[<p>å½“å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚å®ƒä½¿ç”¨çš„æ˜¯ä½è€¦åˆçš„æ–¹å¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeleteUserSubject</span> <span class="keyword">implements</span> \<span class="title">SplSubject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">SplObjectStorage</span> <span class="variable">$observers</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$data</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers = <span class="keyword">new</span> \<span class="built_in">SplObjectStorage</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">attach</span>(<span class="params"><span class="built_in">SplObserver</span> <span class="variable">$observer</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers-&gt;attach(<span class="variable">$observer</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">detach</span>(<span class="params"><span class="built_in">SplObserver</span> <span class="variable">$observer</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers-&gt;detach(<span class="variable">$observer</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;observers <span class="keyword">as</span> <span class="variable">$observer</span>) &#123;</span><br><span class="line">            <span class="variable">$observer</span>-&gt;update(<span class="keyword">$this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;data = <span class="keyword">new</span> <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">delete</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;ç”¨æˆ· &#x27;</span>, <span class="keyword">$this</span>-&gt;name, <span class="string">&#x27; è¢«åˆ é™¤&#x27;</span>, PHP_EOL;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;data-&gt;delete();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;å¼€å§‹é€šçŸ¥å…³è”å¤„ç†ï¼š&#x27;</span>, PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;data-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserLogDeleteObserver</span> <span class="keyword">implements</span> \<span class="title">SplObserver</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">SplSubject</span> <span class="variable">$subject</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"><span class="built_in">SplSubject</span> <span class="variable">$subject</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;subject = <span class="keyword">clone</span> <span class="variable">$subject</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;deleteUserLog();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteUserLog</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;åˆ é™¤ç”¨æˆ·&#x27;</span>, <span class="keyword">$this</span>-&gt;subject-&gt;getName(),<span class="string">&#x27; çš„æ—¥å¿—&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$subject</span> = <span class="keyword">new</span> DeleteUserSubject();</span><br><span class="line"><span class="variable">$subject</span>-&gt;attach(<span class="keyword">new</span> UserLogDeleteObserver());</span><br><span class="line"><span class="variable">$subject</span>-&gt;process();</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡å¼ä»£ç ç¨å¾®å¤šä¸€ç‚¹ï¼Œä½†æ˜¯åœºæ™¯å¾ˆç»å…¸ï¼Œä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-template-method/"/>
      <url>/2021/03/21/design-pattern-template-method/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªæ¨¡å¼æ˜¯å¯¹ç»§æ‰¿çš„æœ€å¥½è¯ é‡Šã€‚å½“å­ç±»æœ‰é‡å¤åŠ¨ä½œæ—¶ï¼Œå°†å…¶é‡å¤åŠ¨ä½œæ”¾å…¥çˆ¶ç±»ç»Ÿä¸€å¤„ç†ï¼Œè¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•æœ€ç®€å•é€šä¿—çš„è§£é‡Šã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">baseMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;base method&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">operate</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserController</span> <span class="keyword">extends</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">operate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;user operate&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> UserController();</span><br><span class="line"><span class="variable">$user</span>-&gt;baseMethod();</span><br><span class="line"><span class="variable">$user</span>-&gt;operate();</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡å¼å¤ªç®€å•äº†ï¼Œå°±ä¸å¤šè¯´äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ç­–ç•¥æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-strategy/"/>
      <url>/2021/03/21/design-pattern-strategy/</url>
      
        <content type="html"><![CDATA[<p>å®šä¹‰ä¸€ç»„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬èƒ½å¤Ÿå¿«é€Ÿåˆ‡æ¢ã€‚æœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ã€‚ä¸€èˆ¬ç”¨äºé¿å…å¤šé‡æ¡ä»¶åˆ¤æ–­å’Œåœ¨è¿è¡Œæ—¶è¿›è¡Œæ›´æ”¹ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Strategy</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">algorithm</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlgorithmA</span> <span class="keyword">implements</span> <span class="title">Strategy</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">algorithm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ç®—æ³• A&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlgorithmB</span> <span class="keyword">implements</span> <span class="title">Strategy</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">algorithm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ç®—æ³• B&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Strategy <span class="variable">$strategy</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Strategy <span class="variable">$strategy</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;strategy = <span class="variable">$strategy</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">callAlgorithm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;strategy-&gt;algorithm();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$algorithmA</span> = <span class="keyword">new</span> AlgorithmA();</span><br><span class="line"><span class="variable">$contextA</span> = <span class="keyword">new</span> Context(<span class="variable">$algorithmA</span>);</span><br><span class="line"><span class="variable">$contextA</span>-&gt;callAlgorithm();</span><br><span class="line"></span><br><span class="line"><span class="variable">$algorithmB</span> = <span class="keyword">new</span> AlgorithmB();</span><br><span class="line"><span class="variable">$contextB</span> = <span class="keyword">new</span> Context(<span class="variable">$algorithmB</span>);</span><br><span class="line"><span class="variable">$contextB</span>-&gt;callAlgorithm();</span><br></pre></td></tr></table></figure><p>è·Ÿå·¥å‚æ¨¡å¼éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯ç­–ç•¥æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ï¼Œå¹¶ä¸ä¼šè¿”å›ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¼ºè°ƒå…¶è¡Œä¸ºã€‚é€šè¿‡è°ƒç”¨ä¸Šä¸‹æ–‡å°†è¦è°ƒç”¨çš„æ–¹æ³•å°è£…èµ·æ¥ï¼Œå®¢æˆ·ç«¯åªè¦è°ƒç”¨ä¸Šä¸‹æ–‡çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p><p>é‚£ä¹ˆï¼Œè·Ÿå·¥å‚ç»“åˆä¸€ä¸‹æ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - æµæ¥å£æ¨¡å¼</title>
      <link href="/2021/03/21/desgin-pattern-fi/"/>
      <url>/2021/03/21/desgin-pattern-fi/</url>
      
        <content type="html"><![CDATA[<p>æµæ¥å£æ¨¡å¼é€šå¸¸ç”¨æ¥ç¼–å†™æ˜“äºé˜…è¯»çš„ä»£ç ï¼Œå°±åƒè‡ªç„¶è¯­è¨€ä¸€æ ·ï¼ˆå¦‚è‹±è¯­ï¼‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sql</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">array</span> <span class="variable">$fields</span> = [];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">array</span> <span class="variable">$from</span> = [];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">array</span> <span class="variable">$where</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">select</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$fields</span></span>): <span class="title">Sql</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;fields = <span class="variable">$fields</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">from</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$table</span>, <span class="keyword">string</span> <span class="variable">$alias</span></span>): <span class="title">Sql</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from[] = <span class="variable">$table</span> . <span class="string">&#x27; AS &#x27;</span> . <span class="variable">$alias</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">where</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$condition</span></span>): <span class="title">Sql</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;where[] = <span class="variable">$condition</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sprintf(</span><br><span class="line">            <span class="string">&#x27;select %s from %s where %s&#x27;</span>,</span><br><span class="line">            join(<span class="string">&#x27;, &#x27;</span>, <span class="keyword">$this</span>-&gt;fields),</span><br><span class="line">            join(<span class="string">&#x27;, &#x27;</span>, <span class="keyword">$this</span>-&gt;from),</span><br><span class="line">            join(<span class="string">&#x27; AND &#x27;</span>, <span class="keyword">$this</span>-&gt;where)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$query</span> = (<span class="keyword">new</span> Sql())-&gt;select([<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>])-&gt;from(<span class="string">&#x27;foobar&#x27;</span>, <span class="string">&#x27;f&#x27;</span>)-&gt;where(<span class="string">&#x27;f.bar = foo&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$query</span>, PHP_EOL;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡å¼è·Ÿå‰ä¸€ä¸ªæ¨¡å¼éƒ½æœ‰ç‚¹è¯´ä¸å‡ºçš„è¯¡å¼‚ï¼Œå¯èƒ½ä¸æ˜¯æ–°æ¨¡å¼ï¼Œå±äºæ²¡è¢«æ­£å¼åˆ’åˆ†åˆ°è®¾è®¡æ¨¡å¼ä¸­çš„æ¨¡å¼ï¼Ÿï¼Ÿï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ä¾èµ–æ³¨å…¥æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-di/"/>
      <url>/2021/03/21/design-pattern-di/</url>
      
        <content type="html"><![CDATA[<p>ä¾èµ–æ³¨å…¥æ˜¯æ§åˆ¶åè½¬çš„ä¸€ç§å®ç°æ–¹å¼ã€‚è¦å®ç°æ§åˆ¶åè½¬ï¼Œéœ€è¦å°†åˆ›å»ºè¢«è°ƒç”¨è€…å®ä¾‹çš„å·¥ä½œäº¤ç”± IOC å®¹å™¨å®Œæˆï¼Œç„¶ååœ¨è°ƒç”¨è€…ä¸­æ³¨å…¥è¢«è°ƒç”¨è€…ï¼Œé€šå¸¸ä½¿ç”¨æ„é€ å™¨æˆ–æ–¹æ³•æ³¨å…¥å®ç°ã€‚è¿™æ ·æˆ‘ä»¬èˆ…å®ç°äº†è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…çš„è§£å¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¾èµ–æ³¨å…¥ã€‚</p><p>é‚£ä¹ˆæ§åˆ¶åè½¬æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ä¹Ÿå°±æ˜¯ A ä¾èµ–äº Bï¼Œå¸¸è§„åšæ³•æ˜¯åœ¨ A ä¸­ç›´æ¥å®ä¾‹åŒ– Bï¼Œé‚£ä¹ˆæ§åˆ¶åè½¬å°±æ˜¯å°† B åœ¨å¤–éƒ¨å®ä¾‹åŒ–ï¼Œç„¶åä¼ å…¥ A å»ä½¿ç”¨ã€‚çœ‹å®Œä»¥åï¼Œå…¶å®å¯¹ä¾èµ–æ³¨å…¥ä¹Ÿå°±æœ‰äº†ç†è§£ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> HardDisk <span class="variable">$hardDisk</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">HardDisk <span class="variable">$disk</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;hardDisk = <span class="variable">$disk</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;hardDisk-&gt;run();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ä¸€å°æ²¡æœ‰æ„Ÿæƒ…çš„ç”µè„‘å¼€å§‹è¿è¡Œ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">HardDisk</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ä¸€å—æ²¡æœ‰æ„Ÿæƒ…çš„ç¡¬ç›˜å¼€å§‹è¿è¡Œ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$disk</span> = <span class="keyword">new</span> HardDisk();</span><br><span class="line"><span class="variable">$computer</span> = <span class="keyword">new</span> Computer(<span class="variable">$disk</span>);</span><br><span class="line"><span class="variable">$computer</span>-&gt;run();</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç å°±æ˜¯ä¸€ä¸ªç®€å•çš„ä¾èµ–æ³¨å…¥ï¼Œä½ ä»¥ä¸ºè¿™å°±ç»“æŸäº†ï¼Ÿå¹¶æ²¡æœ‰ï¼Œå’±ä»¬åœ¨å­¦ä¸€ä¸‹ IOC å®¹å™¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">array</span> <span class="variable">$bindings</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params"><span class="variable">$key</span>, <span class="built_in">Closure</span> <span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;bindings[<span class="variable">$key</span>] = <span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$new</span> = <span class="keyword">$this</span>-&gt;bindings[<span class="variable">$key</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$new</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$container</span> = <span class="keyword">new</span> Container();</span><br><span class="line"></span><br><span class="line"><span class="variable">$container</span>-&gt;bind(<span class="string">&#x27;disk&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> HardDisk();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$container</span>-&gt;bind(<span class="string">&#x27;computer&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) <span class="title">use</span>(<span class="params"><span class="variable">$container</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Computer(<span class="variable">$container</span>-&gt;make(<span class="string">&#x27;disk&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable">$computer</span> = <span class="variable">$container</span>-&gt;make(<span class="string">&#x27;computer&#x27;</span>);</span><br><span class="line"><span class="variable">$computer</span>-&gt;run();</span><br></pre></td></tr></table></figure><p>okï¼Œä»¥ä¸Šå°±æ˜¯ä¾èµ–æ³¨å…¥çš„å…¨éƒ¨ä»£ç äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - æ³¨å†Œæ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-registry/"/>
      <url>/2021/03/21/design-pattern-registry/</url>
      
        <content type="html"><![CDATA[<p>æ³¨å†Œæ¨¡å¼é€šå¸¸å°†å¯¹è±¡æ³¨å†Œåˆ°ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡æ ‘ä¸Šï¼Œéœ€è¦çš„æ—¶å€™ä»å¯¹è±¡æ ‘ä¸Šå–ä¸‹éœ€è¦çš„å®ä¾‹ï¼Œå°±åƒå–ç³–è‘«èŠ¦çš„æœ‰æœ¨æœ‰ã€‚ä¸è¿‡ä¸ä¸€æ ·çš„æ˜¯ç³–è‘«èŠ¦ä¼šæ‘˜å®Œï¼Œå¯¹è±¡æ ‘æ‘˜ä¸‹åå¹¶ä¸ä¼šé”€æ¯è¯¥å¯¹è±¡ã€‚</p><p>æ³¨å†Œæ¨¡å¼é€šå¸¸é€šè¿‡ä¸€ä¸ªåªæœ‰é™æ€æ–¹æ³•çš„æŠ½è±¡ç±»æ¥å­˜æ”¾è¿™äº›å¯¹è±¡ã€‚æˆ–è€…é€šè¿‡å•ä¾‹æ¨¡å¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">registry</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> LOGGER = <span class="string">&#x27;logger&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">array</span> <span class="variable">$objects</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$objects</span>[<span class="variable">$key</span>] = <span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$objects</span>[<span class="variable">$key</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$key</span> = Registry::LOGGER;</span><br><span class="line"><span class="variable">$logger</span> = <span class="keyword">new</span> <span class="built_in">stdClass</span>();</span><br><span class="line"></span><br><span class="line">Registry::set(<span class="variable">$key</span>, <span class="variable">$logger</span>);</span><br><span class="line"><span class="variable">$storedLogger</span> = Registry::get(<span class="variable">$key</span>);</span><br><span class="line">var_dump(<span class="variable">$storedLogger</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - äº«å…ƒæ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-flyweight/"/>
      <url>/2021/03/21/design-pattern-flyweight/</url>
      
        <content type="html"><![CDATA[<p>äº«å…ƒæ¨¡å¼ä¼šå°½é‡ä½¿ç›¸ä¼¼çš„å¯¹è±¡å…±äº«å†…å­˜ï¼Œèƒ½è®©ä½ åœ¨æœ‰é™çš„å†…å­˜ä¸­è½½å…¥æ›´å¤šå¯¹è±¡ã€‚</p><p>å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºéœ€è¦åˆ›å»ºå¤§é‡å¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶éƒ½å¯å˜ä¸ºå¤–éƒ¨çŠ¶æ€æ—¶ï¼Œå°±å¾ˆé€‚åˆäº«å…ƒæ¨¡å¼ã€‚</p><p>ä¸€å¦‚æ—¢å¾€çš„ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Message</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">User <span class="variable">$user</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AliMessage</span> <span class="keyword">implements</span> <span class="title">Message</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†…éƒ¨çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">protected</span> Template <span class="variable">$template</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Template <span class="variable">$template</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;template = <span class="variable">$template</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// user å±äºå¤–éƒ¨çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">User <span class="variable">$user</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;use &#x27;</span>, <span class="keyword">$this</span>-&gt;template-&gt;getTemplate(), <span class="string">&#x27; send msg &#x27;</span>, <span class="string">&#x27;to user &#x27;</span>, <span class="variable">$user</span>-&gt;getName(), <span class="string">&#x27; by ali&#x27;</span>, PHP_EOL;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageFactory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">array</span> <span class="variable">$messages</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getMessage</span>(<span class="params">Template <span class="variable">$template</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$key</span> = md5(<span class="variable">$template</span>-&gt;getTemplate());</span><br><span class="line">        <span class="keyword">if</span> (!array_key_exists(<span class="variable">$key</span>, <span class="keyword">$this</span>-&gt;messages)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;message create&#x27;</span>, PHP_EOL;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;messages[<span class="variable">$key</span>] = <span class="keyword">new</span> AliMessage(<span class="variable">$template</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;messages[<span class="variable">$key</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$template</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTemplate</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$template</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;template = <span class="variable">$template</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTemplate</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$templateA</span> = <span class="keyword">new</span> Template();</span><br><span class="line"><span class="variable">$templateA</span>-&gt;setTemplate(<span class="string">&#x27;template a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$templateB</span> = <span class="keyword">new</span> Template();</span><br><span class="line"><span class="variable">$templateB</span>-&gt;setTemplate(<span class="string">&#x27;template b&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$userA</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$userA</span>-&gt;setName(<span class="string">&#x27;wu&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$userB</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$userB</span>-&gt;setName(<span class="string">&#x27;yf&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$factory</span> = <span class="keyword">new</span> MessageFactory();</span><br><span class="line"><span class="variable">$flyweightA</span> = <span class="variable">$factory</span>-&gt;getMessage(<span class="variable">$templateA</span>);</span><br><span class="line"><span class="variable">$flyweightA</span>-&gt;send(<span class="variable">$userA</span>);</span><br><span class="line"><span class="variable">$flyweightA</span>-&gt;send(<span class="variable">$userB</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$flyweightB</span> = <span class="variable">$factory</span>-&gt;getMessage(<span class="variable">$templateB</span>);</span><br><span class="line"><span class="variable">$flyweightB</span>-&gt;send(<span class="variable">$userA</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ¬¡æ¥ç‚¹ä¸ä¸€æ ·çš„ï¼Œè´´å¼ æˆªå›¾å¸®åŠ©ç†è§£ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/flyweight.png" alt="flyweight"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨äº«å…ƒå·¥å‚ä¸­ï¼Œä¸€å…±åˆ›å»ºäº†ä¸¤æ¬¡ messageï¼Œå½“æˆ‘ä»¬é‡å¤ç”¨ä¸€ä¸ªæ¨¡æ¿å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¨¡æ¿ä½œä¸ºå†…éƒ¨çŠ¶æ€å·²ç»è¢«ç¼“å­˜äº†ï¼Œè°ƒç”¨çš„æ—¶å€™ç›´æ¥å–å‡ºå³å¯ï¼Œé¿å…äº†é‡å¤åˆ›å»ºé€ æˆçš„èµ„æºæµªè´¹ã€‚</p><p>ä¾‹å­è™½ç„¶ä¸å¤ªè´´åˆ‡ï¼Œä½†æ˜¯çœ‹å®Œåº”è¯¥ä¹Ÿèƒ½æ€»ç»“å‡ºï¼Œäº«å…ƒæ¨¡å¼éœ€è¦ä¾èµ–äºä¸€ä¸ªäº«å…ƒå·¥å‚ä»¥åŠä¸€ä¸ªäº«å…ƒè§’è‰²ï¼Œä¹Ÿå°±æ˜¯å’±ä»¬ä»£ç ä¸­çš„ AliMessage ç±»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-composite/"/>
      <url>/2021/03/21/design-pattern-composite/</url>
      
        <content type="html"><![CDATA[<p>å°†å¯¹è±¡ç»„åˆæˆ<code>æ ‘çŠ¶</code>å±‚æ¬¡ç»“æ„ä»¥è¡¨ç¤º<code>éƒ¨åˆ†-æ•´ä½“</code>çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p><p>ä¸¤ä¸ªå…³é”®è¯ï¼Œæ ‘çŠ¶ï¼Œéƒ¨åˆ†-æ•´ä½“ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Component</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span> <span class="keyword">implements</span> <span class="title">Component</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">array</span> <span class="variable">$composites</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">Component <span class="variable">$component</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;composites[] = <span class="variable">$component</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">Component <span class="variable">$component</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$position</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;composites <span class="keyword">as</span> <span class="variable">$composite</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$composite</span> === <span class="variable">$component</span>) &#123;</span><br><span class="line">                array_splice(<span class="keyword">$this</span>-&gt;composites, <span class="variable">$position</span>, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$position</span>++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getChildren</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$key</span></span>): <span class="title">Component</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;composites[<span class="variable">$key</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;composites <span class="keyword">as</span> <span class="variable">$composite</span>) &#123;</span><br><span class="line">            <span class="variable">$composite</span>-&gt;render();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LeafA</span> <span class="keyword">implements</span> <span class="title">Component</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;leaf a render&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LeafB</span> <span class="keyword">implements</span> <span class="title">Component</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;leaf b render&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$leafA</span> = <span class="keyword">new</span> LeafA();</span><br><span class="line"><span class="variable">$leafB</span> = <span class="keyword">new</span> LeafB();</span><br><span class="line"><span class="variable">$composite</span> = <span class="keyword">new</span> Composite();</span><br><span class="line"><span class="variable">$composite</span>-&gt;add(<span class="variable">$leafA</span>);</span><br><span class="line"><span class="variable">$composite</span>-&gt;add(<span class="variable">$leafB</span>);</span><br><span class="line"><span class="variable">$composite</span>-&gt;render();</span><br><span class="line"></span><br><span class="line"><span class="variable">$composite</span>-&gt;remove(<span class="variable">$leafA</span>);</span><br><span class="line"><span class="variable">$composite</span>-&gt;render();</span><br><span class="line"></span><br><span class="line"><span class="variable">$composite</span>-&gt;getChildren(<span class="number">0</span>)-&gt;render();</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒé€‚ç”¨äºæ ‘å½¢èœå•ã€æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç®¡ç†ç­‰ï¼Œæ„Ÿè§‰åœºæ™¯å¾ˆæœ‰é™å•Šâ€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ä»£ç†æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-proxy/"/>
      <url>/2021/03/21/design-pattern-proxy/</url>
      
        <content type="html"><![CDATA[<p>è¯´åˆ°ä»£ç†è¿™ä¸ªè¯ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¢¯å­ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬è§£å†³äº†ç½‘ç»œé—®é¢˜ï¼Œä½†æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒï¼Œå› ä¸ºè¿™å¯¹å¤§å¤šæ•°äººæ¥è¯´å±äºç›¸å¯¹ç”Ÿç–çš„ä¸“ä¸šé¢†åŸŸã€‚é‚£ä¹ˆä»£ç†æ¨¡å¼ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¹¶å…è®¸åœ¨å°†è¯·æ±‚æäº¤ç»™å¯¹è±¡å‰åè¿›è¡Œä¸€äº›å¤„ç†ã€‚</p><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ¥ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">RequestInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRequest</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span> <span class="keyword">implements</span> <span class="title">RequestInterface</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRequest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;get request&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">RequestInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Request <span class="variable">$request</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;request = <span class="keyword">new</span> Request();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRequest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;add log in proxy&#x27;</span>, PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;request-&gt;getRequest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$proxy</span> = <span class="keyword">new</span> Proxy();</span><br><span class="line"><span class="variable">$proxy</span>-&gt;getRequest();</span><br></pre></td></tr></table></figure><p>ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼š</p><ol><li>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸ºäº†æ”¹å˜å’Œé€‚é…ä»£ç†ç±»çš„æ¥å£</li><li>ä»£ç†æ¨¡å¼ä¸æ”¹å˜æ‰€ä»£ç†ç±»æ¥å£ã€‚</li></ol><p>ä»£ç†æ¨¡å¼å’Œè£…é¥°æ¨¡å¼çš„åŒºåˆ«ï¼š</p><ol><li>è£…é¥°æ¨¡å¼æ˜¯ä¸ºäº†å¢å¼ºåŠŸèƒ½</li><li>ä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†åŠ ä»¥æ§åˆ¶</li></ol>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - æ¡¥æ¥æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-bridge/"/>
      <url>/2021/03/21/design-pattern-bridge/</url>
      
        <content type="html"><![CDATA[<p>æ¡¥æ¥æ¨¡å¼ä¹Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„å•ä¸€èŒè´£æ¨¡å¼ã€‚</p><p>åœ¨ç»„ä»¶è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¦‚æœèŒè´£åˆ’åˆ†ä¸å¤Ÿæ¸…æ™°ï¼Œå½“çˆ¶ç±»å‘ç”Ÿå˜æ›´ï¼Œå­ç±»ä¹Ÿéœ€è¦è·Ÿç€å˜åŠ¨ï¼Œè¦ä¹ˆè¿èƒŒå¼€é—­åŸåˆ™ï¼Œè¦ä¹ˆå¯¼è‡´å­ç±»æ•°é‡è†¨èƒ€ã€‚æ¡¥æ¥æ¨¡å¼ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¡¥æ¥æ¨¡å¼çš„åšæ³•æ˜¯ï¼Œä½¿æŠ½è±¡å’Œå®ç°å®Œå…¨åˆ†ç¦»ï¼Œä½¿å…¶èƒ½å¤Ÿç‹¬ç«‹å˜åŒ–ã€‚æˆ–è€…ä¹Ÿå¯ä»¥ç›´ç™½ä¸€ç‚¹ï¼Œé€šè¿‡ç»„åˆ/èšåˆçš„æ–¹å¼é¿å…ç»§æ‰¿æ»¥ç”¨ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Color <span class="variable">$color</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setColor</span>(<span class="params">Color <span class="variable">$color</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;color = <span class="variable">$color</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;color-&gt;setColor();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;circle&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Color</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setColor</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Blue</span> <span class="keyword">implements</span> <span class="title">Color</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setColor</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;blue&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$shape</span> = <span class="keyword">new</span> Circle();</span><br><span class="line"><span class="variable">$shape</span>-&gt;setColor(<span class="keyword">new</span> Blue());</span><br><span class="line"><span class="variable">$shape</span>-&gt;draw();</span><br></pre></td></tr></table></figure><p>æŠ½è±¡éƒ¨åˆ†ä½¿ç”¨ç»§æ‰¿ï¼Œå®ç°éƒ¨åˆ†ä½¿ç”¨ç»„åˆã€‚</p><p>åç»­å¦‚æœæˆ‘ä»¬éœ€è¦æ¢æˆå¦å¤–ä¸€ä¸ªé¢œè‰²ï¼Œåªéœ€è¦ç¨ä½œæ”¹åŠ¨å³å¯å®ç°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Red</span> <span class="keyword">implements</span> <span class="title">Color</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setColor</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;red&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$shape</span> = <span class="keyword">new</span> Circle();</span><br><span class="line"><span class="variable">$shape</span>-&gt;setColor(<span class="keyword">new</span> Red());</span><br><span class="line"><span class="variable">$shape</span>-&gt;draw();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è£…é¥°å™¨æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-decorator/"/>
      <url>/2021/03/21/design-pattern-decorator/</url>
      
        <content type="html"><![CDATA[<p>è£…é¥°å™¨æ¨¡å¼ä¸»è¦ç”¨äºåŠ¨æ€æ·»åŠ ä¿®æ”¹ç±»çš„åŠŸèƒ½ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»æä¾›äº†æŸäº›åŠŸèƒ½ï¼Œå¦‚æœè¦æ‰©å±•æˆ–ä¿®æ”¹è¯¥ç±»ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•ä¸€ä¸ªå­ç±»å‡ºæ¥ã€‚ä½†æ˜¯è£…é¥°å™¨æ¨¡å¼å¯ä»¥ä½¿æˆ‘ä»¬æ›´ä¸ºçµæ´»çš„å®ç°ã€‚</p><p>é‚£ä¹ˆï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸å¯¹ç»§æ‰¿çµæ´»åœ¨å“ªå„¿å‘¢ï¼Ÿ</p><p>ä¸¾ä¸ªğŸŒ°ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‘é€çŸ­ä¿¡çš„ç±»ï¼Œç°åœ¨è¦åœ¨å‘é€çŸ­ä¿¡å‰å¢åŠ ä¸€äº›æ ¡éªŒï¼Œå‘é€çŸ­ä¿¡åæˆ‘ä»¬è¦è®°å½• logï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SendSms</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Send</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Decorator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">beforeSend</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">afterSend</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmsDecorator</span> <span class="keyword">implements</span> <span class="title">Decorator</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">beforeSend</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;check&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">afterSend</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;log&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthSms</span> <span class="keyword">implements</span> <span class="title">SendSms</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$decorators</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">addDecorator</span>(<span class="params">Decorator <span class="variable">$decorator</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        array_push(<span class="keyword">$this</span>-&gt;decorators, <span class="variable">$decorator</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">beforeSend</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@var</span> Decorator $decorator</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;decorators <span class="keyword">as</span> <span class="variable">$decorator</span>) &#123;</span><br><span class="line">            <span class="variable">$decorator</span>-&gt;beforeSend();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">afterSend</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$decorators</span> = array_reverse(<span class="keyword">$this</span>-&gt;decorators);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@var</span> Decorator $decorator</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$decorators</span> <span class="keyword">as</span> <span class="variable">$decorator</span>) &#123;</span><br><span class="line">            <span class="variable">$decorator</span>-&gt;afterSend();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Send</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;beforeSend();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;auth sms is send&#x27;</span>, PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;afterSend();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$sms</span> = <span class="keyword">new</span> AuthSms();</span><br><span class="line"><span class="variable">$sms</span>-&gt;addDecorator(<span class="keyword">new</span> SmsDecorator());</span><br><span class="line"><span class="variable">$sms</span>-&gt;send();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - é€‚é…å™¨ä¾‹æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-adapter/"/>
      <url>/2021/03/21/design-pattern-adapter/</url>
      
        <content type="html"><![CDATA[<p>é€‚é…å™¨æ¨¡å¼ä¸»è¦ç”¨äºå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿå°±æ˜¯å¤„ç†æ¥å£çš„å…¼å®¹é—®é¢˜ã€‚</p><p>æ¯”å¦‚è¯´æ•°æ®åº“æ“ä½œï¼Œæœ‰ mysqlï¼Œsqlliteï¼Œmongodb ç­‰ï¼Œç¼“å­˜æ“ä½œæœ‰ redisï¼Œmemcacheï¼Œfile ç­‰ï¼Œéƒ½å¯ä»¥é€šè¿‡é€‚é…å™¨æ¨¡å¼å°†å…¶ç»Ÿä¸€æˆä¸€è‡´ã€‚</p><p>æŸ¥é˜…èµ„æ–™çš„è¿‡ç¨‹ä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ªå¾ˆç”ŸåŠ¨çš„ä¾‹å­ï¼š<a href="https://www.cnblogs.com/DeanChopper/p/4770572.html">ğŸŒ°</a></p><p>æŸå…¬å¸ç”Ÿäº§ä¸€æ‰¹åŠ¨ç‰©å½¢ç©å…·ï¼Œå¯ä»¥å¼ å˜´é—­å˜´ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Toy</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">openMouse</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">closeMouse</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Toy</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">openMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;dog open mouse&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">closeMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;dog close mouse&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$dog</span> = <span class="keyword">new</span> Dog();</span><br><span class="line"><span class="variable">$dog</span>-&gt;openMouse();</span><br></pre></td></tr></table></figure><p>æŸä¸€å¤©ï¼Œè¯¥å…¬å¸å†³å®šä¸å¦å¤–ä¸€å®¶å…¬å¸åˆä½œï¼Œå› ä¸ºè¯¥å…¬å¸çš„ç©å…·å¯ä»¥é¥æ§æ§åˆ¶å¼ å˜´é—­å˜´ï¼Œä½†æ˜¯åˆä½œå…¬å¸ç”¨çš„æ˜¯ doOpenMouse å’Œ doCloseMouse ä¸¤ä¸ªæ–¹æ³•æ¥æ§åˆ¶ç©å…·ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¼€å‘äººå‘˜æ€ä¹ˆåŠå‘¢ï¼Œç›´æ¥åœ¨æ¥å£æ·»åŠ ä¸¤ä¸ªæ–°æ–¹æ³•ï¼Ÿé‚£å²‚ä¸æ˜¯è¿èƒŒäº†å¼€é—­åŸåˆ™ï¼Œè€Œä¸”ä¸¤ç»„æ–¹æ³•çš„åŠŸèƒ½é«˜åº¦é‡åˆï¼Œä»¥åå²‚ä¸æ˜¯å¾ˆéš¾ç»´æŠ¤ã€‚</p><p>æ‰€ä»¥ï¼Œé€‚é…å™¨æ¨¡å¼å°±å¯ä»¥å¤§å±•èº«æ‰‹äº†ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">RemoteControlToy</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doOpenMouse</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doCloseMouse</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RemoteControlDog</span> <span class="keyword">implements</span> <span class="title">RemoteControlToy</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doOpenMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;remote control dog open mouse&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doCloseMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;remote control dog close mouse&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RemoteControllerToyAdapter</span> <span class="keyword">implements</span> <span class="title">Toy</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> RemoteControlToy <span class="variable">$adapter</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">RemoteControlToy <span class="variable">$target</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;adapter = <span class="variable">$target</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">openMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">$this</span>-&gt;adapter-&gt;doOpenMouse();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">closeMouse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;adapter-&gt;doCloseMouse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$adapterDog</span> = <span class="keyword">new</span> RemoteControllerToyAdapter(<span class="keyword">new</span> RemoteControlDog());</span><br><span class="line"><span class="variable">$adapterDog</span>-&gt;openMouse();</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å¹¶å®ç°äº†é¥æ§ç©å…·æ¥å£ï¼Œç„¶åé€šè¿‡é¥æ§ç©å…·é€‚é…å™¨è¿›è¡Œæ¥å£è½¬æ¢ï¼Œå®Œæˆäº†æ¥å£ç»Ÿä¸€ã€‚</p><p>é‚£ä¹ˆåƒå‚è€ƒä¾‹å­ä¸­æåˆ°çš„ï¼Œå¦‚æœè¿™æ—¶å€™å†æ¥ä¸€ä¸ªé€šè¿‡ä¼ å…¥å‚æ•°æ§åˆ¶ç©å…·å¼ å˜´çš„å…¬å¸ï¼Œåªéœ€è¦å†æ·»åŠ ä¸€ä¸ªé€‚é…å™¨å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - ç”Ÿæˆå™¨æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-builder/"/>
      <url>/2021/03/21/design-pattern-builder/</url>
      
        <content type="html"><![CDATA[<p>ç”Ÿæˆå™¨æ¨¡å¼ä¹Ÿå«å»ºé€ è€…æ¨¡å¼ï¼Œä¸»è¦ç”¨äºå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„é€ ä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ã€‚è¯¥æ¨¡å¼å…è®¸ä½ ä½¿ç”¨ç›¸åŒçš„ä»£ç ç”Ÿæˆä¸åŒç±»å‹å’Œå½¢å¼çš„å¯¹è±¡ã€‚</p><p>ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢ï¼Ÿä¸¾ä¸ªğŸŒ°ï¼Œäººç±»ï¼Œéƒ½æœ‰ä¸ªè„‘è¢‹ï¼Œæœ‰ä¸ªèº«ä½“ï¼Œåˆæœ‰ä¸¤æ¡èƒ³è†Šè…¿å„¿ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠäººçœ‹ä½œæ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºç”Ÿæˆå™¨æ¨¡å¼æ¥è¯´ï¼Œæˆ‘ä»¬è¦æŠŠäººç±»å¯¹è±¡çš„åˆ›å»ºä¸å®ƒçš„å®ä¾‹è¡¨ç¤ºè¿›è¡Œåˆ†ç¦»ã€‚</p><pre><code class="php">class Human&#123;    public function setHead(string $head)    &#123;        echo &#39;head:&#39;, $head, PHP_EOL;    &#125;    public function setBody(string $body)    &#123;        echo &#39;body:&#39;, $body, PHP_EOL;    &#125;    public function setArms(string $leftArm, string $rightArm)    &#123;        echo &#39;left arm:&#39;, $leftArm, &#39; right arm:&#39;, $rightArm, PHP_EOL;    &#125;&#125;interface Builder&#123;    public function buildHead();    public function buildBody();    public function buildArms();    public function getResult(): Human;&#125;class HumanBuilder implements Builder&#123;    private Human $human;    public function __construct()    &#123;        $this-&gt;human = new Human();    &#125;    public function buildHead()    &#123;        $this-&gt;human-&gt;setHead(&#39;ai&#39;);    &#125;    public function buildBody()    &#123;        $this-&gt;human-&gt;setBody(&#39;body&#39;);    &#125;    public function buildArms()    &#123;        $this-&gt;human-&gt;setArms(&#39;left&#39;, &#39;right&#39;);    &#125;    public function getResult(): Human    &#123;        return $this-&gt;human;    &#125;&#125;class Director&#123;    public function builder(Builder $builder): Human    &#123;        $builder-&gt;buildHead();        $builder-&gt;buildBody();        $builder-&gt;buildArms();        return $builder-&gt;getResult();    &#125;&#125;$director = new Director();$human = $director-&gt;builder(new HumanBuilder());</code></pre><p>å¥½äº†ï¼Œç”Ÿæˆå™¨æ¨¡å¼åˆ°æ­¤ç»“æŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - åŸå‹æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-prototype/"/>
      <url>/2021/03/21/design-pattern-prototype/</url>
      
        <content type="html"><![CDATA[<p>åŸå‹æ¨¡å¼é€šå¸¸ç”¨äºå¤§å¯¹è±¡çš„åˆ›å»ºã€‚å› ä¸ºæ¯æ¬¡ new ä¸€ä¸ªå¯¹è±¡ä¼šé€ æˆå¾ˆå¤§å¼€é”€ï¼ŒåŸå‹æ¨¡å¼ä»…éœ€å†…å­˜æ‹·è´å³å¯ã€‚</p><p>æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä¸ŠğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Book</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$title</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">eBook</span> <span class="keyword">implements</span> <span class="title">Book</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">string</span> <span class="variable">$title</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$title</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;title = <span class="variable">$title</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$book1</span> = <span class="keyword">new</span> eBook();</span><br><span class="line"><span class="variable">$book1</span>-&gt;setTitle(<span class="string">&#x27;1 å·ç”µå­ä¹¦&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$book1</span>-&gt;getTitle(), PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="variable">$book2</span> = <span class="keyword">new</span> eBook();</span><br><span class="line"><span class="variable">$book2</span>-&gt;setTitle(<span class="string">&#x27;2 å·ç”µå­ä¹¦&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$book2</span>-&gt;getTitle(), PHP_EOL;</span><br></pre></td></tr></table></figure><p>å¸¸è§„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç”¨ new åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼Œç„¶ååˆ†åˆ«è®¾ç½®å„è‡ªçš„ä¹¦åã€‚ç°åœ¨ç”¨åŸå‹æ¨¡å¼æ”¹é€ ä¸€ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$prototype</span> = <span class="keyword">new</span> eBook();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(range(<span class="number">1</span>, <span class="number">10</span>) <span class="keyword">as</span> <span class="variable">$index</span>)&#123;</span><br><span class="line">    <span class="variable">$book</span> = <span class="keyword">clone</span> <span class="variable">$prototype</span>;</span><br><span class="line">    <span class="variable">$book</span>-&gt;setTitle(<span class="variable">$index</span>. <span class="string">&#x27; å·ç”µå­ä¹¦&#x27;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$book</span>-&gt;getTitle(), PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»ä¿æŒä¸å˜ï¼Œåªåœ¨åˆ›å»ºæ—¶è¯¥ç”¨ clone å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - å•ä¾‹æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-singleton/"/>
      <url>/2021/03/21/design-pattern-singleton/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºä¸€äº›å…¨å±€ä½¿ç”¨çš„ç±»ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨åº”ç”¨ä¸­åªå®ä¾‹åŒ–ä¸€ä¸ªï¼Œé¿å…å› é‡å¤åˆ›å»ºå’Œé”€æ¯é€ æˆèµ„æºæµªè´¹ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ã€redis è¿æ¥ç­‰æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å•ä¾‹æ¨¡å¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DB</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> DB $db</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$db</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>): <span class="title">DB</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(<span class="built_in">static</span>::<span class="variable">$db</span> <span class="keyword">instanceof</span> <span class="built_in">self</span>)) &#123;</span><br><span class="line">            <span class="built_in">static</span>::<span class="variable">$db</span> = <span class="keyword">new</span> <span class="built_in">static</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$db</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜²æ­¢ä»å¤–éƒ¨å®ä¾‹åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜²æ­¢å®ä¾‹è¢«å…‹éš†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜²æ­¢å®ä¾‹è¢«ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;connected&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$db</span> = DB::getInstance();</span><br><span class="line"><span class="variable">$db</span>-&gt;connect();</span><br></pre></td></tr></table></figure><p>å•ä¾‹æ¨¡å¼æ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ç§æ¨¡å¼ï¼Œä½†æ˜¯ä¸€å®šç¨‹åº¦ä¸Šè¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œæ‰€ä»¥ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå³ç»å¸¸å‡ºç°ï¼Œä½†å­˜åœ¨ä¸€å®šé—®é¢˜çš„æ¨¡å¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - å·¥å‚æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern-factory/"/>
      <url>/2021/03/21/design-pattern-factory/</url>
      
        <content type="html"><![CDATA[<h4 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h4><p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§ç±»ï¼Œå®ƒå…·æœ‰ä¸ºä½ åˆ›å»ºå¯¹è±¡çš„æŸäº›æ–¹æ³•ï¼Œä½ å¯ä»¥é€šè¿‡å·¥å‚åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸æ˜¯ç›´æ¥ newï¼Œè¿™æ ·å½“ä½ éœ€è¦æ›¿æ¢åˆ›å»ºçš„å¯¹è±¡ç±»å‹æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å·¥å‚å³å¯ã€‚</p><p>æ ¹æ®æŠ½è±¡ç¨‹åº¦ä¸åŒï¼Œå·¥å‚æ¨¡å¼åˆåˆ†ä¸ºç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚ä¸‰ç§ã€‚</p><h5 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="headerlink" title="ç®€å•å·¥å‚"></a>ç®€å•å·¥å‚</h5><p>ç®€å•å·¥å‚ä¸é™æ€å·¥å‚çš„å”¯ä¸€åŒºåˆ«æ˜¯æœ‰æ²¡æœ‰ä½¿ç”¨é™æ€æ–¹æ³•ç”Ÿæˆå®ä¾‹ï¼Œå› æ­¤è¿™é‡Œä¸å†å°†å…¶åˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMWCar</span> <span class="keyword">implements</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;æ¥ä¸€è¾†åˆ«æ‘¸æˆ‘&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VolvoCar</span> <span class="keyword">implements</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;æ¥ä¸€è¾†æ²ƒå°”æ²ƒ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">createBMW</span>(<span class="params"></span>): <span class="title">BMWCar</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> BMWCar();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">createVolvo</span>(<span class="params"></span>): <span class="title">VolvoCar</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> VolvoCar();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bmw</span> = Factory::createBMW();</span><br><span class="line"><span class="variable">$bmw</span>-&gt;makeCar();</span><br><span class="line"></span><br><span class="line"><span class="variable">$volvo</span> = Factory::createVolvo();</span><br><span class="line"><span class="variable">$volvo</span>-&gt;makeCar();</span><br></pre></td></tr></table></figure><p>å®ç°æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è¦æ–°å¢ä¸€ç§è½¦ğŸš—æ—¶ï¼Œå°±å¿…é¡»ä¿®æ”¹å·¥å‚ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿åäº†å¼€é—­åŸåˆ™ã€‚æ‰€ä»¥ä¸¥æ ¼æ„ä¹‰ä¸Šç®€å•å·¥å‚ä¸å±äº 23 ç§è®¾è®¡æ¨¡å¼ã€‚</p><h5 id="å·¥å‚æ–¹æ³•"><a href="#å·¥å‚æ–¹æ³•" class="headerlink" title="å·¥å‚æ–¹æ³•"></a>å·¥å‚æ–¹æ³•</h5><p>å·¥å‚æ–¹æ³•æ˜¯é’ˆå¯¹æ¯ä¸€ç§äº§å“æä¾›ä¸€ä¸ªå·¥å‚ç±»ï¼Œé€šè¿‡ä¸åŒçš„å·¥å‚å®ä¾‹æ¥åˆ›å»ºä¸åŒçš„äº§å“å®ä¾‹ã€‚è§£å†³äº†ç®€å•å·¥å‚æ–°å¢å…·ä½“å®ç°éœ€è¦ä¿®æ”¹å·¥å‚çš„é—®é¢˜ï¼Œæ”¯æŒå¢åŠ ä»»æ„åŒä¸€ç§æŠ½è±¡äº§å“ï¼Œä¸ä¿®æ”¹åŸæœ‰å·¥å‚ã€‚</p><p>é‚£ä¹ˆï¼ŒæŠŠåˆšæ‰çš„ç®€å•å·¥å‚æ”¹é€ ä¸€ä¸‹å§ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMWCar</span> <span class="keyword">implements</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;æ¥ä¸€è¾†åˆ«æ‘¸æˆ‘&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VolvoCar</span> <span class="keyword">implements</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;æ¥ä¸€è¾†æ²ƒå°”æ²ƒ&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>): <span class="title">Car</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMwFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> BMWCar</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>): <span class="title">Car</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BMWCar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VolvoFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>): <span class="title">Car</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> VolvoCar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bmw</span> = BMwFactory::getInstance();</span><br><span class="line"><span class="variable">$bmw</span>-&gt;makeCar();</span><br><span class="line"></span><br><span class="line"><span class="variable">$volvo</span> = VolvoFactory::getInstance();</span><br><span class="line"><span class="variable">$volvo</span>-&gt;makeCar();</span><br></pre></td></tr></table></figure><p>ä¸åŒçš„å·¥å‚ç”Ÿäº§ä¸åŒçš„äº§å“ï¼Œæ–°å¢äº§å“ç±»å‹æ—¶ï¼Œåªéœ€è¦æ–°å»ºä¸€ä¸ªå·¥å‚å³å¯ï¼Œä¸å†éœ€è¦æ”¹åŠ¨åŸæœ‰å·¥å‚ï¼Œç¬¦åˆäº†å¼€é—­åŸåˆ™ã€‚</p><h5 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h5><p>æŠ½è±¡å·¥å‚ä¸å·¥å‚æ–¹æ³•çš„åŒºåˆ«æ˜¯ï¼ŒæŠ½è±¡å·¥å‚ç”¨äºç”Ÿäº§ä¸€ç³»åˆ—äº§å“ï¼Œå·¥å‚æ–¹æ³•åªç”Ÿäº§ä¸€ä¸ªäº§å“ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å·¥å‚ç±»ã€‚</p><p>å®é©¬ç”Ÿäº§è·‘è½¦ã€è½¿è½¦è¿˜æœ‰ miniï¼Œå®é©¬æ˜¯ä¸€ä¸ªäº§å“æ—ï¼Œè·‘è½¦ã€è½¿è½¦ç­‰æ˜¯äº§å“çš„ç­‰çº§ã€‚é‚£ä¹ˆï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå·¥å‚ï¼Œå¯ä»¥ç”Ÿäº§ç›¸åŒå“ç‰Œçš„ä¸åŒäº§å“ã€‚</p><p>é‚£å°±ä¸å†™ğŸŒ°äº†å§ã€‚æ‡’ã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>ç®€å•å·¥å‚å¢åŠ äº§å“ä¸æ–¹ä¾¿ã€‚<br>å·¥å‚æ–¹æ³•å¢åŠ äº§å“å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„å·¥å‚ç±»ã€‚<br>æŠ½è±¡å·¥å‚å¯ä»¥ç”Ÿäº§å¤šä¸ªäº§å“ï¼Œä½†æ˜¯æ–°å¢äº§å“ä¹Ÿéœ€è¦ä¿®æ”¹å·¥å‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è®¾è®¡æ¨¡å¼åˆ†ç±»</title>
      <link href="/2021/03/21/design-pattern-category/"/>
      <url>/2021/03/21/design-pattern-category/</url>
      
        <content type="html"><![CDATA[<p>ä¸€èˆ¬æ¥è¯´ï¼Œè®¾è®¡æ¨¡å¼åˆ†ä¸‰ä¸ªå¤§ç±»ï¼Œåˆ†åˆ«æ˜¯åˆ›å»ºå‹æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ã€è¡Œä¸ºå‹æ¨¡å¼ã€‚ä½†æ˜¯éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œä¹Ÿæœ‰ä¸€äº›æ–°å‹çš„æ¨¡å¼å‡ºç°ã€‚</p><h4 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h4><p>æä¾›åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ï¼Œå¢åŠ å·²æœ‰ä»£ç çš„çµæ´»æ€§å’Œå¯å¤ç”¨æ€§ã€‚</p><p>ä¼ ç»Ÿçš„åˆ›å»ºå‹å…±æœ‰ 5 ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯å·¥å‚æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€ç”Ÿæˆå™¨ã€åŸå‹å’Œå•ä¾‹æ¨¡å¼ã€‚</p><h4 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h4><p>ä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œå¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆã€‚</p><p>ä¼ ç»Ÿçš„ç»“æ„å‹å…±æœ‰ 7 ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚</p><p>æ–°å‹çš„æœ‰ä¾èµ–æ³¨å…¥æ¨¡å¼ã€æ³¨å†Œæ¨¡å¼å’Œæµæ¥å£æ¨¡å¼ã€‚</p><h4 id="è¡Œä¸ºå‹æ¨¡å¼"><a href="#è¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼"></a>è¡Œä¸ºå‹æ¨¡å¼</h4><p>è´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£å§”æ´¾ã€‚</p><p>è¿™ä¸ªæœ€å¤šï¼Œå…± 11 ç§ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€‚</p><h4 id="å…¶ä»–æ¨¡å¼"><a href="#å…¶ä»–æ¨¡å¼" class="headerlink" title="å…¶ä»–æ¨¡å¼"></a>å…¶ä»–æ¨¡å¼</h4><p>å§”æ‰˜æ¨¡å¼ã€æœåŠ¡å®šä½å™¨æ¨¡å¼ã€èµ„æºåº“æ¨¡å¼ã€å®ä½“å±æ€§å€¼æ¨¡å¼ã€‚</p><p>è™½ç„¶ç°åœ¨è¿˜ä¸çŸ¥é“è¿™äº›æ¨¡å¼éƒ½æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œä¸€ä¸ªä¸€ä¸ªçš„ç ”ç©¶å§ã€‚å¹²å·´å¾—ï¼(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - è®¾è®¡åŸåˆ™</title>
      <link href="/2021/03/21/design-pattern-principles/"/>
      <url>/2021/03/21/design-pattern-principles/</url>
      
        <content type="html"><![CDATA[<p>è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº† <code>æé«˜ä»£ç å¤ç”¨æ€§</code> å’Œ <code>çµæ´»æ€§</code>ï¼Œè®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç  <code>å¯é æ€§</code>ã€‚</p><p>ä¸ºäº†å®ç°ä»£ç çš„ <code>å¯å¤ç”¨æ€§</code> å’Œ <code>çµæ´»æ€§</code>ã€‚<code>è®¾è®¡æ¨¡å¼</code> æå‡ºäº†ä¸€äº›å…³é”®çš„ <code>é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</code>ã€‚</p><h4 id="å•ä¸€èŒè´£"><a href="#å•ä¸€èŒè´£" class="headerlink" title="å•ä¸€èŒè´£"></a>å•ä¸€èŒè´£</h4><p>å…¶æ ¸å¿ƒæ€æƒ³ä¸ºï¼šä¸€ä¸ªç±»ï¼Œæœ€å¥½åªåšä¸€ä»¶äº‹ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºï¼Œä¸€ä¸ªç±»ï¼Œåº”è¯¥æ˜¯ä¸€ç»„ <code>ç›¸å…³æ€§å¾ˆé«˜</code> çš„æ–¹æ³•åŠæ•°æ®çš„å°è£…ã€‚</p><p>å½“ä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¿‡å¤šæ—¶ï¼Œå°±ç›¸å½“äºæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨äº†ä¸€èµ·ï¼Œå½“å…¶ä¸­ä¸€ä¸ªèŒè´£å‘ç”Ÿå˜åŠ¨ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–èŒè´£é€ æˆå½±å“ã€‚</p><p>ç±»çš„èŒè´£åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œæ•°æ®èŒè´£å’Œè¡Œä¸ºèŒè´£ï¼Œæ•°æ®èŒè´£é€šè¿‡ç±»çš„å±æ€§å®ç°ï¼Œè¡Œä¸ºèŒè´£é€šè¿‡å…¶æ–¹æ³•å®ç°ã€‚</p><p>å•ä¸€èŒè´£æ˜¯å®ç°é«˜å†…èšã€ä½è€¦åˆçš„æŒ‡å¯¼æ–¹é’ˆã€‚å®ƒæ˜¯æœ€ç®€å•ä½†åˆæœ€éš¾å®ç°çš„åŸåˆ™ï¼Œéœ€è¦å¼€å‘äººå‘˜å‘ç°ç±»çš„çš„ä¸åŒèŒè´£å¹¶å°†å…¶åˆ†ç¦»ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼šç™»é™†æ¨¡å—æ˜¾ç¤ºç™»å½•é¡µé¢ï¼Œæ ¡éªŒç™»å½•å‚æ•°ï¼Œè¿æ¥æ•°æ®åº“ï¼ŒæŸ¥æ‰¾ç”¨æˆ·ï¼Œè¿”å›ç»“æœã€‚</p><p>åŠŸèƒ½å¤ªè¿‡è€¦åˆï¼Œæ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ã€‚</p><h4 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h4><p>å¼€é—­åŸåˆ™æ˜¯é¢å‘å¯¹è±¡ä¸­æœ€é‡è¦çš„åŸåˆ™ã€‚</p><p>ä¸€ä¸ªè½¯ä»¶åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è®¾è®¡ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œåº”è¯¥ä½¿è¿™ä¸ªæ¨¡å—å¯ä»¥åœ¨ä¸è¢«ä¿®æ”¹çš„å‰æä¸‹è¿›è¡Œæ‰©å±•ã€‚</p><p>ä¸€ä¸ªç±»ä¸€æ—¦å¼€å‘å®Œæˆï¼Œåç»­æ–°å¢çš„åŠŸèƒ½å°±ä¸åº”è¯¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªç±»æ¥å®Œæˆï¼Œè€Œæ˜¯åº”è¯¥é€šè¿‡ç»§æ‰¿å¢åŠ æ–°çš„ç±»ã€‚ä¸ºä»€ä¹ˆè¦å¯¹ä¿®æ”¹å…³é—­å‘¢ï¼Ÿå› ä¸ºä¸€æ—¦ä¿®æ”¹æŸä¸ªç±»ï¼Œå°±å¯èƒ½ç ´åäº†ç³»ç»ŸåŸæœ‰åŠŸèƒ½ï¼Œå°±éœ€è¦é‡æ–°æµ‹è¯•ã€‚</p><p><code>æŠ½è±¡åŒ–</code> æ˜¯å¼€é—­åŸåˆ™çš„å…³é”®ã€‚ä»€ä¹ˆæ˜¯æŠ½è±¡åŒ–ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç±»ä¸­çš„å…¬å…±çš„ã€æœ‰å…±æ€§çš„ä¸œè¥¿æŠ½å–å‡ºæ¥ã€‚æŠ½è±¡çš„æœ€å¤§å¥½å¤„åœ¨äºå®ƒæ˜¯æŠ½è±¡çš„ã€ç¨³å®šçš„ï¼Œä¸å®¹æ˜“å‘ç”Ÿæ”¹å˜çš„ã€‚å®ç°å¼€é—­åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ <code>é¢å‘æ¥å£ç¼–ç¨‹</code>ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°ã€‚</p><p>å¼€é—­åŸåˆ™å¯ä»¥ç”¨ä¸€ä¸ªæ›´åŠ å…·ä½“çš„åŸåˆ™æ¥æè¿°ï¼š<code>å¯å˜æ€§å°è£…</code>ã€‚ä¹Ÿå°±æ˜¯æ‰¾åˆ°ç³»ç»Ÿä¸­çš„å¯å˜å› ç´ å¹¶æŠŠå®ƒå°è£…èµ·æ¥ã€‚</p><p>ä¸Šä¸€ç¯‡ä¸­æåˆ°çš„ç¯æ˜¯ä¸ªç»ä½³çš„ğŸŒ°ã€‚</p><h4 id="é‡Œæ°æ›¿æ¢"><a href="#é‡Œæ°æ›¿æ¢" class="headerlink" title="é‡Œæ°æ›¿æ¢"></a>é‡Œæ°æ›¿æ¢</h4><p>æ‰€æœ‰å¼•ç”¨åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜çš„ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</p><p>è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿé€šä¿—æ¥è®²å°±æ˜¯åœ¨è½¯ä»¶ä¸­å¦‚æœèƒ½å¤Ÿä½¿ç”¨åŸºç±»å¯¹è±¡ï¼Œé‚£ä¹ˆä¸€å®šä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ã€‚æŠŠåŸºç±»éƒ½æ›¿æ¢ä¸ºå®ƒçš„å­ç±»å¯¹è±¡ï¼Œç¨‹åºä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯å’Œå¼‚å¸¸ã€‚åè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚</p><p>é‡Œæ°æ›¿æ¢åº”è¯¥æ˜¯å¼€é—­åŸåˆ™çš„ä¸€ä¸ªæ‰©å±•ï¼Œç”±äºä½¿ç”¨åŸºç±»å¯¹è±¡çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ï¼Œå› æ­¤åœ¨ç¨‹åºä¸­å°½é‡ä»¥åŸºç±»ç±»å‹æ¥å¯¹å¯¹è±¡è¿›è¡Œå®šä¹‰ï¼Œè€Œåœ¨è¿è¡Œæ—¶å†ç”¨å…¶å­ç±»å¯¹è±¡æ›¿æ¢åŸºç±»å¯¹è±¡ã€‚</p><p>å…¶ä¸­æœ‰ä¸€ç‚¹å¾ˆå…³é”®ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™å¼ºè°ƒå­ç±»å°½é‡ä½¿ç”¨åŸºç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯é‡å†™ï¼Œé™¤éå­ç±»æœ‰å…¶ç‰¹æ®Šæ€§ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼Œä¾ç„¶æ˜¯ä¸Šä¸€ç¯‡æåˆ°çš„ç¯ï¼Œä½†æ˜¯åŠ äº†ä¸€ç‚¹æ”¹åŠ¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ç¯å…‰éšæœº&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlueLight</span> <span class="keyword">extends</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;è“è‰²&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedLight</span> <span class="keyword">extends</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">bool</span> <span class="variable">$power</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">hasPower</span>(<span class="params"></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;power;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">$this</span>-&gt;hasPower())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&#x27;æ²¡ç”µäº†ï¼Œäº®ä¸èµ·æ¥&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;çº¢è‰²&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">openLight</span>(<span class="params">Light <span class="variable">$light</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$light</span>-&gt;show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$light</span> = <span class="keyword">new</span> Light();</span><br><span class="line"><span class="variable">$blueLight</span> = <span class="keyword">new</span> BlueLight();</span><br><span class="line"><span class="variable">$redLight</span> = <span class="keyword">new</span> RedLight();</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$light</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$blueLight</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$redLight</span>);</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/uml.png" alt="uml"></p><p>æ ¹æ®é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå­ç±»å¿…é¡»èƒ½å¤Ÿæ›¿ä»£çˆ¶ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶å­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨èƒ½å¤Ÿä½¿ç”¨çˆ¶ç±»çš„åœºæ™¯é‡Œé¢ï¼Œä¹Ÿä¸€å®šè¦èƒ½å¤Ÿä½¿ç”¨å­ç±»ã€‚å¾ˆæ˜¾ç„¶ï¼ŒBlueLight ç±»ç¬¦åˆåŸåˆ™ï¼ŒRedLight ç±»è™½ç„¶ä¹Ÿå®ç°äº†çˆ¶ç±»æ–¹æ³•ï¼Œä½†æ˜¯æŠ›å‡ºäº†çˆ¶ç±»æ²¡æœ‰çš„å¼‚å¸¸ï¼Œæ‰€ä»¥è¿åäº†é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œåœ¨ User ç±»ä¸­ï¼Œæˆ‘ä»¬æ— è®ºæ˜¯ä¼ å…¥ Light åŸºç±»å¯¹è±¡ï¼Œè¿˜æ˜¯ BlueLight ç±»å¯¹è±¡ï¼Œéƒ½æ˜¯æ²¡æœ‰ä»»ä½•é”™è¯¯å’Œå¼‚å¸¸çš„ã€‚</p><p>ç”±ä»¥ä¸Šå®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™æœ¬è´¨æ˜¯å¯¹ç»§æ‰¿çš„çº¦æŸã€‚</p><h4 id="ä¾èµ–å€’ç½®"><a href="#ä¾èµ–å€’ç½®" class="headerlink" title="ä¾èµ–å€’ç½®"></a>ä¾èµ–å€’ç½®</h4><p>ä¾èµ–äºæŠ½è±¡å±‚ï¼Œä¸ä¾èµ–äºå…·ä½“ã€‚å³é«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¬¡æ¨¡å—ã€‚<br>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p><p>è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ç¼–ç¨‹ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºè°ƒç”¨è€…æ˜¯é«˜å±‚æ¨¡å—ï¼Œè¢«è°ƒç”¨è€…æ˜¯åº•å±‚æ¨¡å—ã€‚</p><p>å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ˜¯æŠ½è±¡åŒ–ï¼Œå¦‚æœè¯´å®ç°å¼€é—­åŸåˆ™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç›®æ ‡ï¼Œé‚£ä¹ˆä¾èµ–å€’ç½®å°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸»è¦æ‰‹æ®µã€‚å¸¸ç”¨çš„æ‰‹æ®µä¸ºåœ¨ä»£ç ä¸­ä½¿ç”¨æŠ½è±¡ç±»ï¼Œå°†å…·ä½“å®ç°æ”¾å…¥å…ƒæ•°æ®ã€‚</p><p>å†å¼ºè°ƒä¸€éï¼ŒæŠ½è±¡æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼Œä¸å®¹æ˜“å‘ç”Ÿæ”¹å˜ã€‚</p><p>å†ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;long long ago, é¥è¿œçš„ä¸œæ–¹æœ‰ä¸€ä¸ªç‰¹åˆ«è‹±ä¿Šå¸…æ°”çš„å°ä¼™&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mother</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">narrate</span>(<span class="params">Book <span class="variable">$book</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$book</span>-&gt;getContent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Paper</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ä¸Šå‘¨äº”ï¼Œä¸­å›½é¦–æ¬¡å®ç°ç»æµåè¶…ç¾å›½ç§°ä¸ºä¸–ç•Œç¬¬ä¸€ç»æµä½“&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$mother</span> = <span class="keyword">new</span> Mother();</span><br><span class="line"><span class="variable">$mother</span>-&gt;narrate(<span class="keyword">new</span> Book());</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼Œéº»éº»çœ‹ä¹¦è®²æ•…äº‹ï¼Œå¦‚æœæœ‰ä¸€å¤©ï¼Œä¹¦çœ‹çƒ¦äº†ï¼Œæƒ³çœ‹ä¸ªæŠ¥çº¸ï¼Œä½†æ˜¯éº»éº»åšä¸åˆ°ï¼Œå› ä¸ºè¦è¯»æŠ¥çº¸é¦–å…ˆè¦æŠŠéº»éº»æ”¹æ‰ã€‚è¿™å°±æœ‰ç‚¹è’è°¬ã€‚æ˜¾ç¤ºä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼ŒåŸå› å°±æ˜¯éº»éº»å’Œä¹¦ä¹‹é—´çš„è€¦åˆç¨‹åº¦å¤ªé«˜äº†ï¼Œå¿…é¡»é™ä½ä»–ä»¬ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p><p>æˆ‘ä»¬æ¥åšä¸‹è°ƒæ•´ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> <span class="keyword">implements</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;long long ago, é¥è¿œçš„ä¸œæ–¹æœ‰ä¸€ä¸ªç‰¹åˆ«è‹±ä¿Šå¸…æ°”çš„å°ä¼™&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Paper</span> <span class="keyword">implements</span> <span class="title">Reader</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ä¸Šå‘¨äº”ï¼Œä¸­å›½é¦–æ¬¡å®ç°ç»æµåè¶…ç¾å›½ç§°ä¸ºä¸–ç•Œç¬¬ä¸€ç»æµä½“&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mother</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">narrate</span>(<span class="params">Reader <span class="variable">$reader</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$reader</span>-&gt;getContent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$mother</span> = <span class="keyword">new</span> Mother();</span><br><span class="line"><span class="variable">$mother</span>-&gt;narrate(<span class="keyword">new</span> Book());</span><br><span class="line"><span class="variable">$mother</span>-&gt;narrate(<span class="keyword">new</span> Paper());</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠ½å–å‡ºä¸€ä¸ªæ¥å£ç±» <code>Reader</code>ï¼Œç„¶å Book å’Œ Paper åˆ†åˆ«å»å®ç°å®ƒã€‚ç„¶åå°† Mother è°ƒæ•´ä¸ºä¾èµ–äºæ¥å£ã€‚<br>ç°åœ¨ï¼Œæ— è®ºæ˜¯æƒ³çœ‹ä¹¦è¿˜æ˜¯æƒ³çœ‹æŠ¥çº¸ï¼Œåˆæˆ–è€…æƒ³çœ‹è¿ç¯ç”»ï¼Œæˆ‘ä»¬åªè¦å»å®ç° Reader å³å¯ï¼Œå†ä¹Ÿä¸ç”¨æ”¹åŠ¨ Mother äº†ã€‚</p><p>ä¸Šè¾¹é‡Œæ°æ›¿æ¢ä¸­ç¯çš„ä¾‹å­å…¶å®å·²ç»ç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™ï¼Œä½†æ˜¯çœ‹åˆ°è¿™ä¸ªä¾‹å­æ›´ç”ŸåŠ¨ï¼Œæ›´å®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥å°±èµ˜è¿°äº†ä¸€ä¸‹ã€‚</p><blockquote><p>ä¼ é€’ä¾èµ–å…³ç³»çš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œä¸Šè¾¹çš„ä¾‹å­ä¸­ä½¿ç”¨çš„æ¥å£ä¼ é€’ï¼Œè¿˜æœ‰æ„é€ å‡½æ•°ä¼ é€’å’Œ setter ä¼ é€’ã€‚</p></blockquote><h4 id="æ¥å£éš”ç¦»"><a href="#æ¥å£éš”ç¦»" class="headerlink" title="æ¥å£éš”ç¦»"></a>æ¥å£éš”ç¦»</h4><p>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚</p><p>ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§çš„å•ä¸€çš„æ¥å£ã€‚</p><p>çœ‹ä¸Šå»ä¼¼ä¹å’Œå•ä¸€èŒè´£å¾ˆåƒï¼Œä½†æ˜¯ä¸æ˜¯ï¼Œå•ä¸€èŒè´£é’ˆå¯¹çš„æ˜¯ç±»çš„èŒè´£ï¼Œæ¥å£éš”ç¦»é’ˆå¯¹çš„åˆ™æ˜¯æ¥å£ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">WorkerInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanWorker</span> <span class="keyword">implements</span> <span class="title">WorkerInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like working&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like sleeping&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RobotWorker</span> <span class="keyword">implements</span> <span class="title">WorkerInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like working&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;robot never sleep&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼Œæœ‰ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œæœºå™¨äººä¸éœ€è¦ç¡è§‰ï¼Œä½†æ˜¯å®ƒå´å¿…é¡»å®ç°ç¡è§‰çš„æ–¹æ³•ï¼Œè¿™æ˜¾ç„¶è¿åäº†æ¥å£éš”ç¦»ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å†è°ƒæ•´ä¸€ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">WorkInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SleepInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanWorker</span> <span class="keyword">implements</span> <span class="title">WorkInterface</span>, <span class="title">SleepInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like working&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like sleeping&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RobotWorker</span> <span class="keyword">implements</span> <span class="title">WorkInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;I like working&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒæ•´åï¼Œæ¥å£ä¸€åˆ†ä¸ºäºŒï¼Œå®é™…ä½¿ç”¨æ—¶å„å–æ‰€éœ€ï¼Œä¸å†è¢«è¿«å®ç°è‡ªå·±ä¸éœ€è¦çš„æ¥å£ã€‚</p><h4 id="åˆæˆå¤ç”¨"><a href="#åˆæˆå¤ç”¨" class="headerlink" title="åˆæˆå¤ç”¨"></a>åˆæˆå¤ç”¨</h4><p>é¢å‘å¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼å®ç°ä»£ç å¤ç”¨ï¼Œä¸€æ˜¯ç»§æ‰¿ï¼ŒäºŒè¿˜æ˜¯ç»§æ‰¿ï¼Œå“¦ä¸ï¼Œè€Œæ˜¯ç»„åˆ/èšåˆï¼Œä¹Ÿå¯ä»¥å«åšåˆæˆã€‚<br>åˆæˆå¤ç”¨åŸåˆ™è¦æ±‚åœ¨è½¯ä»¶å¤ç”¨æ—¶ï¼Œé¦–å…ˆè€ƒè™‘ä½¿ç”¨ç»„åˆã€èšåˆç­‰å…³è”æ–¹å¼å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªæ–°å¯¹è±¡é‡Œé€šè¿‡å…³è”æ–¹å¼ä½¿ç”¨å·²æœ‰å¯¹è±¡çš„æ–¹æ³•å’ŒåŠŸèƒ½ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ç»„åˆå‘¢ï¼Œé¦–å…ˆï¼Œç»§æ‰¿åï¼Œçˆ¶ç±»çš„æ–¹æ³•æš´éœ²ç»™äº†å­ç±»ï¼Œè¿™ç­‰äºç ´åäº†ç±»çš„å°è£…æ€§ï¼Œæ‰€ä»¥ç»§æ‰¿å¤ç”¨ä¹Ÿè¢«ç§°ä¸ºç™½ç®±å¤ç”¨ã€‚å…¶æ¬¡ï¼Œçˆ¶ç±»çš„æ–¹æ³•å‘ç”Ÿå˜åŠ¨ä¼šå½±å“åˆ°å­ç±»ï¼Œå±äºè€¦åˆåº¦è¾ƒé«˜çš„ä¸€ç§è¡¨ç°ï¼Œä¸åˆ©äºä»£ç çš„ç»´æŠ¤ã€‚æœ€åï¼Œç»§æ‰¿è‡ªåŸºç±»çš„æ–¹æ³•æ˜¯é™æ€çš„ï¼Œé™åˆ¶äº†å¤ç”¨çš„çµæ´»æ€§ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/extend.jpg" alt="ç»§æ‰¿"></p><p><img src= "/img/loading.gif" data-lazy-src="/images/multiplexing.jpg" alt="ç»„åˆ"></p><p>ä¸Šä¸ªå›¾å§ï¼Œä¾‹å­æŒºæ¸…æ™°çš„ã€‚<a href="http://c.biancheng.net/view/1333.html">å›¾ç‰‡å‡ºå¤„</a></p><p>emmmï¼Œå‰è¾¹åå¤æçš„ç¯çš„ä¾‹å­å°±ä¸å¤ªç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™äº†ã€‚</p><p>æœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±æ”¹é€ ä¸€ä¸‹ã€‚</p><h4 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h4><p>è¿ªç±³ç‰¹æ³•åˆ™åˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå®ƒå¼ºè°ƒæ¯ä¸€ä¸ªç±»åº”å½“å¯¹å…¶å®ƒç±»æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚ä¹Ÿå°±æ˜¯å°½å¯èƒ½å°‘çš„äº§ç”Ÿä¾èµ–ã€‚</p><p>A å’Œ B äº§ç”Ÿäº¤äº’ï¼ŒB å’Œ C äº§ç”Ÿäº¤äº’ï¼ŒA åªå’Œ B äº¤äº’ï¼Œä¸è·Ÿ C ç©ã€‚</p><p>è¿™ä¸ªæ³•åˆ™å°±æ¯”è¾ƒæï¼Œåˆ†äº†ç‹­ä¹‰å’Œå¹¿ä¹‰ï¼Œæ€ä¹ˆæ¥çš„æ²¡ææ¸…æ¥šï¼Œåè¾¹å†è¡¥å……ã€‚</p><p>ç‹­ä¹‰å¼ºè°ƒå¦‚æœä¸¤ä¸ªç±»ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’ä½œç”¨ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»éœ€è¦è°ƒç”¨å¦ä¸€ç±»çš„æŸä¸€ä¸ªæ–¹æ³•çš„è¯ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰è€…è½¬å‘è¿™ä¸ªè°ƒç”¨ã€‚</p><p>å¹¿ä¹‰åˆ™æ˜¯å¯¹å°è£…çš„å¼ºè°ƒï¼Œä¹Ÿå°±æ˜¯å¯¹ä¿¡æ¯éšè—çš„æ§åˆ¶ã€‚æ–¹æ³•å°è£…åœ¨ç±»çš„å†…éƒ¨ï¼Œè°ƒç”¨è€…åªéœ€è¦è°ƒç”¨å¹¶è·å–é¢„æœŸç»“æœï¼Œä¸éœ€è¦å…³æ³¨å…·ä½“å®ç°ã€‚</p><p>ä¸¾ä¸ªåé¢ğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySchool</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">manager</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$myClass</span> = <span class="keyword">new</span> MyClass();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$myClass</span>-&gt;getClasses() <span class="keyword">as</span> <span class="variable">$class</span>) &#123;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$class</span>-&gt;getStudents() <span class="keyword">as</span> <span class="variable">$student</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$student</span>-&gt;getName(), PHP_EOL;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼ŒSchool ç±»å’Œ Class ç±»å‘ç”Ÿäº¤äº’ï¼Œä½†æ˜¯ä¹Ÿå’Œ Student ç±»å‘ç”Ÿäº†äº¤äº’ï¼Œè¿åäº†æœ€å°‘çŸ¥é“åŸåˆ™ã€‚</p><p>å†æ¥ä¸ªä¼˜åŒ–ç‰ˆï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySchool</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">manager</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$myClass</span> = <span class="keyword">new</span> MyClass();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$myClass</span>-&gt;getClasses() <span class="keyword">as</span> <span class="variable">$class</span>) &#123;</span><br><span class="line">            <span class="variable">$class</span>-&gt;manager();</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ Class ç±»ä¸­ manager æ–¹æ³•å»è·å–å­¦ç”Ÿä¿¡æ¯ï¼ŒSchoolä¸ Student ç±»çš„äº¤äº’å°±è¢«æ¸…é™¤äº†ï¼ŒSchool ä¹Ÿä¸çŸ¥é“ Class æ˜¯æ€ä¹ˆè·å– Student ä¿¡æ¯çš„ï¼Œå®ƒåªç®¡è°ƒç”¨ã€‚</p><p>emmmï¼Œè¿˜å¯ä»¥ç»§ç»­é€’è¿›ï¼ŒClass manager åªç®¡ç†è‡ªå·±çš„ä¿¡æ¯ï¼Œ ç„¶åè°ƒç”¨ Student managerã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySchool</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">manager</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$myClass</span> = <span class="keyword">new</span> MyClass();</span><br><span class="line">        <span class="variable">$myClass</span>-&gt;manager();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">getClasses</span>(<span class="params"></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            ...</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">manager</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;getClasses() <span class="keyword">as</span> <span class="variable">$class</span>) &#123;</span><br><span class="line">            <span class="variable">$student</span> = <span class="keyword">new</span> MyStudent();</span><br><span class="line">            <span class="variable">$student</span>-&gt;manager();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStudent</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">getStudents</span>(<span class="params"></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            ...</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">manager</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;getStudents() <span class="keyword">as</span> <span class="variable">$student</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$student</span>-&gt;name, PHP_EOL;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼ - å¯¹è±¡</title>
      <link href="/2021/03/21/design-pattern-object/"/>
      <url>/2021/03/21/design-pattern-object/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ç»å¸¸ä¼šç”¨ç±»æè¿°å¯¹è±¡ï¼Œä¹Ÿç»å¸¸ä¼šç”¨å¯¹è±¡æè¿°ç±»ï¼Œä½†æ˜¯è¿™æœ‰ç¢äºæˆ‘ä»¬å¯¹äºé¢å‘å¯¹è±¡çš„ç†è§£ï¼Œå› ä¸ºç±»å†³å®šäº†å¯¹è±¡ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œç±»ï¼Œæ˜¯ç”¨æ¥ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„ä»£ç æ¨¡æ¿ã€‚</p><p>å¯¹è±¡æ˜¯æ ¹æ®ç±»ä¸­å®šä¹‰çš„æ¨¡æ¿æ‰€æ„å»ºçš„æ•°æ®ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¯´å¯¹è±¡æ˜¯å®ƒçš„ç±»çš„å®ä¾‹ï¼Œå¯¹è±¡çš„ç±»å‹æ˜¯ç”±ç±»å®šä¹‰çš„ã€‚</p><p>ä½ å¯ä»¥ç”¨ <code>class</code> å…³é”®å­—å’Œä»»æ„ç±»åæ¥å£°æ˜ä¸€ä¸ªç±»ï¼Œç±»åå¯ä»¥æ˜¯ä»»æ„æ•°å­—å’Œå­—æ¯çš„ç»„åˆï¼Œä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œç±»ä½“å¿…é¡»å®šä¹‰åœ¨ä¸€å¯¹å¤§æ‹¬å·å†…ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person1</span> = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="variable">$person2</span> = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>é€šè¿‡å…³é”®å­— <code>new</code> å»åˆ›å»º Person ç±»çš„å¯¹è±¡ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªå®ä¾‹ï¼Œå®ƒä»¬æ˜¯ç”±åŒä¸€ä¸ªç±»åˆ›å»ºçš„ã€å…·æœ‰ç›¸åŒç±»å‹çš„ä¸åŒå¯¹è±¡ã€‚</p><p>å¦‚æœå°†ç±»çœ‹ä½œæ˜¯ä¸€ä¸ªç”Ÿäº§ç”¨çš„é“¸æ¨¡ï¼Œé‚£ä¹ˆå¯¹è±¡å°±æ˜¯ç”¨é“¸æ¨¡ç”Ÿäº§å‡ºæ¥çš„å…·ä½“äº§å“ã€‚</p><h4 id="ç±»å±æ€§"><a href="#ç±»å±æ€§" class="headerlink" title="ç±»å±æ€§"></a>ç±»å±æ€§</h4><p>æˆ‘ä»¬å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ç§°ä¸º <code>å±æ€§</code> çš„ç‰¹æ®Šå˜é‡ã€‚å±æ€§ä¹Ÿç§°ä¸º <code>æˆå‘˜å˜é‡</code>ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜å„ä¸ªå¯¹è±¡ä¸­ä¸åŒçš„æ•°æ®ã€‚</p><p>é™¤äº†åœ¨å£°æ˜å®ƒä»¬æ—¶å¿…é¡»æŒ‡å®šå¯è§æ€§å…³é”®å­—ï¼Œæˆå‘˜å˜é‡ä¸æ™®é€šå˜é‡çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ã€‚</p><p>å¯è§æ€§å…³é”®å­—ä¸º <code>private</code>ï¼Œ<code>protected</code> å’Œ <code>public</code>ï¼Œå®ƒä»¬ç¡®å®šç±»æˆå‘˜å˜é‡èƒ½å¤Ÿè¢«è®¿é—®çš„ä½œç”¨åŸŸã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person</span>-&gt;name;</span><br></pre></td></tr></table></figure><h4 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h4><p>ç±»æ–¹æ³•æ˜¯ç±»ä¸­çš„ç‰¹æ®Šå‡½æ•°ï¼Œå®ƒå…è®¸å¯¹è±¡æ‰§è¡Œä»»åŠ¡ã€‚</p><p>æ–¹æ³•å£°æ˜ä¸å‡½æ•°å£°æ˜ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå¿…é¡»åœ¨ç±»ä½“å†…ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç»™å®ƒåŠ ä¸Šé™å®šè¯ï¼ŒåŒ…æ‹¬å¯è§æ€§å…³é”®å­—ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person</span>-&gt;getName();</span><br></pre></td></tr></table></figure><h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><p>ç»§æ‰¿æ˜¯æŒ‡ä»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºä¸€ä¸ªæˆ–å¤šä¸ªç±»çš„æœºåˆ¶ã€‚</p><p>å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿è‡ªå¦å¤–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆå°±è¯´å®ƒæ˜¯å¦å¤–ä¸€ä¸ªç±»çš„å­ç±»ã€‚è¿™ç§å…³ç³»é€šå¸¸ç”¨çˆ¶å­å…³ç³»æ¥å½¢å®¹ã€‚</p><p>å­ç±»æ´¾ç”Ÿè‡ªçˆ¶ç±»å¹¶ç»§æ‰¿æ¥çˆ¶ç±»çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§åŒ…æ‹¬å±æ€§ä¹ŸåŒ…æ‹¬æ–¹æ³•ã€‚</p><p>é€šå¸¸ï¼Œå­ç±»ä¼šåœ¨çˆ¶ç±»æ‰€æä¾›çš„åŠŸèƒ½åŸºç¡€ä¸Šå¢åŠ ä¸€äº›æ–°åŠŸèƒ½ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥è¯´å­ç±»æ‰©å±•äº†çˆ¶ç±»ã€‚</p><p>ç»§æ‰¿é€šå¸¸ç”¨æ¥ <code>è§£å†³ä»£ç é‡å¤</code>ï¼Œåœ¨ä¸€ä¸ªç±»ä¸­æä¾›å…±é€šåŠŸèƒ½ï¼Œåˆèƒ½åœ¨å…¶ä»–ç±»åœ¨å¤„ç†ä¸€äº›æ–¹æ³•è°ƒç”¨æ—¶æœ‰æ‰€ä¸åŒã€‚</p><h4 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h4><p>å°è£…æ˜¯æŒ‡éšè—å¯¹è±¡å†…çš„å±æ€§å’Œå…·ä½“å®ç°ï¼Œä»…å¯¹å¤–æä¾›å…¬å…±è®¿é—®æ–¹å¼ã€‚</p><p>å°è£…é€šè¿‡ <code>å¯è§æ€§å…³é”®å­—</code> æŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸æä¾›æ–¹æ³•ç»™å¤–ç•Œã€‚ä½†å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰æä¾›ç»™å¤–ç•Œè®¿é—®çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¹Ÿå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š</p><ol><li>è‰¯å¥½çš„å°è£…å¯ä»¥å‡å°‘ä»£ç è€¦åˆ</li><li>ç±»å†…éƒ¨çš„ç»“æ„å¯ä»¥è‡ªç”±ä¿®æ”¹</li><li>å¯ä»¥å¯¹æˆå‘˜è¿›è¡Œæ›´ç²¾ç¡®çš„æ§åˆ¶</li><li>éšè—ä¿¡æ¯ï¼Œå®ç°ç»†èŠ‚</li></ol><p>å…·ä½“åœºæ™¯å¦‚ model è·å–æ•°æ®ã€‚</p><p>å°è£…å¯ä»¥ <code>æé«˜çµæ´»æ€§</code>ã€‚ä½¿æˆ‘ä»¬æ›´å®¹æ˜“åœ°ä¿®æ”¹ç±»çš„å†…éƒ¨å®ç°ï¼Œè€Œæ— éœ€ä¿®æ”¹ä½¿ç”¨äº†è¯¥ç±»çš„å®¢æˆ·ä»£ç ï¼Œä»è€Œå®ç°å¯¹æˆå‘˜å˜é‡è¿›è¡Œæ›´ç²¾ç¡®çš„æ§åˆ¶ã€‚</p><h4 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h4><p>å¯ä»¥ç†è§£ä¸ºå¤šç§è¡¨ç°å½¢å¼ï¼Œå³ä¸€ä¸ªå¯¹å¤–æ¥å£ï¼Œå¤šç§å†…éƒ¨å®ç°ã€‚</p><p>åœ¨é¢å‘å¯¹è±¡çš„ç†è®ºä¸­ï¼Œå¤šæ€æ€§çš„ä¸€èˆ¬å®šä¹‰ä¸ºï¼šåŒä¸€ä¸ªæ“ä½œï¼ˆå‡½æ•°ï¼‰ä½œç”¨äºä¸åŒçš„ç±»çš„å®ä¾‹ï¼Œå°†äº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚å³ä¸åŒç±»çš„å¯¹è±¡æ¥æ”¶åˆ°ç›¸åŒçš„æ¶ˆæ¯æ—¶ï¼Œå°†ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"><span class="variable">$type</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span>(<span class="variable">$type</span>)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;çº¢è‰²&#x27;</span>, PHP_EOL; </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;è“è‰²&#x27;</span>, PHP_EOL; </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;ç»¿è‰²&#x27;</span>, PHP_EOL; </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">openLight</span>(<span class="params"><span class="variable">$type</span> = <span class="number">0</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$light</span> = <span class="keyword">new</span> Light();</span><br><span class="line">        <span class="variable">$light</span>-&gt;show(<span class="variable">$type</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$user</span>-&gt;openLight();</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªå­˜åœ¨å¼Šç«¯çš„å®ç°ï¼Œå¦‚æœç¯å…‰é¢œè‰²éå¸¸å¤šï¼ŒåæœŸæ·»åŠ å°±ä¼šéå¸¸éº»çƒ¦ã€‚</p><p>å¤šæ€å®ç°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;ç¯å…‰éšæœº&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlueLight</span> <span class="keyword">extends</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;è“è‰²&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedLight</span> <span class="keyword">extends</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;çº¢è‰²&#x27;</span>, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">openLight</span>(<span class="params">Light <span class="variable">$light</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$light</span>-&gt;show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$light</span> = <span class="keyword">new</span> Light();</span><br><span class="line"><span class="variable">$blueLight</span> = <span class="keyword">new</span> BlueLight();</span><br><span class="line"><span class="variable">$redLight</span> = <span class="keyword">new</span> RedLight();</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$light</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$blueLight</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;openLight(<span class="variable">$redLight</span>);</span><br></pre></td></tr></table></figure><h4 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h4><p>å‰é¢è¯´è¿‡ï¼Œç±»æ˜¯ç”Ÿæˆå¯¹è±¡çš„ä»£ç æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨å‰è¾¹çš„ä¾‹å­ä¸­ï¼Œä¹Ÿéƒ½æ˜¯é€šè¿‡å¯¹è±¡è°ƒç”¨å±æ€§å’Œæ–¹æ³•ã€‚</p><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¿é—®ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å’Œå±æ€§éƒ½æ˜¯é™æ€çš„ï¼Œéœ€è¦ç”¨å…³é”®å­— <code>static</code> å£°æ˜ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">string</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> Person::getName();</span><br></pre></td></tr></table></figure><p>é™æ€æ–¹æ³•æ‹¥æœ‰ç±»ä½œç”¨åŸŸï¼Œå®ƒä»¬æ— æ³•è®¿é—®ç±»çš„æ™®é€šå±æ€§ã€‚å› ä¸ºè¿™äº›å±æ€§æ˜¯å¯¹è±¡çš„ã€‚</p><p>é™æ€å±æ€§å’Œé™æ€æ–¹æ³•æ˜¯åœ¨ç±»ä¸Šè¢«è°ƒç”¨çš„ï¼Œè€Œä¸æ˜¯åœ¨å¯¹è±¡ä¸Šï¼Œå› æ­¤å®ƒä»¬ä¹Ÿè¢«ç§°ä¸º <code>ç±»å±æ€§</code> å’Œ <code>ç±»æ–¹æ³•</code>ã€‚æˆ‘ä»¬ä¹Ÿæ— æ³•åœ¨ç±»ä¸­é€šè¿‡ä¼ªå˜é‡ <code>$this</code> è°ƒç”¨ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡å¯¹åº”çš„ <code>self</code>ã€‚</p><p>é™æ€å±æ€§å’Œé™æ€æ–¹æ³•å¯ä»¥ä½¿æˆ‘ä»¬æ— éœ€å°†ä¸€ä¸ªå¯¹è±¡ä¼ å…¥å¦ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥è®¿é—®è€Œä¸éœ€è¦å®ä¾‹ã€‚è¿™å¯ä»¥ä½¿æˆ‘ä»¬çœå»å®ä¾‹åŒ–å¯¹è±¡çš„éº»çƒ¦ï¼Œä»è€Œä½¿ä»£ç æ›´åŠ æ•´æ´ã€‚</p><h4 id="å¸¸é‡å±æ€§"><a href="#å¸¸é‡å±æ€§" class="headerlink" title="å¸¸é‡å±æ€§"></a>å¸¸é‡å±æ€§</h4><p>æœ‰äº›å±æ€§æ˜¯ä¸åº”å½“è¢«æ”¹å˜çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±åº”è¯¥ç”¨å…³é”®å­— <code>const</code> å»å£°æ˜å¸¸é‡å±æ€§ã€‚</p><p>ä¸æ™®é€šå±æ€§ä¸åŒï¼Œå¸¸é‡ä¸ä»¥ <code>$</code> å¼€å¤´ï¼Œå¹¶ä¸”æ ¹æ®çº¦å®šï¼Œé€šå¸¸ç”¨å¤§å†™å­—æ¯å‘½åã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> LEG_NUMBER = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> Person::LEG_NUMBER;</span><br></pre></td></tr></table></figure><p>å¸¸é‡åªèƒ½æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œæ— æ³•ç”¨æ¥ä¿å­˜å¯¹è±¡ï¼Œå¹¶ä¸”ä¸é™æ€å±æ€§ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç±»æ¥è®¿é—®å¸¸é‡ã€‚</p><h4 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h4><p>æŠ½è±¡ç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºæ‰€æœ‰å­ç±»ï¼ˆç»§æ‰¿è‡ªå®ƒçš„ç±»ï¼‰å®šä¹‰æ¥å£ã€‚</p><p>æŠ½è±¡ç±»ç”¨å…³é”®å­— <code>abstract</code> å£°æ˜ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åƒåœ¨æ™®é€šç±»ä¸­ä¸€æ ·åœ¨æŠ½è±¡ç±»ä¸­åˆ›å»ºæ–¹æ³•å’Œå±æ€§ï¼Œä½†æ˜¯å½“å®ä¾‹åŒ–è¿™ä¸ªç±»æ—¶ï¼Œå°±ä¼šæœ‰æŠ¥é”™å‡ºç°ã€‚å› ä¸ºæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŠ½è±¡ç±»è‡³å°‘æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½¿ç”¨åŒæ ·çš„å…³é”®å­—å£°æ˜ï¼Œä½†ä¸èƒ½æœ‰æ–¹æ³•ä½“ã€‚</p><p>ä»»ä½•ç»§æ‰¿è‡ªæŠ½è±¡ç±»çš„éè™šå­ç±»éƒ½å¿…é¡»å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å®ƒè‡ªå·±å°±å¿…é¡»è¢«å®šä¹‰ä¸ºæŠ½è±¡ç±»ã€‚</p><h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><p>æŠ½è±¡ç±»å…è®¸æä¾›ä¸€äº›å®ç°ï¼Œä½†æ˜¯æ¥å£åˆ™æ˜¯çº¯ç²¹çš„æ¨¡æ¿ï¼Œåªæä¾›å®šä¹‰åŠŸèƒ½ï¼Œä¸èƒ½æœ‰å®ç°ã€‚</p><p>ä½¿ç”¨å…³é”®å­— <code>interface</code> å£°æ˜æ¥å£ï¼Œå…¶ä¸­å¯ä»¥æœ‰å¸¸é‡æˆå‘˜å’Œæ–¹æ³•çš„å£°æ˜ï¼Œä½†æ˜¯ä¸èƒ½æœ‰æ–¹æ³•ä½“ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">implements</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> Implement getName() method.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PHP ä¸­çš„ç±»åªèƒ½æœ‰ä¸€ä¸ªç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£ã€‚</p><h4 id="Trait"><a href="#Trait" class="headerlink" title="Trait"></a>Trait</h4><p>PHP ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p><p>æ¥å£æä¾›æ²¡æœ‰ä»»ä½•å®ç°çš„ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨ç»§æ‰¿å±‚æ¬¡ä¸­å…±äº«å®ç°ï¼Œå°±éœ€è¦å€ŸåŠ©äº   <code>trait</code>ã€‚</p><p>trait æ˜¯ç±»ä¼¼äºç±»çš„ç»“æ„ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥æ··åˆåˆ°ç±»ä¸­ï¼Œåœ¨ trait ä¸­å®šä¹‰çš„ä»»ä½•æ–¹æ³•éƒ½å¯ä»¥è¢«ä½¿ç”¨å®ƒçš„ä»»ä½•ç±»æ‰€ä½¿ç”¨ã€‚</p><h4 id="å»¶æ—¶é™æ€ç»‘å®šï¼šstatic-å…³é”®å­—"><a href="#å»¶æ—¶é™æ€ç»‘å®šï¼šstatic-å…³é”®å­—" class="headerlink" title="å»¶æ—¶é™æ€ç»‘å®šï¼šstatic å…³é”®å­—"></a>å»¶æ—¶é™æ€ç»‘å®šï¼šstatic å…³é”®å­—</h4><p>static å’Œ self ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå‰è€…å¼•ç”¨çš„æ˜¯è¢«è°ƒç”¨çš„ç±»ï¼Œè€Œä¸æ˜¯åŒ…å«ç±»ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">static</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class User extends DomainObject()</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = User::create();</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ <code>User::create()</code> ä¼šåˆ›å»ºä¸€ä¸ª User å®ä¾‹ï¼Œè€Œä¸æ˜¯å°è¯•åˆ›å»º <code>DomainObject</code> å®ä¾‹ã€‚</p><h4 id="å¼‚å¸¸æ•è·"><a href="#å¼‚å¸¸æ•è·" class="headerlink" title="å¼‚å¸¸æ•è·"></a>å¼‚å¸¸æ•è·</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="variable">$name</span> =  <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(\<span class="built_in">Exception</span> <span class="variable">$e</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="variable">$e</span>;</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;finally&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ— è®º catch å­å¥æ˜¯é‡æ–°æŠ›å‡ºå¼‚å¸¸è¿˜æ˜¯è¿”å›ä¸€ä¸ªå€¼ï¼Œfinally å­å¥éƒ½ä¼šæ‰§è¡Œï¼Œä½†å¦‚æœåœ¨ try æˆ– catch ä¸­è°ƒç”¨äº† die() æˆ– exit()ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šç»ˆæ­¢ï¼Œfinally å­å¥ä¹Ÿå°±ä¸ä¼šæ‰§è¡Œã€‚</p><h4 id="final-ç±»"><a href="#final-ç±»" class="headerlink" title="final ç±»"></a>final ç±»</h4><p>final ç±»å¯ä»¥é˜²æ­¢ç±»å†è¢«ç»§æ‰¿ã€‚final æ–¹æ³•ä¹Ÿæ— æ³•é‡å†™ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å†…éƒ¨é”™è¯¯æ•è·"><a href="#å†…éƒ¨é”™è¯¯æ•è·" class="headerlink" title="å†…éƒ¨é”™è¯¯æ•è·"></a>å†…éƒ¨é”™è¯¯æ•è·</h4><p>å¯ä»¥åœ¨ try catch å­å¥ä¸­é€šè¿‡æŒ‡å®š Error è¿™ä¸ªçˆ¶ç±»æˆ–å®ƒçš„å­ç±»æ¥æ•è·ç›¸åŒ¹é…çš„å†…éƒ¨é”™è¯¯ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">eval</span>(<span class="string">&#x27;illegal code&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (\<span class="built_in">ParseError</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;parse error&#x27;</span>, PHP_EOL;</span><br><span class="line">&#125; <span class="keyword">catch</span> (\<span class="built_in">Error</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;error&#x27;</span>, PHP_EOL;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;finally&#x27;</span>, PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œ finally åœ¨è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ã€‚</p><h4 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h4><p>PHP å†…ç½®çš„æ‹¦æˆªå™¨æ–¹æ³•å¯ä»¥æ‹¦æˆªå‘é€ç»™ä¸ºå®šä¹‰æ–¹æ³•å’Œå±æ€§çš„æ¶ˆæ¯ã€‚</p><p>PHP æ”¯æŒä¸‰ä¸ªå†…ç½®çš„æ‹¦æˆªå™¨æ–¹æ³•ã€‚ä¸ <code>__construct()</code>  ç›¸ä¼¼ï¼Œè¿™äº›æ–¹æ³•ä¹Ÿä¼šåœ¨é€‚å½“çš„æ¡ä»¶ä¸‹è‡ªåŠ¨è°ƒç”¨ã€‚</p><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">__get($property)</td><td align="left">è®¿é—®æœªå®šä¹‰å±æ€§æ—¶ä¼šè¢«è°ƒç”¨</td></tr><tr><td align="left">__set($property, $value)</td><td align="left">å¯¹æœªå®šä¹‰å±æ€§èµ‹å€¼æ—¶ä¼šè¢«è°ƒç”¨</td></tr><tr><td align="left">__isset($property)</td><td align="left">å¯¹æœªå®šä¹‰å±æ€§è°ƒç”¨ isset()æ—¶è°ƒç”¨</td></tr><tr><td align="left">__unset($property)</td><td align="left">å¯¹æœªå®šä¹‰å±æ€§è°ƒç”¨ unset()æ—¶è°ƒç”¨</td></tr><tr><td align="left">__call($method, $args)</td><td align="left">è°ƒç”¨æœªå®šä¹‰éé™æ€æ–¹æ³•æ—¶è°ƒç”¨</td></tr><tr><td align="left">__callStatic($method, $args)</td><td align="left">è°ƒç”¨æœªå®šä¹‰é™æ€æ–¹æ³•æ—¶è°ƒç”¨</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$property</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$method</span> = <span class="string">&quot;get<span class="subst">&#123;$property&#125;</span>&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(method_exists(<span class="keyword">$this</span>, <span class="variable">$method</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;<span class="variable">$method</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person</span>-&gt;name;</span><br></pre></td></tr></table></figure><h4 id="ææ„æ–¹æ³•"><a href="#ææ„æ–¹æ³•" class="headerlink" title="ææ„æ–¹æ³•"></a>ææ„æ–¹æ³•</h4><p>ææ„æ–¹æ³•ä¼šåœ¨ç±»è¢«åƒåœ¾å›æ”¶å‰ï¼Œä¹Ÿå°±æ˜¯ä»å†…å­˜ä¸­æŠ¹å»å‰è°ƒç”¨ã€‚<br>å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ‰§è¡Œä¸€äº›å¿…è¦çš„æ¸…ç†å·¥ä½œã€‚</p><p>ææ„æ–¹æ³•å’Œå‰è¾¹çš„æ‹¦æˆªå™¨éƒ½å±äºé­”æœ¯æ–¹æ³•ï¼Œä½¿ç”¨æ—¶åº”è¯¥æ…é‡ã€‚</p><h4 id="å›è°ƒã€åŒ¿åå‡½æ•°å’Œé—­åŒ…"><a href="#å›è°ƒã€åŒ¿åå‡½æ•°å’Œé—­åŒ…" class="headerlink" title="å›è°ƒã€åŒ¿åå‡½æ•°å’Œé—­åŒ…"></a>å›è°ƒã€åŒ¿åå‡½æ•°å’Œé—­åŒ…</h4><p>å›è°ƒæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡ŒæœŸé—´å°†ä¸ç»„ä»¶æ ¸å¿ƒä»»åŠ¡æ²¡æœ‰ç›´æ¥å…³ç³»çš„åŠŸèƒ½æ’å…¥ç»„ä»¶ã€‚é€šè¿‡è®©ç»„ä»¶æ‹¥æœ‰å›è°ƒèƒ½åŠ›ï¼Œå¯ä»¥èµ‹äºˆå…¶ä»–ç¨‹åºå‘˜åœ¨æˆ‘ä»¬ä¸çŸ¥é“çš„ä¸Šä¸‹æ–‡ä¸Šè·å¾—æ‰©å±•ç¨‹åºçš„èƒ½åŠ›ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$callbacks</span> = [];</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$log</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$person</span></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$person</span>-&gt;name, PHP_EOL;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;callbacks[] = <span class="variable">$log</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;callbacks <span class="keyword">as</span> <span class="variable">$callback</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(is_callable(<span class="variable">$callback</span>))&#123;</span><br><span class="line">                call_user_func(<span class="variable">$callback</span>, <span class="keyword">$this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°†åŒ¿åå‡½æ•°ï¼ˆé—­åŒ…å‡½æ•°ï¼‰èµ‹å€¼ç»™ $logï¼Œç„¶åå°†å®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°å’Œæ–¹æ³•ï¼Œç„¶ååœ¨æŒ‡å®šçš„ä½ç½®è¿›è¡Œå›è°ƒã€‚</p><p>åŒ¿åå‡½æ•°å¯ä»¥å¼•ç”¨é‚£äº›å£°æ˜åœ¨å…¶çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œé€šè¿‡ <code>use()</code> æ“ä½œã€‚</p><h4 id="åŒ¿åç±»"><a href="#åŒ¿åç±»" class="headerlink" title="åŒ¿åç±»"></a>åŒ¿åç±»</h4><p>å½“éœ€è¦ä»å¾ˆå°çš„ç±»ä¸­åˆ›å»ºå’Œç»§æ‰¿å®ä¾‹ï¼Œå¹¶ä¸”è¿™ä¸ªç±»å¾ˆç®€å•è€Œä¸”ç‰¹å®šäºå±€éƒ¨ä¸Šä¸‹æ–‡æ—¶ï¼ŒåŒ¿åç±»éå¸¸æœ‰ç”¨ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PersonWriter</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">Person <span class="variable">$person</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">PersonWriter <span class="variable">$writer</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$writer</span>-&gt;write(<span class="keyword">$this</span>), PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="variable">$person</span>-&gt;getName(<span class="keyword">new</span> <span class="class"><span class="keyword">class</span> <span class="keyword">implements</span> <span class="title">PersonWriter</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">Person <span class="variable">$person</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$person</span>-&gt;name, PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åŒ¿åç±»ä¸æ”¯æŒé—­åŒ…ï¼Œä¹Ÿå°±æ— æ³•è®¿é—®å®šä¹‰åœ¨åŒ¿åç±»å¤–çš„å±æ€§ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°å°†å‚æ•°ä¼ å…¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php å’Œè®¾è®¡æ¨¡å¼</title>
      <link href="/2021/03/21/design-pattern/"/>
      <url>/2021/03/21/design-pattern/</url>
      
        <content type="html"><![CDATA[<h4 id="åœºé¢è¯"><a href="#åœºé¢è¯" class="headerlink" title="åœºé¢è¯"></a>åœºé¢è¯</h4><p>å·¥ä½œå‡ å¹´ï¼Œå¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œé‡å¤çš„ CURD ä¸€ç›´åœ¨æ¶ˆè€—ç€æˆ‘ä½œä¸ºç¨‹åºå‘˜çš„æ¿€æƒ…ä¸ç²¾åŠ›ï¼Œåœ¨è®¾è®¡æ¨¡å¼è¿™æ–¹é¢çš„ç§¯ç´¯ä»æ¥éƒ½ä¸å¤Ÿå®Œå–„ï¼Œå‡ºå»é¢è¯•æ—¶è¿˜ç»å¸¸ä¼šé¢ä¸´é¢è¯•å®˜çš„çµé­‚æ‹·é—®ï¼Œæ€»è§‰å¾—è‡ªå·±æ˜¯ä¸æ˜¯å°±å¿«è¢«æ·˜æ±°äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæ˜¯æ—¶å€™ä¸‹åŠŸå¤«æ•´ç†ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†äº†ã€‚</p><p>å¼€å§‹ä¹‹å‰ï¼Œè¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ</p><p>é¦–å…ˆä»æ¦‚å¿µæ¥è®²ï¼Œè®¾è®¡æ¨¡å¼ä½œä¸ºä¸€ç§æè¿°é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆçš„æ–¹æ³•ï¼Œæ˜¯æ— æ•°çš„ IT å‰è¾ˆåœ¨å·¥ä½œä¸­æ€»ç»“å‡ºçš„ <code>ç‰¹å®šåœºæ™¯</code> ä¸‹çš„ <code>æœ€ä½³è§£å†³æ–¹æ¡ˆ</code>ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬é‡åˆ°åŒæ ·çš„åœºæ™¯æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡ä½¿ç”¨æ¨¡å¼ï¼Œæ¥å®ç°ç¬¦åˆè‡ªå·±ç¨‹åºçš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æ­¤é™ä½ä»£ç çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„è´¨é‡ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬åæœŸå¯¹ç¨‹åºè¿›è¡Œè°ƒæ•´æˆ–æ‹“å±•ã€‚</p><p>ç¬¬äºŒï¼Œç°åœ¨å¤§éƒ¨åˆ† PHP ç¨‹åºéƒ½æ˜¯ä¾æ‰˜äºæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹äºæ¡†æ¶çš„ä½¿ç”¨ï¼Œåªæ˜¯å±€é™äºåœ¨ä¸€ä¸ªå¼ºå¤§çš„ç¨‹åºåŸºç¡€è®¾æ–½ä¸Šæ·»åŠ ä¸€äº›å°è£…é¥°ã€‚é‚£ä¹ˆå­¦ä¹ å¹¶æŒæ¡è®¾è®¡æ¨¡å¼ä»¥åï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç†è§£æ¡†æ¶æ˜¯å¦‚ä½•è§£å†³é—®é¢˜ï¼Œä»¥åŠæ¡†æ¶è§£å†³é—®é¢˜çš„ç­–ç•¥ï¼Œéšç€å¼€å‘çš„æ·±å…¥ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿä»¥è®¾è®¡ä¸ºå¯¼å‘ï¼Œå¼€å‘å‡ºè‡ªå·±çš„å¯å¤ç”¨çš„ä»£ç åº“ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œä¹Ÿæ˜¯ä¸€ç§æå¤§çš„ç§¯ç´¯å’Œæå‡ã€‚</p><p>ç¬¬ä¸‰ï¼Œå¯¹äºå›¢é˜Ÿæ¥è¯´ï¼Œäººæ¥äººå¾€æ˜¯å¸¸æ€ï¼Œå¯¹äºä»ä¸€å¼€å§‹å°±å·²ç»æ¥æ‰‹é¡¹ç›®çš„æˆå‘˜æ¥è¯´ï¼Œç†è§£ç¨‹åºçš„é€»è¾‘ä¼šå¾ˆè½»æ¾ï¼Œä½†æ˜¯å¯¹äºæ–°åŠ å…¥çš„æˆå‘˜æ¥è¯´ï¼Œé‡‡ç”¨æ ‡å‡†åŒ–è®¾è®¡æ¨¡å¼çš„ç¨‹åºæ‰æ˜¯æ›´å®¹æ˜“çš„ç†è§£å’ŒæŒæ¡çš„å­˜åœ¨ï¼Œè¿™å¯ä»¥ä½¿æ–°æˆå‘˜æ›´å¿«çš„å‚ä¸åˆ°é¡¹ç›®çš„å¼€å‘å·¥ä½œä¸­ï¼Œå‘æŒ¥å‡ºä»–ä½œä¸ºé¡¹ç›®æˆå‘˜çš„ä½œç”¨ã€‚</p><p>ç¬¬å››ï¼Œè®¾è®¡æ¨¡å¼å®šä¹‰äº†ä¸“ä¸šè¯æ±‡ï¼Œé€šè¿‡è¿™äº›è¯æ±‡ï¼Œå¼€å‘äººå‘˜ä¹‹é—´çš„æ²Ÿé€šå˜å¾—æ›´åŠ å®¹æ˜“ï¼Œå¯ä»¥èŠ‚çœå¾ˆå¤šæ²Ÿé€šæˆæœ¬ã€‚</p><p>è®¾è®¡æ¨¡å¼ä¸é¢å‘å¯¹è±¡å¯†åˆ‡ç›¸å…³ï¼Œå› æ­¤æˆ‘åº”è¯¥ä¸ä¼šç®€å•çš„å¤åˆ¶ä¸€å †æ¨¡å¼æ¥åŠ ä»¥ç†è§£ï¼Œè€Œæ˜¯ä»é¢å‘å¯¹è±¡å…¥æ‰‹ï¼Œé€æ¸å‘è®¾è®¡æ¨¡å¼æ¼”æ·±ã€‚</p><p><a href="https://github.com/m-finder/design-pattern">æºç </a></p><h4 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h4><a href="/2021/03/21/design-pattern-object/" title="å¯¹è±¡">å¯¹è±¡</a><a href="/2021/03/21/design-pattern-principles/" title="è®¾è®¡åŸåˆ™">è®¾è®¡åŸåˆ™</a><a href="/2021/03/21/design-pattern-category/" title="è®¾è®¡æ¨¡å¼åˆ†ç±»">è®¾è®¡æ¨¡å¼åˆ†ç±»</a><a href="/2021/03/21/design-pattern-factory/" title="å·¥å‚æ¨¡å¼">å·¥å‚æ¨¡å¼</a><a href="/2021/03/21/design-pattern-singleton/" title="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</a><a href="/2021/03/21/design-pattern-builder/" title="ç”Ÿæˆå™¨æ¨¡å¼">ç”Ÿæˆå™¨æ¨¡å¼</a><a href="/2021/03/21/design-pattern-prototype/" title="åŸå‹æ¨¡å¼">åŸå‹æ¨¡å¼</a><a href="/2021/03/21/design-pattern-facade/" title="é—¨é¢æ¨¡å¼">é—¨é¢æ¨¡å¼</a><a href="/2021/03/21/design-pattern-adapter/" title="é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼</a><a href="/2021/03/21/design-pattern-decorator/" title="è£…é¥°å™¨æ¨¡å¼">è£…é¥°å™¨æ¨¡å¼</a><a href="/2021/03/21/design-pattern-bridge/" title="æ¡¥æ¥æ¨¡å¼">æ¡¥æ¥æ¨¡å¼</a><a href="/2021/03/21/design-pattern-proxy/" title="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</a><a href="/2021/03/21/design-pattern-composite/" title="ç»„åˆæ¨¡å¼">ç»„åˆæ¨¡å¼</a><a href="/2021/03/21/design-pattern-flyweight/" title="äº«å…ƒæ¨¡å¼">äº«å…ƒæ¨¡å¼</a><a href="/2021/03/21/design-pattern-di/" title="ä¾èµ–æ³¨å…¥æ¨¡å¼">ä¾èµ–æ³¨å…¥æ¨¡å¼</a><a href="/2021/03/21/design-pattern-registry/" title="æ³¨å†Œæ¨¡å¼">æ³¨å†Œæ¨¡å¼</a><a href="#">Post not found: design-pattern-fi æµæ¥å£æ¨¡å¼</a><a href="/2021/03/21/design-pattern-strategy/" title="ç­–ç•¥æ¨¡å¼">ç­–ç•¥æ¨¡å¼</a><a href="/2021/03/21/design-pattern-template-method/" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a><a href="/2021/03/21/design-pattern-observer/" title="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</a><a href="/2021/03/21/design-pattern-iterator/" title="è¿­ä»£å™¨æ¨¡å¼">è¿­ä»£å™¨æ¨¡å¼</a><a href="/2021/03/21/design-pattern-cor/" title="è´£ä»»é“¾æ¨¡å¼">è´£ä»»é“¾æ¨¡å¼</a><a href="/2021/03/21/design-pattern-command/" title="å‘½ä»¤è¡Œæ¨¡å¼">å‘½ä»¤è¡Œæ¨¡å¼</a><a href="/2021/03/21/design-pattern-memento/" title="å¤‡å¿˜å½•æ¨¡å¼">å¤‡å¿˜å½•æ¨¡å¼</a><a href="/2021/03/21/design-pattern-state/" title="çŠ¶æ€æ¨¡å¼">çŠ¶æ€æ¨¡å¼</a><a href="/2021/03/21/design-pattern-visitor/" title="è®¿é—®è€…æ¨¡å¼">è®¿é—®è€…æ¨¡å¼</a><a href="/2021/03/21/design-pattern-mediator/" title="ä¸­ä»‹è€…æ¨¡å¼">ä¸­ä»‹è€…æ¨¡å¼</a>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac m1 ä¸‹æ­å»º php å¼€å‘ç¯å¢ƒ</title>
      <link href="/2021/03/20/m1-php/"/>
      <url>/2021/03/20/m1-php/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç•ªæŒ£æ‰ä¹‹åï¼Œè¿˜æ˜¯ä¸‹æ‰‹äº† m1ï¼ŒçœŸé¦™ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/macos.png" alt="macos"></p><span id="more"></span><h4 id="homebrew-å®‰è£…"><a href="#homebrew-å®‰è£…" class="headerlink" title="homebrew å®‰è£…"></a>homebrew å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure><p>ç½‘æ…¢çš„è¯ï¼Œhost åŠ æ˜ å°„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">199.232.68.133  raw.githubusercontent.com</span><br></pre></td></tr></table></figure><h4 id="php-å®‰è£…"><a href="#php-å®‰è£…" class="headerlink" title="php å®‰è£…"></a>php å®‰è£…</h4><p>çœ‹åˆ°å¥½å¤šäººè¯´ï¼Œè¦æŠŠè‡ªå¸¦çš„ php å…ˆå¸è½½æ‰ï¼Œ ä½†æ˜¯æˆ‘æŠ˜è…¾ä¸€åœˆå‘ç°ï¼Œå¸ç€å¤ªéº»çƒ¦ï¼Œä¸å¸ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install php@7.4</span><br><span class="line">brew link php@7.4</span><br></pre></td></tr></table></figure><p>ç„¶åæ ¹æ®è¾“å‡ºçš„ä¿¡æ¯æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;export PATH=&quot;/opt/homebrew/opt/php@7.4/bin:$PATH&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line">echo &#x27;export PATH=&quot;/opt/homebrew/opt/php@7.4/sbin:$PATH&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line">export LDFLAGS=&quot;-L/opt/homebrew/opt/php@7.4/lib&quot;</span><br><span class="line">export CPPFLAGS=&quot;-I/opt/homebrew/opt/php@7.4/include&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœé”™è¿‡äº†è¿™äº›ä¿¡æ¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥å†æ¬¡æŸ¥çœ‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew info php@7.4</span><br></pre></td></tr></table></figure><h4 id="php-exc-å®‰è£…"><a href="#php-exc-å®‰è£…" class="headerlink" title="php-exc å®‰è£…"></a>php-exc å®‰è£…</h4><h5 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h5><p>å®‰è£…æ‰©å±•éœ€è¦ç”¨åˆ° <code>pecl</code>, å…ˆæŸ¥çœ‹æœ‰æ²¡æœ‰æ­£ç¡®å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pecl help version</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¾“å‡ºä¿¡æ¯åº”è¯¥å’Œ php ç‰ˆæœ¬ä¸€è‡´ï¼Œå³ php7.4ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pecl install redis</span><br></pre></td></tr></table></figure><h5 id="mongodb"><a href="#mongodb" class="headerlink" title="mongodb"></a>mongodb</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;opt&#x2F;homebrew&#x2F;Cellar&#x2F;pcre2&#x2F;10.36&#x2F;include&#x2F;pcre2.h &#x2F;opt&#x2F;homebrew&#x2F;Cellar&#x2F;php@7.4&#x2F;7.4.16&#x2F;include&#x2F;php&#x2F;ext&#x2F;pcre&#x2F;pcre2.h</span><br><span class="line">pech install mongodb</span><br></pre></td></tr></table></figure><h5 id="xdebug"><a href="#xdebug" class="headerlink" title="xdebug"></a>xdebug</h5><p>xdebug3 é…ç½®æœ‰æ”¹åŠ¨ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xdebug.mode = debug</span><br><span class="line">xdebug.client_host = 127.0.0.1</span><br><span class="line">xdebug.client_port = 9003</span><br><span class="line">xdebug.start_with_request=yes</span><br><span class="line">xdebug.log=&quot;opt/homebrew/var/www/logs/xdebug.log&quot;</span><br><span class="line">xdebug.idekey = PHPSTORM</span><br><span class="line">xdebug.discover_client_host=false</span><br></pre></td></tr></table></figure><h4 id="nginx-å®‰è£…"><a href="#nginx-å®‰è£…" class="headerlink" title="nginx å®‰è£…"></a>nginx å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œéœ€è¦è§£æ phpã€‚<br>é»˜è®¤æ–‡ä»¶ä¸åŠ¨ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ï¼š</p><p><code>vi /opt/homebrew/etc/nginx/services/laravel</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen  80;</span><br><span class="line">    server_name   laravel.test;</span><br><span class="line">    root html;</span><br><span class="line">    access_log    html&#x2F;logs&#x2F;nginx.log;</span><br><span class="line">    error_log     htmle&#x2F;logs&#x2F;nginx-error.log;</span><br><span class="line"></span><br><span class="line">    index index.php;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        # Laravel rewrite rule</span><br><span class="line">        try_files $uri $uri&#x2F; &#x2F;index.php?$query_string;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">            fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">            #    fastcgi_pass   unix:&#x2F;dev&#x2F;shm&#x2F;php-cgi.sock;</span><br><span class="line">            fastcgi_index  index.php;</span><br><span class="line">            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">            include        fastcgi_params;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯æˆ–åˆ·æ–° nginxï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services reload nginx || brew services restart nginx</span><br></pre></td></tr></table></figure><p>é‡å¯ä»¥åï¼Œè®°å¾—æ”¹ä¸‹ hostsï¼ŒæŠŠåŸŸååŠ åˆ°æ˜ å°„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br></pre></td></tr></table></figure><h4 id="redis-å®‰è£…"><a href="#redis-å®‰è£…" class="headerlink" title="redis å®‰è£…"></a>redis å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install redis</span><br><span class="line">redis-server -v</span><br></pre></td></tr></table></figure><h4 id="composer-å®‰è£…"><a href="#composer-å®‰è£…" class="headerlink" title="composer å®‰è£…"></a>composer å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">php -r &quot;copy(&#x27;https://install.phpcomposer.com/installer&#x27;, &#x27;composer-setup.php&#x27;);&quot;</span><br><span class="line">php composer-setup.php</span><br><span class="line">php -r &quot;unlink(&#x27;composer-setup.php&#x27;);&quot;</span><br><span class="line">sudo mkdir /usr/local/bin/</span><br><span class="line">sudo mv /opt/homebrew/var/www/composer.phar /usr/local/bin/composer</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020 å¹´è®¡åˆ’æ¸…å•</title>
      <link href="/2020/12/31/2020-to-do-list/"/>
      <url>/2020/12/31/2020-to-do-list/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€å¹´çš„è®¡åˆ’è¿˜æ²¡æœ‰ç»“æŸï¼Œæ–°çš„ä¸€å¹´å®ƒå°±å·²ç»æ¥äº†ã€‚</p><ul><li><input checked="" disabled="" type="checkbox"> laravel-vue-spa åå°ï¼Œå¼€å‘ä¸­</li><li><input checked="" disabled="" type="checkbox"> composer åŒ…å¼€å‘</li><li><input disabled="" type="checkbox"> å­¦ä¹ ä¸€ä¸‹æ‰‹å†™ swoole åˆ†å¸ƒå¼æ¡†æ¶</li><li><input disabled="" type="checkbox"> å°è¯•åšä¸€ä¸ªåŸºäº laravel-swoole çš„ websocket é¡¹ç›®</li><li><input checked="" disabled="" type="checkbox"> ç ”ç©¶ laravel framework</li><li><input checked="" disabled="" type="checkbox"> ç»§ç»­å­¦ä¹  psï¼Œåšä¸ªä¸åˆæ ¼çš„ç¾å·¥</li><li><input checked="" disabled="" type="checkbox"> å­¦ä¹  pr å‰ªè¾‘</li><li><input disabled="" type="checkbox"> è½¯è€ƒè½¯ä»¶è®¾è®¡å¸ˆ</li><li><input disabled="" type="checkbox"> <del>è½¯è€ƒæ¶æ„å¸ˆ</del></li><li><input checked="" disabled="" type="checkbox"> ç ”ç©¶ä¸‹ win10 linux å­ç³»ç»Ÿåœ¨å¼€å‘ä¸­çš„ä½¿ç”¨</li><li><input checked="" disabled="" type="checkbox"> åŸŸåå¤‡æ¡ˆ</li></ul>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
          <category> è®¡åˆ’æ¸…å• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
            <tag> è®¡åˆ’æ¸…å• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é—²è¯ä¸‰ä¸¤å¥</title>
      <link href="/2020/10/02/is-nothing/"/>
      <url>/2020/10/02/is-nothing/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h4><p>åˆå›é­”éƒ½äº†ï¼Œç›®å‰è¶‹äºç¨³å®šã€‚</p><!-- more  --><h4 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h4><p>æˆ‘å®¶å¤§ç¾ä¸½ä¹Ÿæ¥äº†ã€‚</p><h4 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h4><p>è‡ªå·±çš„ç”µè„‘åˆ·æˆäº† <code>linux</code>ï¼Œç›®å‰è¿˜åœ¨æ¢ç´¢ä¸­ã€‚</p><h4 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h4><p>èŠ‚æ—¥å¿«ä¹å‘€ï¼</p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10 å­ç³»ç»Ÿï¼ˆwsl2ï¼‰è¿è¡Œ laradock</title>
      <link href="/2020/01/16/wsl2-laradock/"/>
      <url>/2020/01/16/wsl2-laradock/</url>
      
        <content type="html"><![CDATA[<p>æ²¡å¿ä½ï¼ŒæŠŠå®¶é‡Œçš„ç”µè„‘æ›´æ–°åˆ°äº†é¢„è§ˆç‰ˆï¼Œç„¶åä½“éªŒäº†ä¸€ä¸‹ wls2ï¼Œç›¸å¯¹äº wsl1ï¼Œä½¿ç”¨ docker ç®€ç›´ä¸è¦å¤ªç®€å•ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/docker-love-wsl2.png"></p><!-- more  --><h4 id="æ›´æ–°-wsl2"><a href="#æ›´æ–°-wsl2" class="headerlink" title="æ›´æ–° wsl2"></a>æ›´æ–° wsl2</h4><p>å¼€ä¸ªå‘½ä»¤è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --set-version Ubuntu 2</span><br><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½docker"><a href="#ä¸‹è½½docker" class="headerlink" title="ä¸‹è½½docker"></a>ä¸‹è½½docker</h4><p> <a href="%5Bhttps://docs.docker.com/docker-for-windows/wsl-tech-preview/%5D(https://docs.docker.com/docker-for-windows/wsl-tech-preview/">wsl2 ç‰ˆ docker ä¸‹è½½</a></p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>ä¸‹è½½å®Œæˆåï¼Œå…ˆå‹¾é€‰ wsl2ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/enable-wsl2.png" alt="é…ç½®"></p><p>ç„¶åç›´æ¥é‡å¯ dockerã€‚</p><p>é‡å¯å®Œæˆåï¼Œå‹¾é€‰ä½ çš„å‘è¡Œç‰ˆå­ç³»ç»Ÿã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/ubuntu.png" alt="image.png"></p><p>ç„¶åå†æ¬¡é‡å¯ dockerã€‚</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash</span><br><span class="line">docker -v</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/test.png" alt="image.png"></p><p>é‡è£…å¥½åƒæŠŠæˆ‘ä¹‹å‰çš„é•œåƒéƒ½ç»™å¼„æ²¡äº†ï¼Œåˆ‡åˆ° laradock é‡æ–°ä¸‹è½½ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/visited.png" alt="image.png"></p><p>æ­£å¸¸è®¿é—®ï¼Œæ‰“å®Œæ”¶å·¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10 å­ç³»ç»Ÿï¼ˆwsl1ï¼‰è¿è¡Œ laradock</title>
      <link href="/2020/01/14/wsl-laradock/"/>
      <url>/2020/01/14/wsl-laradock/</url>
      
        <content type="html"><![CDATA[<p>å­ç³»ç»Ÿå‡ºæ¥æŒºé•¿æ—¶é—´äº†ï¼Œçœ‹çœ‹é…ç½®ï¼Œå…¬å¸çš„æ¸£æœºä¹Ÿå°±èƒ½ç©ç©wsl1ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä»£å­ç³»ç»Ÿã€‚</p><p>ç®—äº†ï¼Œå°±è¿™ä¹ˆé¼“æ£å§ã€‚</p><p>å­ç³»ç»Ÿé€‰æ‹© Ubuntuã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/cover.png"></p><span id="more"></span><h4 id="å®‰è£…å­ç³»ç»Ÿ"><a href="#å®‰è£…å­ç³»ç»Ÿ" class="headerlink" title="å®‰è£…å­ç³»ç»Ÿ"></a>å®‰è£…å­ç³»ç»Ÿ</h4><p>ç•¥</p><h4 id="é…ç½®-docker"><a href="#é…ç½®-docker" class="headerlink" title="é…ç½® docker"></a>é…ç½® docker</h4><p><a href="%5Bhttps://docs.docker.com/install/linux/docker-ce/ubuntu/%5D(https://docs.docker.com/install/linux/docker-ce/ubuntu/">å®˜ç½‘é…ç½®æ‰‹å†Œ</a></p><p>å…ˆå¸è½½æ—§ç‰ˆdockerï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure><p>ç„¶åå†ç»§ç»­å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># æ›´æ–°ç´¢å¼•</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"># å®‰è£…è½¯ä»¶ï¼Œå…è®¸ apt é€šè¿‡ https è®¿é—®å­˜å‚¨åº“</span><br><span class="line">sudo apt-get install -y \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br><span class="line"></span><br><span class="line"># æ·»åŠ Dockerçš„å®˜æ–¹GPGå¯†é’¥</span><br><span class="line">curl -fsSL https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line"># è®¾ç½®å­˜å‚¨åº“</span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">   &quot;deb [arch&#x3D;amd64] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu \</span><br><span class="line">   $(lsb_release -cs) \</span><br><span class="line">   stable&quot;</span><br><span class="line"></span><br><span class="line"># å®‰è£… docker å®¢æˆ·ç«¯</span><br><span class="line">sudo apt-get install docker-ce</span><br><span class="line"></span><br><span class="line"># èµ‹æƒ</span><br><span class="line">sudo usermod -aG docker $USER</span><br><span class="line"></span><br><span class="line"># å®‰è£… docker-compose</span><br><span class="line">sudo apt install docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…³è”-wsl-åˆ°-docker-for-windows"><a href="#å…³è”-wsl-åˆ°-docker-for-windows" class="headerlink" title="å…³è” wsl åˆ° docker-for-windows"></a>å…³è” wsl åˆ° docker-for-windows</h4><p>åœ¨ wsl ä¸­è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;export DOCKER_HOST&#x3D;tcp:&#x2F;&#x2F;localhost:2375&quot; &gt;&gt; ~&#x2F;.bashrc &amp;&amp; source ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure><h4 id="wsl-ç›®å½•æŒ‚è½½"><a href="#wsl-ç›®å½•æŒ‚è½½" class="headerlink" title="wsl ç›®å½•æŒ‚è½½"></a>wsl ç›®å½•æŒ‚è½½</h4><p>wsl ç›®å½•æŒ‚è½½é»˜è®¤åœ¨ <code>/mnt/c</code>ï¼Œè·Ÿ docker-for-windows çš„å·¥ä½œæ–¹å¼ä¸ä¸€è‡´ï¼Œå› æ­¤éœ€è¦åšä¸‹è°ƒæ•´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;wsl.conf</span><br><span class="line"></span><br><span class="line">[automount]</span><br><span class="line">root &#x3D; &#x2F;</span><br><span class="line">options &#x3D; &quot;metadata&quot;</span><br></pre></td></tr></table></figure><p>ä¿å­˜ä»¥åï¼Œé‡å¯ wslã€‚</p><h4 id="å¯åŠ¨laradock"><a href="#å¯åŠ¨laradock" class="headerlink" title="å¯åŠ¨laradock"></a>å¯åŠ¨laradock</h4><p>åœ¨ windows çš„ laradock ç›®å½•ä¸­æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿è¡Œ <code>bash</code> å³å¯å¿«é€Ÿè¿›å…¥ wsl ä¸­çš„å¯¹åº”ç›®å½•ï¼Œç„¶åå†æ‰§è¡Œ <code>docker-compose up</code> å‘½ä»¤å°±èƒ½å¯åŠ¨æœåŠ¡ã€‚</p><p>å¯åŠ¨å®Œä»¥åï¼Œå®¿ä¸»æœºç›´æ¥è®¿é—®å³å¯ã€‚</p><p>å¦‚æœé…ç½®è™šæ‹ŸåŸŸåï¼Œä¸€æ ·æ˜¯åœ¨å®¿ä¸»æœºçš„ hosts æ·»åŠ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ laravel vue ä¸­ä½¿ç”¨ svg å›¾æ ‡</title>
      <link href="/2019/10/28/laravel-vue-svg/"/>
      <url>/2019/10/28/laravel-vue-svg/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ laravel vue ä¸­ä½¿ç”¨ svg å›¾æ ‡<br><img src= "/img/loading.gif" data-lazy-src="/images/laravel-vue.jpg"></p><span id="more"></span><h4 id="å®‰è£…æ‰©å±•ç»„ä»¶ï¼š"><a href="#å®‰è£…æ‰©å±•ç»„ä»¶ï¼š" class="headerlink" title="å®‰è£…æ‰©å±•ç»„ä»¶ï¼š"></a>å®‰è£…æ‰©å±•ç»„ä»¶ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install laravel-mix-svg-vue</span><br><span class="line">or</span><br><span class="line">yarn add laravel-mix-svg-vue</span><br></pre></td></tr></table></figure><h4 id="åœ¨-webpack-mix-js-ä¸­æ·»åŠ å¼•ç”¨ï¼š"><a href="#åœ¨-webpack-mix-js-ä¸­æ·»åŠ å¼•ç”¨ï¼š" class="headerlink" title="åœ¨ webpack.mix.js ä¸­æ·»åŠ å¼•ç”¨ï¼š"></a>åœ¨ webpack.mix.js ä¸­æ·»åŠ å¼•ç”¨ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const mix &#x3D; require(&#39;laravel-mix&#39;);</span><br><span class="line">require(&#39;laravel-mix-svg-vue&#39;);</span><br><span class="line"></span><br><span class="line">mix.js(&#39;resources&#x2F;js&#x2F;app.js&#39;, &#39;public&#x2F;js&#39;)</span><br><span class="line">    .svgVue();</span><br></pre></td></tr></table></figure><h4 id="åœ¨-app-js-ä¸­å¼•ç”¨ç»„ä»¶"><a href="#åœ¨-app-js-ä¸­å¼•ç”¨ç»„ä»¶" class="headerlink" title="åœ¨ app.js ä¸­å¼•ç”¨ç»„ä»¶"></a>åœ¨ app.js ä¸­å¼•ç”¨ç»„ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;;</span><br><span class="line">import SvgVue from &#39;svg-vue&#39;;</span><br><span class="line"></span><br><span class="line">Vue.use(SvgVue);</span><br></pre></td></tr></table></figure><h4 id="svg-ä½¿ç”¨ï¼š"><a href="#svg-ä½¿ç”¨ï¼š" class="headerlink" title="svg ä½¿ç”¨ï¼š"></a>svg ä½¿ç”¨ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg-vue icon&#x3D;&quot;avatar&quot;&gt;&lt;&#x2F;svg-vue&gt;</span><br></pre></td></tr></table></figure><h4 id="é»˜è®¤é…ç½®"><a href="#é»˜è®¤é…ç½®" class="headerlink" title="é»˜è®¤é…ç½®"></a>é»˜è®¤é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    svgPath: &#39;resources&#x2F;svg&#39;,</span><br><span class="line">    extract: false,</span><br><span class="line">    svgoSettings: [</span><br><span class="line">        &#123; removeTitle: true &#125;,</span><br><span class="line">        &#123; removeViewBox: false &#125;,</span><br><span class="line">        &#123; removeDimensions: true &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>svgPath</td><td>String</td><td>resources/svg</td><td>svg å›¾æ ‡è·¯å¾„</td></tr><tr><td>extract</td><td>Boolean</td><td>false</td><td>å°† svg ä¸ä¸»åŒ…åˆ†ç¦»</td></tr><tr><td>svgoSettings</td><td>Array</td><td>[{ removeTitle: true }, { removeViewBox: false }, { removeDimensions: true }]</td><td>svgo ç›¸å…³è®¾ç½®</td></tr></tbody></table><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å¥½åƒæ˜¯ä¸èƒ½é€šè¿‡å‚æ•°åŠ¨æ€æ”¹å˜ svg å†…å®¹ï¼Œæ²¡è¯•å‡ºæ¥ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ laradock ç¯å¢ƒä¸­ä½¿ç”¨ laravel-swoole çš„ websocket</title>
      <link href="/2019/10/12/laravel-swoole-socket-in-laradock/"/>
      <url>/2019/10/12/laravel-swoole-socket-in-laradock/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰å†™äº†ä¸€ç¯‡ <a href="https://www.m-finder.com/2019/08/23/laravel-swoole-in-laradock/">åœ¨ laradock ç¯å¢ƒä¸­ä½¿ç”¨ laravel-swoole åŠ é€Ÿä½ çš„ laravel åº”ç”¨</a> çš„åšå®¢ï¼Œç®—æ˜¯æ•²å¼€äº† laravel-swoole çš„å¤§é—¨ï¼Œä»Šå¤©å°±ç»§ç»­ç ”ç©¶ä¸‹æœŸä¸­çš„ websocket åŠŸèƒ½ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laradock.png"></p><span id="more"></span><h4 id="å®‰è£…-laravel-swoole"><a href="#å®‰è£…-laravel-swoole" class="headerlink" title="å®‰è£… laravel-swoole"></a>å®‰è£… laravel-swoole</h4><p>è¿™é‡Œå°±ä¸å†™äº†ï¼Œå‚è€ƒä¸Šç¯‡ã€‚</p><h4 id="é…ç½®-socket"><a href="#é…ç½®-socket" class="headerlink" title="é…ç½® socket"></a>é…ç½® socket</h4><p>ç¼–è¾‘ laravel  env æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹ä¸€è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SWOOLE_HTTP_WEBSOCKET&#x3D;true</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ <code>php artisan swoole:http infos</code> æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-----------------------------------------------------+</span><br><span class="line">| Name            | Value                                               |</span><br><span class="line">+-----------------+-----------------------------------------------------+</span><br><span class="line">| PHP Version     | 7.2.21-1+ubuntu16.04.1+deb.sury.org+1               |</span><br><span class="line">| Swoole Version  | 4.4.4                                               |</span><br><span class="line">| Laravel Version | 5.8.33                                              |</span><br><span class="line">| Listen IP       | workspace                                           |</span><br><span class="line">| Listen Port     | 1215                                                |</span><br><span class="line">| Server Status   | Online                                              |</span><br><span class="line">| Reactor Num     | 2                                                   |</span><br><span class="line">| Worker Num      | 2                                                   |</span><br><span class="line">| Task Worker Num | 2                                                   |</span><br><span class="line">| Websocket Mode  | On                                                  |</span><br><span class="line">| Master PID      | 326                                                 |</span><br><span class="line">| Manager PID     | 327                                                 |</span><br><span class="line">| Log Path        | /var/www/laravel-learn/storage/logs/swoole_http.log |</span><br><span class="line">+-----------------+-----------------------------------------------------+</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>Websocket Mode</code> ä¸€é¡¹å·²ç»æ‰“å¼€äº†ã€‚</p><h4 id="ç¼–è¾‘-socket-è·¯ç”±"><a href="#ç¼–è¾‘-socket-è·¯ç”±" class="headerlink" title="ç¼–è¾‘ socket è·¯ç”±"></a>ç¼–è¾‘ socket è·¯ç”±</h4><p>åœ¨ <code>routes/websocket.php</code> ä¸­:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Websocket::on(<span class="string">&#x27;connect&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$websocket</span>, Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// called while socket on connect</span></span><br><span class="line">    <span class="variable">$websocket</span>-&gt;emit(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Websocket::on(<span class="string">&#x27;disconnect&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$websocket</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// called while socket on disconnect</span></span><br><span class="line">    <span class="variable">$websocket</span>-&gt;emit(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;server is gone, bye~&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Websocket::on(<span class="string">&#x27;example&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$websocket</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$websocket</span>-&gt;emit(<span class="string">&#x27;message&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­¤æ–‡ä»¶ä¿®æ”¹åéœ€è¦é‡å¯ <code>swoole:http</code>ã€‚</p><h4 id="å‰ç«¯è¿æ¥-socket"><a href="#å‰ç«¯è¿æ¥-socket" class="headerlink" title="å‰ç«¯è¿æ¥ socket"></a>å‰ç«¯è¿æ¥ socket</h4><p>å› ä¸º laravel-swoole ä½¿ç”¨çš„æ˜¯ <code>Socket.io</code>ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿé‡‡ç”¨è¿™ä¸ªã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> socket = io(<span class="string">&#x27;http://study.test:8080/&#x27;</span>, &#123;<span class="attr">transports</span>: [<span class="string">&#x27;websocket&#x27;</span>], <span class="attr">reconnection</span>: <span class="literal">true</span>&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    socket.on(<span class="string">&#x27;connect&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        socket.emit(<span class="string">&#x27;example&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        socket.on(<span class="string">&#x27;disconnect&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;disconnect&#x27;</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        socket.on(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(msg)</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®-nginx"><a href="#é…ç½®-nginx" class="headerlink" title="é…ç½® nginx"></a>é…ç½® nginx</h4><p>å¦‚æœä½ ç”¨çš„ swoole ç‰ˆæœ¬ä¸º <code> 4.4.4</code>ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¯¹ä¸Šç¯‡æ–‡ç« ä¸­çš„ nginx é…ç½®åšä¸ªå°ä¿®æ”¹ï¼Œå³æ·»åŠ ä¸€è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_http_version 1.1;</span><br></pre></td></tr></table></figure><p>å®Œæ•´é…ç½®å°±ä¸è´´äº†ï¼ŒæŠŠè¿™ä¸€è¡ŒåŠ åœ¨ <code>proxy_pass http://swoole-http$suffix;</code> è¿™ä¸€è¡Œå‰åéƒ½è¡Œã€‚</p><p>å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œçš„è¯ï¼Œè€Œä¸”æ€ä¹ˆä¹Ÿæ²¡ååº”çš„è¯ï¼Œè®°å¾—å» log ä¸­æ‰¾å…·ä½“æŠ¥é”™ã€‚</p><p>emmmï¼Œæ–‡æ¡£æ²¡å†™ï¼Œåœ¨ issue é‡Œæ‰’å‡ºæ¥çš„â€¦â€¦</p><p><img src= "/img/loading.gif" data-lazy-src="/images/demo.png" alt="æ¼”ç¤º"></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python å†…å­˜æº¢å‡ºçš„è§£å†³æ–¹æ³•</title>
      <link href="/2019/09/24/python-out-of-memory/"/>
      <url>/2019/09/24/python-out-of-memory/</url>
      
        <content type="html"><![CDATA[<p>è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®åŒæ­¥è„šæœ¬çªç„¶å‡ºç°å·²æ€æ­»ï¼Œè°æŠŠä½ æ€äº†ï¼Œå’‹å°±çªç„¶è¢«æ€äº†ï¼Ÿï¼Ÿï¼Ÿ</p><p><img src= "/img/loading.gif" data-lazy-src="/images/kn.jpg" alt="çœŸå®Ÿã¯ã„ã¤ã‚‚ä¸€ã¤ï¼"></p><span id="more"></span><h4 id="ç³»ç»Ÿæ—¥å¿—"><a href="#ç³»ç»Ÿæ—¥å¿—" class="headerlink" title="ç³»ç»Ÿæ—¥å¿—"></a>ç³»ç»Ÿæ—¥å¿—</h4><p>åˆ‡æ¢åˆ° <code>var/log/</code> æŸ¥çœ‹ messagesï¼Œå‘ç°æ˜¯ <code>Out of memory: Kill process 13678 (python3) score 906 or sacrifice child</code></p><h4 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h4><p>è¿™å°±å¥‡æ€ªäº†ï¼Œæ•°æ®åŒæ­¥è„šæœ¬æ¯æ¬¡è¿è¡Œå®Œéƒ½ä¼šé‡Šæ”¾å†…å­˜çš„ï¼Œè€Œä¸”å·²ç»ä»å¸¸å¼€çš„æ­»å¾ªç¯æ”¹æˆäº† <code>BlockingScheduler</code> çš„å®šæ—¶ä»»åŠ¡ï¼ŒæŒ‰ç†è¯´ä¸åº”è¯¥æ¶ˆè€—å¤§é‡å†…å­˜ã€‚</p><p>æ•°æ®åŒæ­¥æ²¡é—®é¢˜ï¼Œé‚£å°±åªèƒ½æ˜¯å…¶ä»–ç¨‹åºæ¶ˆè€—äº†ï¼Œæƒ³èµ·æ¥è¿™é‡Œä¸ç´§è¿è¡Œäº†æ•°æ®åŒæ­¥ï¼Œè¿˜æœ‰ä¸€ä¸ª laravel é¡¹ç›®å’Œä¸€ä¸ª django é¡¹ç›®ï¼Œlaravel ä¸º django æä¾›æ¥å£ï¼Œé—®é¢˜å¾ˆæœ‰å¯èƒ½å°±å‡ºç°åœ¨ djangoï¼</p><p>è¿è¡Œ top æŸ¥çœ‹ python çš„å†…å­˜æ¶ˆè€—ï¼Œç„¶åé€šè¿‡ laravel è°ƒç”¨ä¸€ä¸‹æ¥å£ï¼Œå‘ç°å†…å­˜ç¡®å®ä¸Šæ¶¨å¹¶ä¸”ä¸€ç›´æ²¡æœ‰é‡Šæ”¾ã€‚</p><p>ç½ªé­ç¥¸é¦–ç»ˆäºæ‰¾åˆ°äº†ï¼</p><h4 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h4><p>ç»è¿‡ä¸€ç•ªæŸ¥è¯¢ï¼Œdjango å¼•å‘å†…å­˜æ³„æ¼ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯ç›´æ¥è®¿é—® django çš„æ•°æ®åº“æ¥å£æ—¶æ²¡æœ‰ä¸»åŠ¨é‡Šæ”¾æ¸¸æ ‡ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è®¾ç½®äº† debug æ¨¡å¼ï¼Œè¿™ä¸ªé¡¹ç›®å› ä¸ºè¿˜åœ¨å¼€å‘ï¼Œæ‰€ä»¥ debug æ¨¡å¼ç¡®å®å¼€ç€ã€‚</p><p>æ”¹æ‰ä»¥åå†è¯•ï¼Œæœç„¶å†…å­˜ä¸å†é£™å‡ã€‚</p><p>çº¿ä¸Šç¯å¢ƒä¸€å®šè¦æ…é‡å•Šï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019 å¹´å­¦ä¹ æ¸…å•</title>
      <link href="/2019/08/23/2019-to-do-list/"/>
      <url>/2019/08/23/2019-to-do-list/</url>
      
        <content type="html"><![CDATA[<ul><li><del>laradock</del></li><li><del>laravel å†…ç½® vue çš„ç”¨æ³•</del></li><li><del>laravel äº‹ä»¶</del></li><li><del>laravel é˜Ÿåˆ—</del></li><li><del>laravel å†…ç½®æµ‹è¯•æ¨¡å—</del></li><li><del>laravel å¹¿æ’­ç³»ç»Ÿ</del></li><li><del>laravel æ¶ˆæ¯é€šçŸ¥</del></li><li><del>composer æ‰©å±•åŒ…å¼€å‘</del></li><li>php travis ci å¯æŒç»­é›†æˆ</li><li><em>swoole æ·±å…¥å­¦ä¹ </em></li><li><del>trait çš„å®é™…åº”ç”¨</del></li><li>php ä»£ç åˆ†æå·¥å…· PHPStan çš„ç ”ç©¶ä¸å­¦ä¹ </li><li><del>laravel æœ€æ–°ç‰ˆé¡¹ç›®å®æˆ˜</del></li><li><em>deep learning</em></li><li><del>å·ç§¯ç½‘ç»œé¢„æµ‹è‚¡ç¥¨æ¶¨è·Œ</del></li><li><del>laravel-swoole</del></li><li><del>laravel-admin</del></li></ul>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
          <category> è®¡åˆ’æ¸…å• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
            <tag> è®¡åˆ’æ¸…å• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ laradock ç¯å¢ƒä¸­ä½¿ç”¨ laravel-swoole åŠ é€Ÿä½ çš„ laravel åº”ç”¨</title>
      <link href="/2019/08/23/laravel-swoole-in-laradock/"/>
      <url>/2019/08/23/laravel-swoole-in-laradock/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ laradock ç¯å¢ƒä¸­ä½¿ç”¨ laravel-swoole åŠ é€Ÿä½ çš„ laravel åº”ç”¨ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/laradock.png"></p><span id="more"></span><h4 id="å®‰è£…laravel-swoole"><a href="#å®‰è£…laravel-swoole" class="headerlink" title="å®‰è£…laravel-swoole"></a>å®‰è£…laravel-swoole</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">composer require swooletw&#x2F;laravel-swoole</span><br><span class="line">php artisan vendor:publish --tag&#x3D;laravel-swoole</span><br></pre></td></tr></table></figure><h4 id="å¼€æ”¾-workspace-ç«¯å£"><a href="#å¼€æ”¾-workspace-ç«¯å£" class="headerlink" title="å¼€æ”¾ workspace ç«¯å£"></a>å¼€æ”¾ workspace ç«¯å£</h4><p>åœ¨ <code>laradock/workspace/Dockerfile</code> æœ€åæ·»åŠ ä¸€è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE 1215</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–° build workspace å®¹å™¨ã€‚</p><h4 id="ä¿®æ”¹-nginx-é…ç½®"><a href="#ä¿®æ”¹-nginx-é…ç½®" class="headerlink" title="ä¿®æ”¹ nginx é…ç½®"></a>ä¿®æ”¹ nginx é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">upstream swoole-http &#123;</span><br><span class="line">    server workspace:1215;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">map $http_upgrade $connection_upgrade &#123;</span><br><span class="line">    default upgrade;</span><br><span class="line">    &#39;&#39;      close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    # For https</span><br><span class="line">    # listen 443 ssl;</span><br><span class="line">    # listen [::]:443 ssl ipv6only&#x3D;on;</span><br><span class="line">    # ssl_certificate &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;default.crt;</span><br><span class="line">    # ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;default.key;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    server_name study.test;</span><br><span class="line">    root &#x2F;var&#x2F;www&#x2F;laravel-learn&#x2F;public;</span><br><span class="line">    index index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location &#x3D; &#x2F;index.php &#123;</span><br><span class="line">            # Ensure that there is no such file named &quot;not_exists&quot;</span><br><span class="line">            # in your &quot;public&quot; directory.</span><br><span class="line">            try_files &#x2F;not_exists @swoole;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        try_files $uri $uri&#x2F; @swoole;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location @swoole &#123;</span><br><span class="line">        set $suffix &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        if ($uri &#x3D; &#x2F;index.php) &#123;</span><br><span class="line">            set $suffix &quot;&#x2F;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header Scheme $scheme;</span><br><span class="line">        proxy_set_header SERVER_PORT $server_port;</span><br><span class="line">        proxy_set_header REMOTE_ADDR $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection $connection_upgrade;</span><br><span class="line"></span><br><span class="line">        # IF https</span><br><span class="line">        # proxy_set_header HTTPS &quot;on&quot;;</span><br><span class="line"></span><br><span class="line">        charset utf-8;</span><br><span class="line"></span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;swoole-http$suffix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯ nginx</p><h4 id="ä¿®æ”¹-laravel-env"><a href="#ä¿®æ”¹-laravel-env" class="headerlink" title="ä¿®æ”¹ laravel env"></a>ä¿®æ”¹ laravel env</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SWOOLE_HTTP_HOST&#x3D;workspace</span><br><span class="line">SWOOLE_HTTP_DAEMONIZE&#x3D;true</span><br><span class="line">SWOOLE_HOT_RELOAD_ENABLE&#x3D;true</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨-swoole"><a href="#å¯åŠ¨-swoole" class="headerlink" title="å¯åŠ¨ swoole"></a>å¯åŠ¨ swoole</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan swoole:http start | stop | restart | resload</span><br></pre></td></tr></table></figure><h1 id="å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°"><a href="#å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°" class="headerlink" title="å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°"></a>å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°</h1><p>è°ƒæ•´ swoole_http ä¸­ <code>max_request = 1</code></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ docker å®¹å™¨ä¸­å®‰è£… zend guard</title>
      <link href="/2019/08/18/docker-php-zend-guard/"/>
      <url>/2019/08/18/docker-php-zend-guard/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ docker å®¹å™¨ä¸­å®‰è£… zend guardã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/docker.jpg" alt="docker"></p><span id="more"></span><h4 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose exec php-fpm bash</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°ç¯å¢ƒ"><a href="#æ›´æ–°ç¯å¢ƒ" class="headerlink" title="æ›´æ–°ç¯å¢ƒ"></a>æ›´æ–°ç¯å¢ƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install wget -y</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;downloads.zend.com&#x2F;guard&#x2F;7.0.0&#x2F;zend-loader-php5.6-linux-x86_64_update1.tar.gz</span><br></pre></td></tr></table></figure><h4 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf zend-loader-php5.6-linux-x86_64_update1.tar.gz</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ‰©å±•è·¯å¾„"><a href="#æŸ¥çœ‹æ‰©å±•è·¯å¾„" class="headerlink" title="æŸ¥çœ‹æ‰©å±•è·¯å¾„"></a>æŸ¥çœ‹æ‰©å±•è·¯å¾„</h4><p>åœ¨ php-info ä¸­æœç´¢è·¯å¾„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extension_dir</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/path.png" alt="path"></p><h4 id="ç§»åŠ¨æ‰©å±•åŒ…å¹¶ä½¿ä¹‹ç”Ÿæ•ˆ"><a href="#ç§»åŠ¨æ‰©å±•åŒ…å¹¶ä½¿ä¹‹ç”Ÿæ•ˆ" class="headerlink" title="ç§»åŠ¨æ‰©å±•åŒ…å¹¶ä½¿ä¹‹ç”Ÿæ•ˆ"></a>ç§»åŠ¨æ‰©å±•åŒ…å¹¶ä½¿ä¹‹ç”Ÿæ•ˆ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp *.so &#x2F;usr&#x2F;local&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20131226</span><br><span class="line">docker-php-ext-enable ZendGuardLoader</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…æˆåŠŸ"><a href="#å®‰è£…æˆåŠŸ" class="headerlink" title="å®‰è£…æˆåŠŸ"></a>å®‰è£…æˆåŠŸ</h4><p>é‡å¯ç¯å¢ƒã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/done.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨vueä¸­ä½¿ç”¨laravel-permissionçš„@canæ ‡ç­¾</title>
      <link href="/2019/08/02/use-laravel-permission-can-tag-in-vue/"/>
      <url>/2019/08/02/use-laravel-permission-can-tag-in-vue/</url>
      
        <content type="html"><![CDATA[<h4 id="1-åœ¨éœ€è¦æƒé™æ ¡éªŒçš„-model-ä¸­æ–°å¢æ–¹æ³•"><a href="#1-åœ¨éœ€è¦æƒé™æ ¡éªŒçš„-model-ä¸­æ–°å¢æ–¹æ³•" class="headerlink" title="1. åœ¨éœ€è¦æƒé™æ ¡éªŒçš„ model ä¸­æ–°å¢æ–¹æ³•"></a>1. åœ¨éœ€è¦æƒé™æ ¡éªŒçš„ model ä¸­æ–°å¢æ–¹æ³•</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getAllPermissionsAttribute</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="variable">$permissions</span> = <span class="keyword">$this</span>-&gt;getAllPermissions();</span><br><span class="line">  <span class="variable">$permission_names</span> = [];</span><br><span class="line"></span><br><span class="line">  collect(<span class="variable">$permissions</span>)-&gt;map(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$permission</span></span>) <span class="title">use</span> (<span class="params">&amp;<span class="variable">$permission_names</span></span>) </span>&#123;</span><br><span class="line">      <span class="variable">$permission_names</span>[] = <span class="variable">$permission</span>-&gt;name;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$permission_names</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-åœ¨-app-blade-ä¸­å­˜å‚¨å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™"><a href="#2-åœ¨-app-blade-ä¸­å­˜å‚¨å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™" class="headerlink" title="2. åœ¨ app.blade ä¸­å­˜å‚¨å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™"></a>2. åœ¨ app.blade ä¸­å­˜å‚¨å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    @auth</span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.Permissions = @json(Auth::user()-&gt;allPermissions);</span></span><br><span class="line"><span class="javascript">    @<span class="keyword">else</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.Permissions = [];</span></span><br><span class="line">    @endauth</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-æ–°å»º-vue-component"><a href="#3-æ–°å»º-vue-component" class="headerlink" title="3. æ–°å»º vue component"></a>3. æ–°å»º vue component</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            $can(permissionName) &#123;</span><br><span class="line">                return Permissions.indexOf(permissionName) !&#x3D;&#x3D; -1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h4 id="4-åœ¨-app-js-æ³¨å†Œ-vue-ç»„ä»¶"><a href="#4-åœ¨-app-js-æ³¨å†Œ-vue-ç»„ä»¶" class="headerlink" title="4.  åœ¨ app.js æ³¨å†Œ vue ç»„ä»¶"></a>4.  åœ¨ app.js æ³¨å†Œ vue ç»„ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import auth from &#39;.&#x2F;components&#x2F;AuthComponent&#39;;\</span><br><span class="line">Vue.mixin(auth);</span><br></pre></td></tr></table></figure><h4 id="5-åœ¨vueä¸­ä½¿ç”¨"><a href="#5-åœ¨vueä¸­ä½¿ç”¨" class="headerlink" title="5. åœ¨vueä¸­ä½¿ç”¨"></a>5. åœ¨vueä¸­ä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a v-if&#x3D;&quot;$can(&#39;admin.admins.delete&#39;)&quot; class&#x3D;&quot;text-danger&quot; @click&#x3D;&quot;dataDelete(admin)&quot;&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å®¹å™¨è®¿é—®å®¿ä¸»æœºç«¯å£</title>
      <link href="/2019/07/31/docker-container-connect-localhost/"/>
      <url>/2019/07/31/docker-container-connect-localhost/</url>
      
        <content type="html"><![CDATA[<p>è¿è¡Œåœ¨ docker å®¹å™¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®éœ€è¦è®¿é—®å®¿ä¸»æœºçš„æŸä¸ªç«¯å£ï¼Œæ¯”å¦‚å®¹å™¨ A ä¸­çš„é¡¹ç›®è®¿é—®å®¿ä¸»æœº Bï¼Œåœ¨ A çš„é¡¹ç›®ä¸­ä»¥ä¸‹è¾¹çš„åœ°å€æ¥è®¿é—®å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host.docker.internal</span><br></pre></td></tr></table></figure><p>ä¹‹å‰æ˜¯å¯ä»¥è¿è¡Œçš„ï¼Œä½†æ˜¯ä»Šå¤©ä¸çŸ¥é“ä»€ä¹ˆæƒ…å†µçªç„¶ 500 äº†ï¼Œé‡å¯ç”µè„‘åï¼Œåœ¨å®¹å™¨ä¸­ ping è¿™ä¸ªåœ°å€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PING host.docker.internal (192.168.65.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.65.2: icmp_seq&#x3D;1 ttl&#x3D;37 time&#x3D;2.09 ms</span><br><span class="line">64 bytes from 192.168.65.2: icmp_seq&#x3D;2 ttl&#x3D;37 time&#x3D;1.05 ms</span><br><span class="line">64 bytes from 192.168.65.2: icmp_seq&#x3D;3 ttl&#x3D;37 time&#x3D;1.05 ms</span><br><span class="line">64 bytes from 192.168.65.2: icmp_seq&#x3D;4 ttl&#x3D;37 time&#x3D;1.16 ms</span><br><span class="line">64 bytes from 192.168.65.2: icmp_seq&#x3D;5 ttl&#x3D;37 time&#x3D;1.03 ms</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å®é™…è®¿é—®çš„æ˜¯ 192.168.65.2 è¿™ä¸ªåœ°å€ï¼Œé‚£ä¹ˆåœ¨å®¿ä¸»æœºçš„ host åŠ ä¸Šä¸€è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.65.2  host.docker.internal</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—®ï¼Œokï¼åšä¸ªè®°å½•ï¼Œé˜²æ­¢ä¸‹æ¬¡å†å¿˜ã€‚</p><h4 id="å®‰è£…ping"><a href="#å®‰è£…ping" class="headerlink" title="å®‰è£…ping"></a>å®‰è£…ping</h4><p>ä¸æŒ‡å®šç”¨æˆ·è¿›å…¥å®¹å™¨ï¼Œç„¶åæ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install iputils-ping</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å“ˆï¼</title>
      <link href="/2019/07/30/husky-is-getting-married/"/>
      <url>/2019/07/30/husky-is-getting-married/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæœ‰åªè‡ªè®¤ä¸ºè‡ªå·±æ˜¯ç‹¼çš„å“ˆå£«å¥‡ï¼Œå«å¤§å“ˆã€‚</p><p>åæ¥ï¼Œä»–æ‰¾åˆ°äº†ä¸€ä¸ªè®©ä»–æ„¿æ„æŠŠéª¨å¤´è®©å‡ºæ¥çš„äººã€‚</p><p>ç¥ä»–åšä¸€åªå¹¸ç¦çš„å“ˆå£«å¥‡ï¼Œæ¯å¤©éƒ½æœ‰éª¨å¤´åƒã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/husky.gif"></p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·ç§¯ç¥ç»ç½‘ç»œå­¦ä¹ </title>
      <link href="/2019/04/18/convnet-learn/"/>
      <url>/2019/04/18/convnet-learn/</url>
      
        <content type="html"><![CDATA[<p>å·ç§¯ç¥ç»ç½‘ç»œï¼Œè®¡ç®—æœºè§†è§‰åº”ç”¨å‡ ä¹éƒ½åœ¨ä½¿ç”¨çš„ä¸€ç§æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p><p>ä¸€èˆ¬ç”¨äºè®­ç»ƒæ•°æ®é›†è¾ƒå°çš„é—®é¢˜ï¼Œæ¯”å¦‚å›¾åƒåˆ†ç±»ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/cover.gif"></p><span id="more"></span><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>å·ç§¯ç¥ç»ç½‘ç»œæ˜¯ä¸€ç§å¤šå±‚ç¥ç»ç½‘ç»œï¼Œä¸»è¦ç”±è¾“å…¥å±‚ï¼Œå·ç§¯å±‚ï¼Œæ¿€åŠ±å‡½æ•°ï¼Œæ± åŒ–å±‚å’Œå…¨è¿æ¥å±‚ç»„æˆï¼Œå¯ä»¥é€šè¿‡ä¸€ç³»åˆ—æ–¹æ³•ï¼ŒæˆåŠŸå°†æ•°æ®é‡åºå¤§çš„å›¾ç‰‡è¯†åˆ«é—®é¢˜ä¸æ–­é™ç»´ï¼Œæœ€ç»ˆä½¿å…¶èƒ½å¤Ÿè¢«è®­ç»ƒã€‚</p><h6 id="è¾“å…¥å±‚"><a href="#è¾“å…¥å±‚" class="headerlink" title="è¾“å…¥å±‚"></a>è¾“å…¥å±‚</h6><p>å³æ•°æ®çš„è¾“å…¥ã€‚</p><p>é€šè¿‡ä¼ å…¥å‚æ•° <code>input_shape=(28, 28, 1)</code> æ¥è®¾ç½®ç½‘ç»œæ¥æ”¶å¼ é‡çš„å½¢çŠ¶ã€‚</p><h6 id="å·ç§¯å±‚"><a href="#å·ç§¯å±‚" class="headerlink" title="å·ç§¯å±‚"></a>å·ç§¯å±‚</h6><p>ä½¿ç”¨å·ç§¯æ ¸æ¥è¿›è¡Œç‰¹å¾æå–å’Œç‰¹å¾æ˜ å°„ã€‚</p><p>å½“æˆ‘ä»¬è¾“å…¥çš„å›¾åƒæ˜¯ 28 * 28 * 1 ï¼Œå®šä¹‰ä¸€ä¸ª 3 * 3 çš„å·ç§¯æ ¸æ¥å¯¹å›¾åƒè¿›è¡Œå·ç§¯æ“ä½œï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼ŒæŠŠå·ç§¯æ ¸ä¸å¯¹åº”çš„å›¾åƒåƒç´ åšä¹˜ç§¯ç„¶åæ±‚å’Œï¼‰ï¼Œå¾—åˆ°äº† 3 * 3 çš„å·ç§¯ç»“æœã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆå·ç§¯æ ¸ï¼‰æ¥è¿‡æ»¤å›¾åƒçš„å„ä¸ªå°åŒºåŸŸï¼Œä»è€Œå¾—åˆ°è¿™äº›å°åŒºåŸŸçš„ç‰¹å¾å€¼ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/conv.gif"></p><h6 id="æ¿€åŠ±å±‚"><a href="#æ¿€åŠ±å±‚" class="headerlink" title="æ¿€åŠ±å±‚"></a>æ¿€åŠ±å±‚</h6><p>æ¿€åŠ±å±‚ä¸»è¦å¯¹å·ç§¯å±‚çš„è¾“å‡ºè¿›è¡Œä¸€ä¸ªéçº¿æ€§æ˜ å°„ï¼Œå› ä¸ºå·ç§¯å±‚çš„è®¡ç®—è¿˜æ˜¯ä¸€ç§çº¿æ€§è®¡ç®—ã€‚</p><p>ä½¿ç”¨çš„æ¿€åŠ±å‡½æ•°ä¸€èˆ¬æ˜¯ ReLuã€‚</p><p>å·ç§¯å±‚å’Œæ¿€åŠ±å±‚ä¸€èˆ¬åˆå¹¶åœ¨ä¸€èµ·æˆä¸ºâ€œå·ç§¯å±‚â€ã€‚</p><h6 id="æ± åŒ–å±‚"><a href="#æ± åŒ–å±‚" class="headerlink" title="æ± åŒ–å±‚"></a>æ± åŒ–å±‚</h6><p>å…¶å®å°±æ˜¯ä¸‹é‡‡æ ·ã€‚ä¸€èˆ¬åœ¨å·ç§¯å±‚åè¾¹ï¼Œé€šè¿‡æ± åŒ–æ¥å‹ç¼©å·ç§¯å±‚è¾“å‡ºçš„ç‰¹å¾å‘é‡ï¼Œä½¿ç‰¹å¾å›¾å˜å°ï¼Œç®€åŒ–ç½‘ç»œè®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶æ”¹å–„ç»“æœã€‚</p><h6 id="å…¨è¿æ¥å±‚"><a href="#å…¨è¿æ¥å±‚" class="headerlink" title="å…¨è¿æ¥å±‚"></a>å…¨è¿æ¥å±‚</h6><p>åœ¨è¿™é‡Œçš„ä½œç”¨ç”±æå–ç‰¹å¾å˜æˆäº†åˆ†ç±»ã€‚</p><h4 id="å®ä¾‹åŒ–ç½‘ç»œ"><a href="#å®ä¾‹åŒ–ç½‘ç»œ" class="headerlink" title="å®ä¾‹åŒ–ç½‘ç»œ"></a>å®ä¾‹åŒ–ç½‘ç»œ</h4><p>å®ä¾‹åŒ–ä¸€ä¸ªç®€å•çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> layers</span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line">model = models.Sequential()</span><br><span class="line">model.add(layers.Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>, input_shape=(<span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)))</span><br><span class="line">model.add(layers.MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">model.add(layers.Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line">model.add(layers.MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">model.add(layers.Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line"></span><br><span class="line">print(model.summary())</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">_________________________________________________________________</span><br><span class="line">Layer (type)                 Output Shape              Param #</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">conv2d_1 (Conv2D)            (None, 26, 26, 32)        320</span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_1 (MaxPooling2 (None, 13, 13, 32)        0</span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_2 (Conv2D)            (None, 11, 11, 64)        18496</span><br><span class="line">_________________________________________________________________</span><br><span class="line">max_pooling2d_2 (MaxPooling2 (None, 5, 5, 64)          0</span><br><span class="line">_________________________________________________________________</span><br><span class="line">conv2d_3 (Conv2D)            (None, 3, 3, 64)          36928</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Total params: 55,744</span><br><span class="line">Trainable params: 55,744</span><br><span class="line">Non-trainable params: 0</span><br><span class="line">_________________________________________________________________</span><br><span class="line">None</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯ç½‘ç»œå±‚è®¾ç½®ï¼Œè¿™é‡Œæ˜¯ 5 å±‚ç¥ç»ç½‘ç»œã€‚</p><p>æ·»åŠ ç¬¬ä¸€ä¸ªå·ç§¯å±‚ï¼Œæ»¤æ³¢å™¨æ•°é‡æ˜¯ 32ï¼Œå·ç§¯çª—å£å¤§å°æ˜¯ 3 * 3ï¼Œstrides æŒ‡å·ç§¯æ²¿é«˜åº¦å’Œå®½åº¦çš„æ­¥å¹…ï¼Œé»˜è®¤ï¼ˆ1, 1ï¼‰ï¼Œpadding æ˜¯æŒ‡å·ç§¯çª—å£æ»‘åŠ¨çš„æ–¹å¼ï¼Œä¸¤ä¸ªå‚æ•°ï¼šé»˜è®¤ VALID å’Œ SAMEï¼ŒSAME é‡‡ç”¨çš„æ˜¯è¡¥å…¨ï¼Œå³å®½åº¦ä¸å¤Ÿæ—¶å…ˆè¡¥ 0 å†æ»‘åŠ¨ï¼ŒVALID åˆ™ç›´æ¥ä¸¢å¼ƒå¤šä½™çš„å…ƒç´ ï¼Œæ¿€åŠ±å‡½æ•°é€‰æ‹© reluã€‚å› ä¸ºæ˜¯ç¬¬ä¸€å±‚ï¼Œæ‰€ä»¥éœ€è¦è¯´æ˜è¾“å…¥æ•°æ®çš„ shapeã€‚</p><p>ç¬¬ä¸€å±‚ poolingï¼ˆæ± åŒ–ï¼Œä¸‹é‡‡æ ·ï¼‰ï¼Œå°†æ•°æ®åˆ†è¾¨ç‡é•¿å®½å„é™ä½ä¸€åŠã€‚</p><p>ç„¶åå†ç»§ç»­æ·»åŠ ï¼Œæ¥ä¸‹æ¥æŠŠæœ€åè¾“å‡ºå¼ é‡ ï¼ˆ3ï¼Œ 3ï¼Œ 64ï¼‰å±•å¹³è¾“å…¥åˆ°ä¸€ä¸ªå…¨è¿æ¥å±‚ã€‚</p><h4 id="æ·»åŠ å…¨è¿æ¥å±‚åˆ†ç±»å™¨"><a href="#æ·»åŠ å…¨è¿æ¥å±‚åˆ†ç±»å™¨" class="headerlink" title="æ·»åŠ å…¨è¿æ¥å±‚åˆ†ç±»å™¨"></a>æ·»åŠ å…¨è¿æ¥å±‚åˆ†ç±»å™¨</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model.add(layers.Flatten())</span><br><span class="line">model.add(layers.Dense(<span class="number">64</span>, activation=<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line">model.add(layers.Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ç»§ç»­æ‰“å°,æŸ¥çœ‹æ¨¡å‹ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flatten_1 (Flatten)          (None, 576)               0</span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_1 (Dense)              (None, 64)                36928</span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_2 (Dense)              (None, 10)                650</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ•°æ®å†ä¸¢å…¥åˆ†ç±»å™¨ä¹‹å‰è¢«å±•å¹³æˆäº†ä¸€ç»´ (None, 576)</p><h4 id="è®­ç»ƒç½‘ç»œ"><a href="#è®­ç»ƒç½‘ç»œ" class="headerlink" title="è®­ç»ƒç½‘ç»œ"></a>è®­ç»ƒç½‘ç»œ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> to_categorical</span><br><span class="line">(train_images, train_labels), (test_images, test_labels) = mnist.load_data()</span><br><span class="line">train_images = train_images.reshape((<span class="number">60000</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">train_images = train_images.astype(<span class="string">&#x27;float32&#x27;</span>) / <span class="number">255</span></span><br><span class="line">test_images = test_images.reshape((<span class="number">10000</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">test_images = test_images.astype(<span class="string">&#x27;float32&#x27;</span>) / <span class="number">255</span></span><br><span class="line">train_labels = to_categorical(train_labels)</span><br><span class="line">test_labels = to_categorical(test_labels)</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(optimizer=<span class="string">&#x27;rmsprop&#x27;</span>,</span><br><span class="line">              loss=<span class="string">&#x27;categorical_crossentropy&#x27;</span>,</span><br><span class="line">              metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line">model.fit(train_images, train_labels, epochs=<span class="number">5</span>, batch_size=<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">test_loss, test_acc = model.evaluate(test_images, test_labels)</span><br><span class="line"></span><br><span class="line">print(test_acc)</span><br></pre></td></tr></table></figure><p>å…ˆé€šè¿‡å¼ é‡å˜å½¢æ ¼å¼åŒ–æ•°æ®ï¼Œ ç„¶åé…ç½®å­¦ä¹ è¿‡ç¨‹ï¼Œå¼€å§‹è®­ç»ƒã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/keras-res.png"><br>æœ€åæ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°ç²¾åº¦ä¸º 0.9913 ï¼Œæ¯”ä¹‹å‰çš„ç¥ç»ç½‘ç»œç²¾åº¦é«˜äº†å¾ˆå¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keras </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel å¹¿æ’­ç³»ç»Ÿå­¦ä¹ </title>
      <link href="/2019/04/12/laravel-broadcasting/"/>
      <url>/2019/04/12/laravel-broadcasting/</url>
      
        <content type="html"><![CDATA[<p>çœ‹åˆ°å¹¿æ’­ç³»ç»Ÿï¼Œå…ˆæƒ³èµ·äº†æ›¾ç»è™è¿‡æˆ‘çš„å³æ—¶é€šè®¯ã€‚</p><p>è™½ç„¶éƒ½æ˜¯å¯¹ websocket çš„åº”ç”¨ï¼Œä½†æ˜¯å¥½åƒåˆæœ‰ç‚¹åŒºåˆ«ï¼Œè¿™é‡Œå¥½å¥½å­¦ä¹ ä¸€ä¸‹ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><p>laravel çš„å¹¿æ’­ä¸äº‹ä»¶ç´§å¯†ç›¸å…³ï¼Œå¹¿æ’­å³å¯¹äº‹ä»¶è¿›è¡Œå¹¿æ’­ï¼Œå› æ­¤åœ¨å­¦ä¹ å¹¿æ’­ä¹‹å‰ï¼Œè¦å…ˆé˜…è¯»äº‹ä»¶å’Œç›‘å¬å™¨çš„ç›¸å…³æ–‡æ¡£ã€‚</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>è€è§„çŸ©ï¼Œå…ˆæ¥çœ‹é…ç½®æ–‡ä»¶ <code>config/broadcasting.php</code> é‡Œè¾¹çš„é…ç½®é€‰é¡¹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    | Default Broadcaster</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    | This option controls the default broadcaster that will be used by the</span></span><br><span class="line"><span class="comment">    | framework when an event needs to be broadcast. You may set this to</span></span><br><span class="line"><span class="comment">    | any of the connections defined in the &quot;connections&quot; array below.</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    | Supported: &quot;pusher&quot;, &quot;redis&quot;, &quot;log&quot;, &quot;null&quot;</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;default&#x27;</span> =&gt; env(<span class="string">&#x27;BROADCAST_DRIVER&#x27;</span>, <span class="string">&#x27;null&#x27;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    | Broadcast Connections</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    | Here you may define all of the broadcast connections that will be used</span></span><br><span class="line"><span class="comment">    | to broadcast events to other systems or over websockets. Samples of</span></span><br><span class="line"><span class="comment">    | each available type of connection are provided inside this array.</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;connections&#x27;</span> =&gt; [</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;pusher&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;pusher&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;key&#x27;</span> =&gt; env(<span class="string">&#x27;PUSHER_APP_KEY&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;secret&#x27;</span> =&gt; env(<span class="string">&#x27;PUSHER_APP_SECRET&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;app_id&#x27;</span> =&gt; env(<span class="string">&#x27;PUSHER_APP_ID&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;options&#x27;</span> =&gt; [</span><br><span class="line">                <span class="string">&#x27;cluster&#x27;</span> =&gt; env(<span class="string">&#x27;PUSHER_APP_CLUSTER&#x27;</span>),</span><br><span class="line">                <span class="string">&#x27;encrypted&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">            ],</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;redis&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;redis&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;connection&#x27;</span> =&gt; <span class="string">&#x27;default&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;log&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;log&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;null&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;null&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œlaravel æä¾›äº†ä»¥ä¸Šå‡ ç§å¼€ç®±å³ç”¨çš„å¹¿æ’­é©±åŠ¨å™¨ç¨‹åºã€‚</p><p><code>env</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤çš„é©±åŠ¨ä¸º <code>log</code>ï¼Œæ„å‘³ç€å®¢æˆ·ç«¯ä¸ä¼šå—åˆ°ä»»ä½•ä¿¡æ¯ï¼Œåªæ˜¯ä¼šæŠŠè¦å¹¿æ’­çš„æ¶ˆæ¯å†™å…¥ log æ–‡ä»¶ä¸­ï¼Œè·Ÿå­¦ä¹ ç›®æ ‡ä¸ç¬¦ï¼Œå°±å…ˆä»¥ <code>pusher</code> å±•å¼€å­¦ä¹ å§ã€‚</p><p>æˆ‘ä»¬å°±ä»¥å‘å¸ƒæ–°æ–‡ç« åæ¨é€ç»™æ‰€æœ‰ç”¨æˆ·ä¸ºä¾‹ã€‚</p><h4 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h4><p>å¼€å§‹ä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆæ³¨å†Œ <code>App\Providers\BroadcastServiceProvider</code>ï¼Œåœ¨ <code>config/app.php</code> é…ç½®æ–‡ä»¶ä¸­çš„ <code>providers</code> æ•°ç»„ä¸­å–æ¶ˆå¯¹æä¾›è€…çš„æ³¨é‡Šã€‚</p><p>æ³¨å†Œ:<a href="https://dashboard.pusher.com/"> [ pusher ] </a></p><p>ç„¶åæŠŠç›¸å…³å‚æ•°é…ç½®åˆ° <code>.env</code> æ–‡ä»¶ã€‚</p><h4 id="å®‰è£…ç»„ä»¶ï¼š"><a href="#å®‰è£…ç»„ä»¶ï¼š" class="headerlink" title="å®‰è£…ç»„ä»¶ï¼š"></a>å®‰è£…ç»„ä»¶ï¼š</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">composer <span class="keyword">require</span> pusher/pusher-php-server</span><br><span class="line">npm install --save laravel-<span class="keyword">echo</span> pusher-js</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ–‡ç« æ¨¡å—ï¼ŒåŒ…å« migrateï¼Œcontrollerï¼Œmodelï¼Œview å’Œ router ç­‰å†…å®¹ã€‚</p><h4 id="æ–°å»ºäº‹ä»¶ï¼š"><a href="#æ–°å»ºäº‹ä»¶ï¼š" class="headerlink" title="æ–°å»ºäº‹ä»¶ï¼š"></a>æ–°å»ºäº‹ä»¶ï¼š</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:event NewArticleNotificationEvent</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å†…å®¹ï¼š</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Events</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Queue</span>\<span class="title">SerializesModels</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Broadcasting</span>\<span class="title">Channel</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Broadcasting</span>\<span class="title">PrivateChannel</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Events</span>\<span class="title">Dispatchable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Broadcasting</span>\<span class="title">InteractsWithSockets</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Broadcasting</span>\<span class="title">ShouldBroadcast</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Article</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewArticleNotificationEvent</span> <span class="keyword">implements</span> <span class="title">ShouldBroadcast</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">Dispatchable</span>, <span class="title">InteractsWithSockets</span>, <span class="title">SerializesModels</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$article</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new event instance.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Article <span class="variable">$article</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;article = <span class="variable">$article</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">broadcastWith</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span> =&gt; <span class="keyword">$this</span>-&gt;article-&gt;title,</span><br><span class="line">            <span class="string">&#x27;content&#x27;</span> =&gt; <span class="keyword">$this</span>-&gt;article-&gt;content,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span> =&gt; <span class="keyword">$this</span>-&gt;article-&gt;user-&gt;name</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get the channels the event should broadcast on.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Broadcasting\Channel|array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">broadcastOn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Channel(<span class="string">&#x27;articles&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="è§¦å‘äº‹ä»¶"><a href="#è§¦å‘äº‹ä»¶" class="headerlink" title="è§¦å‘äº‹ä»¶"></a>è§¦å‘äº‹ä»¶</h4><p>åœ¨ä¿å­˜æ–‡ç« çš„æ§åˆ¶å™¨ä¸­è§¦å‘äº‹ä»¶ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$data</span> = array_merge(<span class="variable">$request</span>-&gt;only([<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;content&#x27;</span>]), [<span class="string">&#x27;uid&#x27;</span> =&gt; Auth::id()]);</span><br><span class="line"><span class="variable">$article</span> = Article::create(<span class="variable">$data</span>);</span><br><span class="line">broadcast(<span class="keyword">new</span> NewArticleNotificationEvent(<span class="variable">$article</span>));</span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯ç›‘å¬"><a href="#å‰ç«¯ç›‘å¬" class="headerlink" title="å‰ç«¯ç›‘å¬"></a>å‰ç«¯ç›‘å¬</h4><p>æ–‡ç« åˆ—è¡¨ç”¨äº†vueç»„ä»¶ï¼Œåœ¨è¿™ä¸ªç»„ä»¶ä¸­è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">        &lt;table class&#x3D;&quot;table table-striped&quot;&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;ID&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;Author&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;Title&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;Content&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;Created At&lt;&#x2F;th&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">            &lt;tr v-for&#x3D;&quot;article in articles&quot;&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;article.id&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;article.user.name&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;article.title&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;article.content&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;article.created_at&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">        &lt;&#x2F;table&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    props: [&#39;articles&#39;],</span><br><span class="line">    created() &#123;</span><br><span class="line">        Echo.channel(&#39;articles&#39;).listen(&#39;NewArticleNotificationEvent&#39;, (article) &#x3D;&gt; &#123;</span><br><span class="line">            console.log(article);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>å†™å¥½åè¦åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ npm run watch-poll å®æ—¶ç¼–è¯‘æ–‡ä»¶ã€‚</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>å†™ç¯‡æ–‡ç« æµ‹è¯•ä¸€ä¸‹ï¼š<br><img src= "/img/loading.gif" data-lazy-src="new.png"></p><p><img src= "/img/loading.gif" data-lazy-src="mes.png"></p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><ul><li>ä¸éœ€è¦åˆ›å»º channel è·¯ç”±</li><li>ä¸éœ€è¦å¼€å¯é˜Ÿåˆ—ç›‘å¬</li><li>å¦‚æœæ²¡ååº”è¯·å…ˆå¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel æµ‹è¯•æ¨¡å—å­¦ä¹ </title>
      <link href="/2019/04/11/laravel-testing/"/>
      <url>/2019/04/11/laravel-testing/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸‹ larave å†…ç½®çš„æµ‹è¯•æ¨¡å—ã€‚</p><blockquote><p>å½“ä½ æƒ³æŠŠä¸€äº›ä¸œè¥¿å†™åˆ° print è¯­å¥æˆ–è€…è°ƒè¯•è¡¨è¾¾å¼ä¸­æ—¶ï¼Œåˆ«è¿™ä¹ˆåšï¼Œå°†å…¶å†™æˆä¸€ä¸ªæµ‹è¯•æ¥ä»£æ›¿ã€‚<br>       â€“Martin Fowler</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><p>æœ€å¼€å§‹çœ‹åˆ°çš„å…³äº laravel æµ‹è¯•çš„ä¿¡æ¯æ˜¯å€ŸåŠ©æ¨¡å‹å·¥å‚æ¥ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼Œä»Šå¤©æŸ¥å®Œèµ„æ–™å‘ç°ï¼Œè¿™åªæ˜¯æµ‹è¯•ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚</p><p>laravel å†…ç½®äº† PHPUnit æ¥åšæµ‹è¯•ï¼Œå¹¶ä¸”å·²ç»åšå¥½äº†é…ç½®æ–‡ä»¶ï¼Œè¿˜æä¾›äº†ä¸€äº›ä¾¿åˆ©çš„è¾…åŠ©å‡½æ•°ï¼Œå¯ä»¥æ›´ç›´è§‚çš„æµ‹è¯•ç¨‹åºã€‚</p><p>åœ¨ laravel çš„é¡¹ç›®ä¸­ï¼ŒåŒ…å«ä¸€ä¸ª tests ç›®å½•ï¼Œè¿™ä¸ªç›®å½•åˆæœ‰ä¸¤ä¸ªå­ç›®å½•ï¼š<code>Feature</code> å’Œ <code>Unit</code> åˆ†åˆ«ç”¨æ¥åšåŠŸèƒ½æµ‹è¯•å’Œå•å…ƒæµ‹è¯•ã€‚</p><p>åŠŸèƒ½æµ‹è¯•ç”¨äºæµ‹è¯•è¾ƒå¤§åŒºå—çš„ä»£ç ï¼ŒåŒ…æ‹¬è‹¥å¹²ç»„ä»¶ä¹‹é—´çš„äº¤äº’ï¼Œç”šè‡³ä¸€ä¸ªå®Œæ•´çš„ HTTP è¯·æ±‚ã€‚</p><p>å•å…ƒæµ‹è¯•ç”¨äºå°çš„ ã€ç›¸äº’éš”ç¦»çš„ä»£ç ã€‚</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>å¯ä»¥ä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ª <code>.env.testing</code> æ–‡ä»¶ï¼Œåœ¨è¿è¡Œæµ‹è¯•æˆ–æ‰§è¡Œå¸¦æœ‰    <code>--env=testing</code> å¼€å…³çš„ Artisan å‘½ä»¤æ—¶è¦†ç›– <code>.env</code> æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ã€‚</p><h4 id="åˆ›å»º-amp-è¿è¡Œæµ‹è¯•"><a href="#åˆ›å»º-amp-è¿è¡Œæµ‹è¯•" class="headerlink" title="åˆ›å»º &amp; è¿è¡Œæµ‹è¯•"></a>åˆ›å»º &amp; è¿è¡Œæµ‹è¯•</h4><p>è¿è¡Œ artisan ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ Feature ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»</span></span><br><span class="line">php artisan make:test UserTest</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ Unit ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»</span></span><br><span class="line">php artisan make:test UserTest --unit</span><br></pre></td></tr></table></figure><p>å…ˆç”Ÿæˆä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œç„¶åæ”¹é€ ä¸€ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$user</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;id&#x27;</span>,<span class="number">1</span>)-&gt;first();</span><br><span class="line"><span class="variable">$name</span> = <span class="variable">$user</span>-&gt;name;</span><br><span class="line"><span class="variable">$username</span> = ucfirst(<span class="variable">$user</span>-&gt;name);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertEquals(<span class="variable">$username</span>, <span class="variable">$name</span>);</span><br></pre></td></tr></table></figure><p>æŠŠç”¨æˆ·åé¦–så­—æ¯å¤§å†™ï¼Œç„¶ååˆ¤æ–­å’ŒåŸç”¨æˆ·åæ˜¯å¦ç›¸ç­‰ã€‚</p><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="/images/res-1.png"></p><h4 id="HTTPæµ‹è¯•"><a href="#HTTPæµ‹è¯•" class="headerlink" title="HTTPæµ‹è¯•"></a>HTTPæµ‹è¯•</h4><p>æ–°å»ºä¸€ä¸ªè·¯ç”±å’Œæ–¹æ³•ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;/user-info/&#123;id?&#125;&#x27;</span>, <span class="string">&#x27;HomeController@userInfo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">userInfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$id</span> = request(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">    <span class="variable">$user</span> = User::where(<span class="string">&#x27;id&#x27;</span>, <span class="variable">$id</span>)-&gt;first();</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$user</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ–°å»ºæµ‹è¯•"><a href="#æ–°å»ºæµ‹è¯•" class="headerlink" title="æ–°å»ºæµ‹è¯•"></a>æ–°å»ºæµ‹è¯•</h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:test HttpStatusTest</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;id&#x27;</span>,<span class="number">1</span>)-&gt;first();</span><br><span class="line"><span class="variable">$username</span> = ucfirst(<span class="variable">$user</span>-&gt;name);</span><br><span class="line"></span><br><span class="line"><span class="variable">$response</span> = <span class="keyword">$this</span>-&gt;get(<span class="string">&#x27;/user-info/1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$response</span>-&gt;assertStatus(<span class="number">200</span>)</span><br><span class="line">-&gt;assertJson([</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>=&gt; <span class="string">&#x27;wu&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>=&gt; <span class="string">&#x27;yf-wu@qq.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email_verified_at&#x27;</span>=&gt;<span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;created_at&#x27;</span>=&gt; <span class="string">&#x27;2019-04-09 07:36:52&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;updated_at&#x27;</span>=&gt; <span class="string">&#x27;2019-04-09 07:36:52&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h6 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h6><p>å‘ç°æ¥å£éœ€è¦ç™»å½•ï¼Œæ‰€ä»¥ä¼šè¢«æ‹¦æˆªï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/login.png"></p><p>æ‰€ä»¥éœ€è¦å…ˆæ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ï¼Œå¯ä»¥ä½¿ç”¨ï¼š<code>Auth::loginUsingId(1);</code> ä½¿ id ä¸º 1 çš„ç”¨æˆ·å¼ºåˆ¶ç™»å½•ã€‚</p><p>å†æ¬¡è¿è¡Œï¼Œç»“æœ okã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/ok.png"></p><h4 id="æ•°æ®åº“æµ‹è¯•"><a href="#æ•°æ®åº“æµ‹è¯•" class="headerlink" title="æ•°æ®åº“æµ‹è¯•"></a>æ•°æ®åº“æµ‹è¯•</h4><p>æ•°æ®åº“æµ‹è¯•åŠŸèƒ½ç‚¹æ›´å¤šï¼Œå¯ä»¥éªŒè¯è¡¨ä¸­æ˜¯å¦å­˜åœ¨æŸæ¡æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ç”Ÿæˆæµ‹è¯•æ•°æ®ç­‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;assertDatabaseHas(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;sally@example.com&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>assertDatabaseMissing</code> å¸®åŠ©ç¨‹åºæ–­è¨€æ•°æ®åº“ä¸­ä¸å­˜åœ¨æ•°æ®ã€‚</p><h6 id="ç”Ÿæˆæ¨¡å‹å·¥å‚"><a href="#ç”Ÿæˆæ¨¡å‹å·¥å‚" class="headerlink" title="ç”Ÿæˆæ¨¡å‹å·¥å‚"></a>ç”Ÿæˆæ¨¡å‹å·¥å‚</h6><p>è¿è¡Œå‘½ä»¤ç”Ÿæˆæ¨¡å‹å·¥å‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:factory PostFactory</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®çš„ <code>database\factories</code> ç›®å½•ä¸­ï¼Œå·²ç»é¢„å…ˆç”Ÿæˆäº†ä¸€ä¸ª <code>UserFactory</code>:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$factory</span>-&gt;define(User::class, <span class="function"><span class="keyword">function</span> (<span class="params">Faker <span class="variable">$faker</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$faker</span>-&gt;name,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$faker</span>-&gt;unique()-&gt;safeEmail,</span><br><span class="line">        <span class="string">&#x27;email_verified_at&#x27;</span> =&gt; now(),</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi&#x27;</span>, <span class="comment">// password</span></span><br><span class="line">        <span class="string">&#x27;remember_token&#x27;</span> =&gt; Str::random(<span class="number">10</span>),</span><br><span class="line">    ];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ”¹é€ ä¹‹å‰çš„ <code>TestUser</code> æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$user</span> = factory(User::class)-&gt;create([<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;m@m-finder.com&#x27;</span>]);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;assertDatabaseHas(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;m@m-finder.com&#x27;</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çŠ¶æ€okã€‚</p><p>æ›´å¤šæ“ä½œè¿˜æ˜¯è¦å‚è€ƒ: <a href="http://www.phpunit.cn/"> [ PHPUnit ] </a></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹  -- åŸºäº keras çš„æ‰‹å†™æ•°å­—è¯†åˆ«ç¤ºä¾‹</title>
      <link href="/2019/04/10/keras-mnist/"/>
      <url>/2019/04/10/keras-mnist/</url>
      
        <content type="html"><![CDATA[<p>MNIST æ˜¯ keras ä¸­ä¸€ä¸ªå…¥é—¨çº§çš„è®¡ç®—æœºè§†è§‰æ•°æ®é›†ï¼Œè¿™ä¸ªæ•°æ®é›†åŒ…å«å„ç§å„æ ·çš„æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼Œå…¶ä¸­åŒ…å« 60000 å¼ è®­ç»ƒå›¾åƒå’Œ 10000 å¼ æµ‹è¯•å›¾åƒã€‚</p><p>æ˜¯è§£å†³æ‰‹å†™æ•°å­—åˆ†ç±»é—®é¢˜çš„ç»å…¸æ•°æ®é›†ï¼Œå¯ä»¥çœ‹åšæ˜¯æ·±åº¦å­¦ä¹ çš„ â€˜Hello Worldâ€™ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/keras.jpg"></p><span id="more"></span><h4 id="ä¸‹è½½æ•°æ®"><a href="#ä¸‹è½½æ•°æ®" class="headerlink" title="ä¸‹è½½æ•°æ®"></a>ä¸‹è½½æ•°æ®</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"></span><br><span class="line">(train_images, train_labels), (test_images, test_labels) = mnist.load_data()</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤è¡Œä»£ç éœ€è¦å…ˆè¿è¡Œï¼Œä¸‹è½½æ•°æ®é›†ã€‚</p><p>ä¸‹è½½è¿‡ç¨‹ä¼šå¤±è´¥ï¼Œå¤šè¯•å‡ æ¬¡ï¼Œä¸éœ€è¦ç¿»å¢™ã€‚</p><p><code>train_images</code> å’Œ  <code>train_labels</code> ä¸ºè®­ç»ƒé›†ï¼Œ åˆ†åˆ«ä¸ºå›¾ç‰‡æ•°æ®å’Œæ ‡ç­¾æ•°æ®ã€‚æ¨¡å‹å°†ä»è¿™äº›æ•°æ®ä¸­è¿›è¡Œå­¦ä¹ ã€‚</p><p>ç„¶ååœ¨æµ‹è¯•é›†ï¼š <code>test_images</code> å’Œ <code>test_labels</code> ä¸Šå¯¹æ¨¡å‹è¿›è¡Œæµ‹è¯•ã€‚</p><h4 id="æ„å»ºç½‘ç»œ"><a href="#æ„å»ºç½‘ç»œ" class="headerlink" title="æ„å»ºç½‘ç»œ"></a>æ„å»ºç½‘ç»œ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> layers</span><br><span class="line">network = models.Sequential()</span><br><span class="line">network.add(layers.Dense(<span class="number">512</span>, activation=<span class="string">&#x27;relu&#x27;</span>, input_shape=(<span class="number">28</span> * <span class="number">28</span>,)))</span><br><span class="line">network.add(layers.Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ç¥ç»ç½‘ç»œçš„æ ¸å¿ƒç»„ä»¶æ˜¯å±‚ï¼ˆlayerï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æ•°æ®å¤„ç†æ¨¡å—ï¼Œå¯ä»¥å°†å®ƒçœ‹æˆæ•°æ®è¿‡æ»¤å™¨ã€‚<br>å¤§å¤šæ•°æ·±åº¦å­¦ä¹ éƒ½æ˜¯å°†ç®€å•çš„å±‚é“¾æ¥èµ·æ¥ï¼Œä»è€Œå®ç°æ¸è¿›å¼çš„æ•°æ®è’¸é¦ï¼ˆdata distillationï¼‰ã€‚æ·±åº¦å­¦ä¹ æ¨¡å‹å°±åƒæ˜¯æ•°æ®å¤„ç†çš„ç­›å­ï¼ŒåŒ…å«ä¸€ç³»åˆ—è¶Šæ¥è¶Šç²¾ç»†çš„æ•°æ®è¿‡æ»¤å™¨ï¼ˆå³å±‚ï¼‰ã€‚</p><h4 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">network.<span class="built_in">compile</span>(optimizer=<span class="string">&#x27;rmsprop&#x27;</span>,</span><br><span class="line">                loss=<span class="string">&#x27;categorical_crossentropy&#x27;</span>,</span><br><span class="line">                metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br></pre></td></tr></table></figure><p>loss: æŸå¤±å‡½æ•°ï¼Œç½‘ç»œå¦‚ä½•è¡¡é‡åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„æ€§èƒ½ï¼Œå³ç½‘ç»œå¦‚ä½•æœç€æ­£ç¡®çš„æ–¹å‘å‰è¿›ã€‚<br>optimizer: ä¼˜åŒ–å™¨ï¼ŒåŸºäºè®­ç»ƒæ•°æ®å’ŒæŸå¤±å‡½æ•°æ¥æ›´æ–°ç½‘ç»œçš„æœºåˆ¶<br>metrucs: ç›‘æ§æŒ‡æ ‡ï¼Œæœ¬ä¾‹åªå…³å¿ƒç²¾åº¦ï¼Œå³æ­£ç¡®åˆ†ç±»çš„å›¾åƒæ‰€å çš„æ¯”ä¾‹ã€‚</p><h4 id="å‡†å¤‡å›¾åƒæ•°æ®"><a href="#å‡†å¤‡å›¾åƒæ•°æ®" class="headerlink" title="å‡†å¤‡å›¾åƒæ•°æ®"></a>å‡†å¤‡å›¾åƒæ•°æ®</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_images = train_images.reshape((<span class="number">60000</span>, <span class="number">28</span> * <span class="number">28</span>))</span><br><span class="line">train_images = train_images.astype(<span class="string">&#x27;float32&#x27;</span>) / <span class="number">255</span></span><br><span class="line">test_images = test_images.reshape((<span class="number">10000</span>, <span class="number">28</span> * <span class="number">28</span>))</span><br><span class="line">test_images = test_images.astype(<span class="string">&#x27;float32&#x27;</span>) / <span class="number">255</span></span><br></pre></td></tr></table></figure><p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢æ•°æ®æ ¼å¼ï¼Œè®©ç½‘ç»œèƒ½å¤Ÿå¤„ç†ã€‚<br>è®­ç»ƒå›¾åƒä¿å­˜åœ¨ä¸€ä¸ªuint8ç±»å‹çš„æ•°ç»„ä¸­ï¼Œå…¶å½¢çŠ¶ä¸º (60000, 28, 28)ï¼Œå–å€¼åŒºé—´ä¸º [0, 255]ã€‚æˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢æˆä¸€ä¸ª float32æ•°ç»„ï¼Œå½¢çŠ¶ä¸º (60000, 28 * 28)ï¼Œå–å€¼èŒƒå›´ä¸º 0 ~ 1ã€‚</p><h4 id="å‡†å¤‡æ ‡ç­¾"><a href="#å‡†å¤‡æ ‡ç­¾" class="headerlink" title="å‡†å¤‡æ ‡ç­¾"></a>å‡†å¤‡æ ‡ç­¾</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> to_categorical</span><br><span class="line">train_labels = to_categorical(train_labels)</span><br><span class="line">test_labels = to_categorical(test_labels)</span><br></pre></td></tr></table></figure><h4 id="å¼€å§‹è®­ç»ƒ"><a href="#å¼€å§‹è®­ç»ƒ" class="headerlink" title="å¼€å§‹è®­ç»ƒ"></a>å¼€å§‹è®­ç»ƒ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">network.fit(train_images, train_labels, epochs=<span class="number">5</span>, batch_size=<span class="number">128</span>)</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•æ•°æ®"><a href="#æµ‹è¯•æ•°æ®" class="headerlink" title="æµ‹è¯•æ•°æ®"></a>æµ‹è¯•æ•°æ®</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test_loss, test_acc = network.evaluate(test_images, test_labels)</span><br><span class="line">print(<span class="string">&#x27;test_acc:&#x27;</span>, test_acc)</span><br></pre></td></tr></table></figure><p>æµ‹è¯•é›†ç²¾åº¦ä¸º97.98%ï¼Œæ¯”è®­ç»ƒé›†ç²¾åº¦ä½ä¸å°‘ã€‚</p><p>è®­ç»ƒç²¾åº¦å’Œæµ‹è¯•ç²¾åº¦ä¹‹é—´çš„è¿™ç§å·®è·æ˜¯è¿‡æ‹Ÿåˆï¼ˆoverfitï¼‰é€ æˆçš„ã€‚</p><p>è¿™äº›ä¸œè¥¿æ¥ä¸‹æ¥å†ç»§ç»­å­¦ä¹ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keras </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel é˜Ÿåˆ—å­¦ä¹ </title>
      <link href="/2019/04/09/laravel-queues/"/>
      <url>/2019/04/09/laravel-queues/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸‹ laravel çš„é˜Ÿåˆ—ç³»ç»Ÿã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><p>é˜Ÿåˆ—çš„ç›®çš„æ˜¯å°†è€—æ—¶çš„ä»»åŠ¡å»¶æ—¶å¤„ç†ï¼Œæ¯”å¦‚å‘é€é‚®ä»¶ï¼Œä»è€Œå¤§å¹…åº¦ç¼©çŸ­ Web è¯·æ±‚å’Œç›¸åº”çš„æ—¶é—´ã€‚</p><p>å¸¸ç”¨çš„é˜Ÿåˆ—åå°æœ‰ï¼š Beanstalkï¼ŒAmazon SQSï¼ŒRedis ç­‰ã€‚</p><span id="more"></span><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>laravel ä¸ºå¤šç§é˜Ÿåˆ—æœåŠ¡åšäº†ç»Ÿä¸€çš„APIï¼Œåœ¨é…ç½®æ–‡ä»¶ <code>config/queue.php</code> ä¸­å¯ä»¥æ‰¾åˆ°æ¯ç§é˜Ÿåˆ—é©±åŠ¨çš„é…ç½®ã€‚</p><p>å…¶ä¸­æ¯ç§é©±åŠ¨éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ queue å±æ€§ï¼Œç”¨æ¥å­˜æ”¾ä½¿ç”¨æ—¶æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰é˜Ÿåˆ—çš„ä»»åŠ¡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†å‘åˆ°é»˜è®¤é˜Ÿåˆ—</span></span><br><span class="line">Job::dispatch();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†å‘åˆ° emails é˜Ÿåˆ—</span></span><br><span class="line">Job::dispatch()-&gt;onQueue(<span class="string">&#x27;emails&#x27;</span>);</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒ‡å®šé©±åŠ¨ï¼Œè€ç‰ˆæœ¬ä¸­ä¸º <code>QUEUE_DRIVER</code>ï¼Œæ–°ç‰ˆæœ¬ä¸­ä¸º<code>QUEUE_CONNECTION</code> , é©±åŠ¨é»˜è®¤ä¸º <code>sync</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ¬åœ°çš„åŒæ­¥é©±åŠ¨ï¼Œæ–¹ä¾¿è°ƒè¯•é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ã€‚</p><p>å…ˆä»¥ redis ä¸ºä¾‹åšä¸€ä¸ªé‚®ä»¶å‘é€é˜Ÿåˆ—ã€‚</p><p>å› ä¸º laravel çš„ redis é»˜è®¤ä½¿ç”¨äº† predisï¼Œæ‰€ä»¥å…ˆè£…ä¸‹æ‰©å±•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require &#39;predis&#x2F;predis&#39;</span><br></pre></td></tr></table></figure><p>é‚®ä»¶é…ç½®ï¼Œæœ€åä¸¤é¡¹æ˜¯æ‰‹åŠ¨æ·»åŠ çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MAIL_DRIVER&#x3D;smtp</span><br><span class="line">MAIL_HOST&#x3D;smtp.mxhichina.com</span><br><span class="line">MAIL_PORT&#x3D;25</span><br><span class="line">MAIL_USERNAME&#x3D;m@m-finder.com</span><br><span class="line">MAIL_PASSWORD&#x3D;xxxxxx</span><br><span class="line">MAIL_ENCRYPTION&#x3D;null</span><br><span class="line">MAIL_FROM_NAME&#x3D;M-finder</span><br><span class="line">MAIL_FROM_ADDRESS&#x3D;m@m-finder.com</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆä»»åŠ¡ç±»"><a href="#ç”Ÿæˆä»»åŠ¡ç±»" class="headerlink" title="ç”Ÿæˆä»»åŠ¡ç±»"></a>ç”Ÿæˆä»»åŠ¡ç±»</h4><p>å‘½ä»¤è¡Œæ‰§è¡Œï¼š<code>php artisan make:job EmailJob</code>ï¼Œè¯¥å‘½ä»¤ä¼šåœ¨ <code>app/jobs</code> ä¸‹è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ã€‚</p><p>åœ¨ä»»åŠ¡ç±»ä¸­å‘é€é‚®ä»¶ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$email</span> = <span class="keyword">$this</span>-&gt;email;</span><br><span class="line">    <span class="variable">$content</span> = <span class="string">&#x27;è¿™æ˜¯ä¸€å°æ¥è‡ªLaravelçš„é˜Ÿåˆ—æµ‹è¯•é‚®ä»¶.&#x27;</span>;</span><br><span class="line">    Mail::raw(<span class="variable">$content</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$message</span></span>) <span class="title">use</span> (<span class="params"><span class="variable">$email</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$message</span>-&gt;subject(<span class="string">&#x27;[ æµ‹è¯• ] æµ‹è¯•é‚®ä»¶SendMail - &#x27;</span> . date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>));</span><br><span class="line">        <span class="variable">$message</span>-&gt;to(<span class="variable">$email</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡è°ƒåº¦"><a href="#ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ä»»åŠ¡è°ƒåº¦"></a>ä»»åŠ¡è°ƒåº¦</h4><p>ä¹‹å‰å¼„äº†ç™»å½•äº‹ä»¶å’Œç›‘å¬ï¼Œå°±åœ¨ç›‘å¬é‡Œå»è§¦å‘å§ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EmailJob::dispatch(<span class="variable">$guard</span>-&gt;user)-&gt;onQueue(<span class="string">&#x27;emails&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="å¼€å¯é˜Ÿåˆ—"><a href="#å¼€å¯é˜Ÿåˆ—" class="headerlink" title="å¼€å¯é˜Ÿåˆ—"></a>å¼€å¯é˜Ÿåˆ—</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan queue:work --tries=<span class="number">3</span> --timeout=<span class="number">30</span> --queue=emails </span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°ç™»å½•è§¦å‘ä»»åŠ¡ã€‚<br>å¯ä»¥çœ‹åˆ°é‚®ç®±å·²ç»æœ‰äº†æç¤ºï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="/images/email.png" alt="é‚®ä»¶é€šçŸ¥"></p><p>é‚®ä»¶å·²ç»æˆåŠŸå‘å‡ºï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨å®é™…çš„éœ€æ±‚ä¸­ä½¿ç”¨äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel äº‹ä»¶ç³»ç»Ÿå­¦ä¹ </title>
      <link href="/2019/04/03/laravel-events/"/>
      <url>/2019/04/03/laravel-events/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸‹ laravel çš„äº‹ä»¶ç³»ç»Ÿã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><p>Laravel çš„äº‹ä»¶æä¾›äº†ä¸€ä¸ªç®€å•çš„è§‚å¯Ÿè€…å®ç°ï¼Œèƒ½å¤Ÿè®¢é˜…å’Œç›‘å¬åº”ç”¨ä¸­å‘ç”Ÿçš„å„ç§äº‹ä»¶ã€‚</p><p>å…ˆä»¥ä¸€ä¸ªç™»é™†æ—¥å¿—æ¥ä½œä¸ºä¾‹å­å¼€å§‹äº‹ä»¶çš„å­¦ä¹ å§ã€‚</p><h4 id="æ³¨å†Œäº‹ä»¶-amp-amp-ç›‘å¬å™¨"><a href="#æ³¨å†Œäº‹ä»¶-amp-amp-ç›‘å¬å™¨" class="headerlink" title="æ³¨å†Œäº‹ä»¶ &amp;&amp; ç›‘å¬å™¨"></a>æ³¨å†Œäº‹ä»¶ &amp;&amp; ç›‘å¬å™¨</h4><p>åœ¨ app\Providers\EventServiceProvider.php ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$listen</span> = [</span><br><span class="line">    Registered::class =&gt; [</span><br><span class="line">        SendEmailVerificationNotification::class,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;App\Events\LoginEvent&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LoginListener&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œå‘½ä»¤ï¼Œç”Ÿæˆäº‹ä»¶å’Œç›‘å¬å™¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan event:generate</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æŸåï¼Œäº‹ä»¶å’Œç›‘å¬å™¨éƒ½ä¼šè¢«è‡ªåŠ¨åˆ›å»ºå¥½ã€‚<br><img src= "/img/loading.gif" data-lazy-src="laravel-events/new-event.png"></p><p>åœ¨ç›‘å¬ä¸­æ‰“ä¸ª logï¼š info(â€˜user login eventâ€™)</p><p>ç„¶åæ‰¾ä¸ªæ§åˆ¶å™¨è§¦å‘äº‹ä»¶ã€‚</p><p><code>event(new LoginEvent());</code></p><p>å¯ä»¥çœ‹åˆ° log æ–‡ä»¶ä¸­æœ‰ä¸€æ¡æ–°çºªå½•ï¼š</p><blockquote><p>[2019-03-27 08:16:21] local.INFO: user login event</p></blockquote><p>èµ°åˆ°è¿™é‡Œï¼Œç†è®ºä¸Šå·²ç»å¯ä»¥åšå¾ˆå¤šäº‹æƒ…äº†ï¼Œä½†æ˜¯å¯¹äºç™»å½•æ—¥å¿—æ¥è¯´ï¼Œè¿™æ ·å¤„ç†å¹¶ä¸å®Œç¾ï¼Œå› ä¸º larave å†…ç½®å·²ç»å†™å¥½äº†ç™»å½•äº‹ä»¶ï¼Œåªéœ€è¦å»è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><h4 id="æ”¹é€ äº‹ä»¶"><a href="#æ”¹é€ äº‹ä»¶" class="headerlink" title="æ”¹é€ äº‹ä»¶"></a>æ”¹é€ äº‹ä»¶</h4><p>åœ¨èº«ä»½éªŒè¯å¤„ç†è¿‡ç¨‹ä¸­ Laravel å¼•å‘äº†å¤šç§äº‹ä»¶ ã€‚<br>å¯ä»¥åœ¨ EventServiceProvider ä¸­é™„ç€è¿™äº›äº‹ä»¶çš„ç›‘å¬å™¨ã€‚<br><a href="https://laravel.com/docs/5.8/authentication#events">æ–‡æ¡£</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº”ç”¨çš„äº‹ä»¶ç›‘å¬å™¨æ˜ å°„ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@var</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$listen</span> = [</span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Registered&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogRegisteredUser&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Attempting&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogAuthenticationAttempt&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Authenticated&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogAuthenticated&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Login&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogSuccessfulLogin&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Failed&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogFailedLogin&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Logout&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogSuccessfulLogout&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\Lockout&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogLockout&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;Illuminate\Auth\Events\PasswordReset&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;App\Listeners\LogPasswordReset&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±åªä½¿ç”¨ç™»å½•äº‹ä»¶ã€‚<br>ä¿®æ”¹ EventServiceProviderï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Illuminate\Auth\Events\Login&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;App\Listeners\LoginListener&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å†æ”¹æ”¹ listenerï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$guard</span></span>) </span>&#123;</span><br><span class="line">    info(<span class="string">&#x27;user login event&#x27;</span>, [<span class="string">&#x27;username&#x27;</span>=&gt;<span class="variable">$guard</span>-&gt;user-&gt;name]);</span><br><span class="line">    dd(<span class="variable">$guard</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§¦å‘äº‹ä»¶"><a href="#è§¦å‘äº‹ä»¶" class="headerlink" title="è§¦å‘äº‹ä»¶"></a>è§¦å‘äº‹ä»¶</h4><p>é€€å‡ºå¸å·é‡æ–°ç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/out.png" alt="è¾“å‡ºç»“æœ"></p><p>å¯ä»¥å†ä¼˜åŒ–ä¸€ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$guard</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$log</span> = [</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$guard</span>-&gt;user-&gt;name,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>=&gt; <span class="variable">$guard</span>-&gt;user-&gt;email,</span><br><span class="line">        <span class="string">&#x27;ip&#x27;</span>=&gt; \Request::getClientIp(<span class="literal">true</span>),</span><br><span class="line">        <span class="string">&#x27;datetime&#x27;</span> =&gt; Carbon::now()</span><br><span class="line">    ];</span><br><span class="line">    info(<span class="string">&#x27;user login event&#x27;</span>, <span class="variable">$log</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥é€‰ä¸­ç”¨ log å­˜å‚¨è¿˜æ˜¯ç”¨ mysql å­˜å‚¨ã€‚</p><p>äº‹ä»¶çš„å­¦ä¹ å°±æ˜¯è¿™äº›äº†ï¼Œå¹³æ—¶å¼€å‘è¦ç»å¸¸ä½¿ç”¨é¿å…é—å¿˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laradock ä¸­ php5.6 è¿æ¥ mysql æŠ¥é”™è§£å†³</title>
      <link href="/2019/03/21/laradock-php-5-6-connect-mysql/"/>
      <url>/2019/03/21/laradock-php-5-6-connect-mysql/</url>
      
        <content type="html"><![CDATA[<p>laradock ä¸­ php 5.6 è¿æ¥ mysql æŠ¥é”™çš„è§£å†³æ–¹æ³•ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laradock.png"></p><span id="more"></span><p>ä¹‹å‰å¼„çš„æ˜¯é»˜è®¤ç‰ˆæœ¬çš„ php 7.2 å’Œ mysql 8ï¼Œé…ç½®å¥½ä»¥åä¸€ç›´éƒ½èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æœ€è¿‘å› ä¸ºéœ€è¦åˆ‡æ¢ php ç‰ˆæœ¬ï¼Œçªç„¶å‘ç°åˆ‡æ¢åè¿æ¥ mysql æ—¶æ— æ³•è¯†åˆ« hostã€‚</p><p>emmmmâ€¦â€¦ï¼Œæœ€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯ php çš„é”…ï¼Œå„ç§é‡æ–° buildï¼Œæ— æœï¼Œæœ€ååœ¨ github ä¸Šæ‰¾åˆ°åˆ«äººå‘å‡ºæ¥çš„è§£å†³åŠæ³•ï¼š</p><blockquote><p>rm -rf ~/.laradock/data/mysql<br>åˆ é™¤è€ç‰ˆæœ¬çš„æ•°æ®</p><p>docker-compose build mysql<br>é‡æ–°æ„å»º mysql</p><p>è¿›å…¥ mysql å®¹å™¨<br>mysql -uroot -p<br>root<br>ALTER USER root IDENTIFIED WITH mysql_native_password BY â€˜rootâ€™;<br>exit;</p></blockquote><p>åˆ°è¿™é‡Œä¹Ÿå°±å¯ä»¥äº†ã€‚</p><p>æœ‰è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸º 8 å’Œ 5.7 çš„é…ç½®ä¸ä¸€æ ·ï¼Œä¸æ¸…æ‰è€æ•°æ®çš„è¯ä¼šå¼•èµ·æŠ¥é”™ï¼Œä¸€æœ‰è¯·æ±‚å»è¿æ¥ mysql é©¬ä¸Šå°±å®•æœºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel æœåŠ¡å®¹å™¨</title>
      <link href="/2019/03/15/laravel-container/"/>
      <url>/2019/03/15/laravel-container/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Laravel ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°æ¡†æ¶è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šé€šè¿‡åˆ›å»ºåº”ç”¨å®ä¾‹æ¥å®Œæˆå¾ˆå¤šäº‹æƒ…ï¼Œè¿™ä¸ªåº”ç”¨å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ï¼ŒæœåŠ¡å®¹å™¨ã€‚</p><p>Laravel çš„æœåŠ¡å®¹å™¨ï¼Œæ˜¯ç”¨äºç®¡ç†ç±»çš„ä¾èµ–å’Œæ‰§è¡Œä¾èµ–æ³¨å…¥çš„å·¥å…·ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><h4 id="ä¾èµ–æ³¨å…¥-DI"><a href="#ä¾èµ–æ³¨å…¥-DI" class="headerlink" title="ä¾èµ–æ³¨å…¥ DI"></a>ä¾èµ–æ³¨å…¥ DI</h4><p>å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†ç±»çš„ä¾èµ–é€šè¿‡å‚æ•°æˆ–å…¶ä»–æ–¹å¼æ³¨å…¥ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">interface Storage&#123;</span><br><span class="line">  public function set($key, $value);</span><br><span class="line">  public function get($key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SessionStorage implements Storage&#123;</span><br><span class="line">    function __construct($cookieName&#x3D;&#39;PHPSESSID&#39;)&#123;</span><br><span class="line">        session_name($cookieName);</span><br><span class="line">        session_start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function set($key, $value)&#123;</span><br><span class="line">        $_SESSION[$key] &#x3D; $value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function get($key)&#123;</span><br><span class="line">        return $_SESSION[$key];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class User&#123;</span><br><span class="line">  private $storage;</span><br><span class="line"></span><br><span class="line">  function __construct(Storage $storage)&#123;</span><br><span class="line">      $this-&gt;storage &#x3D; $storage;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function setLanguage($language)&#123;</span><br><span class="line">    $this-&gt;storage-&gt;set(&#39;language&#39;, $language);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$storage &#x3D; new SessionStorage(&#39;SESSION_ID&#39;);</span><br><span class="line">$user &#x3D; new User($storage);</span><br></pre></td></tr></table></figure><p><code>ä¾èµ–æ³¨å…¥</code> å¹¶ä¸å±€é™äºæ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾å€¼æ–¹æ³•æ³¨å…¥ï¼Œæˆ–è€…ç±»æˆå‘˜å˜é‡æ–¹å¼ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥é€‚ç”¨äºå¿…è¦çš„ä¾èµ–ï¼Œè®¾å€¼æ³¨å…¥é€‚ç”¨äºå¯é€‰ä¾èµ–ï¼Œæ¯”å¦‚é¡¹ç›®éœ€è¦ä¸€ä¸ªç¼“å­˜åŠŸèƒ½çš„å®ç°ã€‚<br>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦æ”¹ç”¨ Redis æˆ–è€… MongoDB æ¥å­˜å‚¨æ•°æ®ï¼Œåªéœ€è¦ç»§æ‰¿å¹¶å®ç° Storage æ¥å£ï¼Œç„¶ååœ¨å¤–éƒ¨å°±å¯ä»¥å¾ˆè½»æ¾çš„åˆ‡æ¢æœåŠ¡äº†ã€‚</p><h4 id="ä¾èµ–æ³¨å…¥å®¹å™¨-IOC"><a href="#ä¾èµ–æ³¨å…¥å®¹å™¨-IOC" class="headerlink" title="ä¾èµ–æ³¨å…¥å®¹å™¨ IOC"></a>ä¾èµ–æ³¨å…¥å®¹å™¨ IOC</h4><p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œç”¨ä¸Šè¾¹çš„ä¾èµ–æ³¨å…¥æ–¹å¼è¿˜æ˜¯å¾ˆç´¯çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œä¹Ÿå¯ä»¥å«æ§åˆ¶åè½¬ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œä¾èµ–æ³¨å…¥å®¹å™¨å°±æ˜¯å°†ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»ç”±ç¨‹åºå†…éƒ¨æåˆ°å¤–éƒ¨å®¹å™¨æ¥ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯å°†ä¾èµ–çš„é…ç½®å’Œä½¿ç”¨åˆ†å¼€ï¼ŒåŸæœ¬æ˜¯ç¨‹åºæ§åˆ¶æ‰§è¡Œæµç¨‹ï¼Œç°åœ¨ç¨‹åºåå€’æˆäº†è¢«æ§åˆ¶çš„å¯¹è±¡ï¼Œä¹Ÿå°±å½¢æˆäº†æ§åˆ¶åè½¬ã€‚</p><p>é€šå¸¸ç”¨äºç®¡ç†å¤§é‡ä¾èµ–ç»„ä»¶çš„å®ä¾‹ã€‚æ¯”å¦‚ä¸€ä¸ªæ¡†æ¶ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå®¹å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Container</span><br><span class="line">&#123;</span><br><span class="line">    public function getStorage()</span><br><span class="line">    &#123;</span><br><span class="line">        return new SessionStorage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getUser()</span><br><span class="line">    &#123;</span><br><span class="line">        return new User($this-&gt;getStorage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; æ›´æ”¹å®ä¾‹åŒ–æ–¹å¼</span><br><span class="line">$container &#x3D; new Container();</span><br><span class="line">$user &#x3D; $container-&gt;getUser();</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å®¹å™¨ <code>getUser</code> æ–¹æ³•ï¼Œæ—¢å¯ä»¥è·å–åˆ° User å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒå®ƒæ˜¯æ€ä¹ˆåˆ›å»ºå‡ºæ¥çš„ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ä¸ªå®¹å™¨è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼ŒStorage çš„å®ä¾‹åŒ–è¿˜æ˜¯ç¡¬ç¼–ç ï¼Œå¦‚æœè¦åˆ‡æ¢å…¶ä»–æœåŠ¡ï¼Œåªèƒ½é€šè¿‡æ”¹ä»£ç çš„æ–¹å¼ã€‚</p><p>å¯¹æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡å‡çº§å®¹å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">class Container</span><br><span class="line">&#123;</span><br><span class="line">    protected $binds;</span><br><span class="line"></span><br><span class="line">    protected $instances;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ç»‘å®š</span><br><span class="line">    public function bind($abstract, $concrete)</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦ä¸ºåŒ¿åå‡½æ•°</span><br><span class="line">        if ($concrete instanceof Closure) &#123;</span><br><span class="line">            $this-&gt;binds[$abstract] &#x3D; $concrete;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            $this-&gt;instances[$abstract] &#x3D; $concrete;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å®ä¾‹åŒ–</span><br><span class="line">    public function make($abstract, $parameters &#x3D; [])</span><br><span class="line">    &#123;</span><br><span class="line">        if (isset($this-&gt;instances[$abstract])) &#123;</span><br><span class="line">            return $this-&gt;instances[$abstract];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        array_unshift($parameters, $this);</span><br><span class="line"></span><br><span class="line">        return call_user_func_array($this-&gt;binds[$abstract], $parameters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$container &#x3D; new Container;</span><br><span class="line"></span><br><span class="line">$container-&gt;bind(&#39;Storage&#39;, function($container)&#123;</span><br><span class="line">    return new SessionStorage;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$container-&gt;bind(&#39;User&#39;,function($container,$module)&#123;</span><br><span class="line">    return new User($container-&gt;make($module));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$user &#x3D; $container-&gt;make(&#39;User&#39;,[&#39;Storage&#39;]);</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç±»ä¼¼äº laravel çš„æœåŠ¡å®¹å™¨å°±å¥½äº†ï¼Œå½“ç„¶ larave çš„æœåŠ¡å®¹å™¨æ¯”è¿™ä¸ªè¦å¤æ‚çš„å¤šã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œlaravel çš„æœåŠ¡å®¹å™¨æœ‰ä¸¤å¤§åŠŸèƒ½ï¼š</p><ul><li>æ³¨å†ŒåŸºç¡€æœåŠ¡</li><li>ç®¡ç†éœ€è¦å®ä¾‹åŒ–çš„ç±»åŠå…¶ä¾èµ–</li></ul><h4 id="Laravel-æœåŠ¡å®¹å™¨çš„ä½¿ç”¨æ–¹æ³•"><a href="#Laravel-æœåŠ¡å®¹å™¨çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="Laravel æœåŠ¡å®¹å™¨çš„ä½¿ç”¨æ–¹æ³•"></a>Laravel æœåŠ¡å®¹å™¨çš„ä½¿ç”¨æ–¹æ³•</h4><p>laravel æœåŠ¡å®¹å™¨åœ¨ä½¿ç”¨æ—¶ä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šä½¿ç”¨ä¹‹å‰è¿›è¡Œç»‘å®šï¼ˆbindï¼‰å®Œæˆå°†å®ç°ç»‘å®šåˆ°æ¥å£ï¼›ä½¿ç”¨æ—¶å¯¹é€šè¿‡æ¥å£è§£æï¼ˆmakeï¼‰å‡ºæœåŠ¡ã€‚</p><p>laravel å†…ç½®å¤šç§ä¸åŒçš„ç»‘å®šæ–¹æ³•ä»¥ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>bind ç®€å•ç»‘å®š</li><li>singleton å•ä¾‹ç»‘å®š</li><li>instance å®ä¾‹ç»‘å®š</li><li>contextual-binding ä¸Šä¸‹æ–‡ç»‘å®š</li><li>è¿˜æœ‰å¥½å‡ ç§ï¼Œçœ‹æ–‡æ¡£å§</li></ul><p>å®ƒä»¬çš„æœ€ç»ˆç›®æ ‡æ˜¯ä¸€è‡´çš„ï¼šç»‘å®šæ¥å£åˆ°å®ç°ã€‚</p><p>è¿™æ ·çš„å¥½å¤„æ˜¯åœ¨é¡¹ç›®çš„ç¼–ç é˜¶æ®µå»ºç«‹èµ·æ¥å£å’Œå®ç°çš„æ˜ å°„å…³ç³»ï¼Œåˆ°ä½¿ç”¨é˜¶æ®µé€šè¿‡æŠ½è±¡ç±»ï¼ˆæ¥å£ï¼‰è§£æå‡ºå®ƒçš„å…·ä½“å®ç°ï¼Œè¿™æ ·å°±å®ç°äº†é¡¹ç›®ä¸­çš„è§£è€¦ã€‚</p><h5 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h5><p>bind æ–¹æ³•çš„åŠŸèƒ½æ˜¯å°†å®ç°ä¸æ¥å£è¿›è¡Œç»‘å®šï¼Œç„¶ååœ¨æ¯æ¬¡æ‰§è¡ŒæœåŠ¡è§£ææ“ä½œæ—¶ï¼ŒLaravel å®¹å™¨éƒ½ä¼šé‡æ–°åˆ›å»ºå®ä¾‹å¯¹è±¡ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$this-&gt;app-&gt;bind(</span><br><span class="line">    UserRepositoryInterface::class,</span><br><span class="line">    UserRepository::class</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">class UserController extends Controller</span><br><span class="line">&#123;</span><br><span class="line">    private $repository;</span><br><span class="line"></span><br><span class="line">    function __construct(UserRepositoryInterface $userRepository)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;repository &#x3D; $userRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function users()&#123;</span><br><span class="line">        return $this-&gt;repository-&gt;all();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡æä¾›è€…ä¸­ï¼Œå°† <code>User</code> ä»“åº“çš„å…·ä½“å®ç°ä¸æ¥å£è¿›è¡Œç»‘å®šï¼Œä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥é€šè¿‡æ¥å£æ³¨å…¥ä¾èµ–ã€‚</p><h5 id="singleton"><a href="#singleton" class="headerlink" title="singleton"></a>singleton</h5><p>é‡‡ç”¨å•ä¾‹ç»‘å®šæ—¶ï¼Œä»…åœ¨é¦–æ¬¡è§£ææ—¶åˆ›å»ºå®ä¾‹ï¼Œåç»­ä½¿ç”¨ <code>make</code> è¿›è¡Œè§£ææœåŠ¡æ“ä½œéƒ½å°†ç›´æ¥è·å–è¿™ä¸ªå·²è§£æçš„å¯¹è±¡ï¼Œå®ç°å…±äº«æ“ä½œã€‚</p><p>ç»‘å®šå¤„ç†ç±»ä¼¼ <code>bind</code> ç»‘å®šï¼Œåªéœ€å°† <code>bind</code> æ–¹æ³•æ›¿æ¢æˆ <code>singleton</code> æ–¹æ³•å³å¯ã€‚</p><h5 id="instance"><a href="#instance" class="headerlink" title="instance"></a>instance</h5><p>å°†å·²ç»åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ç»‘å®šåˆ°æ¥å£ä»¥ä¾›åç»­ä½¿ç”¨ï¼Œè¿™ç§ä½¿ç”¨åœºæ™¯ç±»ä¼¼äºæ³¨å†Œè¡¨ã€‚</p><p>æ¯”å¦‚ç”¨äºå­˜å‚¨ç”¨æˆ·æ¨¡å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®ä¾‹</span><br><span class="line">$artisan &#x3D; new User();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å°†å®ä¾‹ç»‘å®šåˆ°æœåŠ¡å®¹å™¨</span><br><span class="line">App::instance(&#39;login-user&#39;, $artisan);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è·å–ç”¨æˆ·å®ä¾‹</span><br><span class="line">$artisan &#x3D; App::make(&#39;login-user&#39;);</span><br></pre></td></tr></table></figure><h5 id="contextual-binding"><a href="#contextual-binding" class="headerlink" title="contextual-binding"></a>contextual-binding</h5><p>ä¸»è¦ç”¨äºä¸€ä¸ªæ¥å£å¤šå¤„å®ç°ï¼Œç„¶åæ ¹æ®ä¸åŒæ§åˆ¶å™¨å»è¿›è¡Œåˆ¤æ–­å…·ä½“åº”è¯¥ç”¨å“ªä¸ªå®ç°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$this-&gt;app-&gt;when(PhotoController::class)</span><br><span class="line">  -&gt;needs(Filesystem::class)</span><br><span class="line">  -&gt;give(function () &#123;</span><br><span class="line">      return Storage::disk(&#39;local&#39;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2019/03/15/laravel-life-cycle/"/>
      <url>/2019/03/15/laravel-life-cycle/</url>
      
        <content type="html"><![CDATA[<p>Laravel çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p><ol><li>åŠ è½½ä¾èµ–</li><li>åˆ›å»ºåº”ç”¨å®ä¾‹</li><li>æ¥æ”¶è¯·æ±‚å¹¶å“åº”</li><li>è¯·æ±‚ç»“æŸè¿›è¡Œå›è°ƒ</li></ol><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><p>è¿™å››ä¸ªé˜¶æ®µéƒ½åœ¨ index.php ä¸­å®Œæˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F; åŠ è½½ä¾èµ–</span><br><span class="line">require __DIR__.&#39;&#x2F;..&#x2F;vendor&#x2F;autoload.php&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åˆ›å»ºåº”ç”¨å®ä¾‹</span><br><span class="line">$app &#x3D; require_once __DIR__.&#39;&#x2F;..&#x2F;bootstrap&#x2F;app.php&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å®ä¾‹åŒ– HTTP å†…æ ¸</span><br><span class="line">$kernel &#x3D; $app-&gt;make(Illuminate\Contracts\Http\Kernel::class);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ¥æ”¶è¯·æ±‚ï¼Œç”Ÿæˆå“åº”</span><br><span class="line">$response &#x3D; $kernel-&gt;handle(</span><br><span class="line">    $request &#x3D; Illuminate\Http\Request::capture()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å‘é€å“åº”</span><br><span class="line">$response-&gt;send();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ</span><br><span class="line">$kernel-&gt;terminate($request, $response);</span><br></pre></td></tr></table></figure><h4 id="1-åŠ è½½ä¾èµ–"><a href="#1-åŠ è½½ä¾èµ–" class="headerlink" title="1. åŠ è½½ä¾èµ–"></a>1. åŠ è½½ä¾èµ–</h4><p>laravel æ¡†æ¶ä¾èµ– composer ç®¡ç†æ‰©å±•åŒ…ï¼Œé€šè¿‡å¼•å…¥ composer çš„è‡ªåŠ¨åŠ è½½ç¨‹åºï¼Œå°±å¯ä»¥è½»æ¾å®Œæˆæ‰©å±•åŠ è½½ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require __DIR__.&#39;&#x2F;..&#x2F;vendor&#x2F;autoload.php&#39;;</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºåº”ç”¨å®ä¾‹"><a href="#2-åˆ›å»ºåº”ç”¨å®ä¾‹" class="headerlink" title="2 åˆ›å»ºåº”ç”¨å®ä¾‹"></a>2 åˆ›å»ºåº”ç”¨å®ä¾‹</h4><p>è¿™ä¸€æ­¥ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªå°æ­¥éª¤ç»„æˆï¼š</p><ul><li>åˆ›å»ºåº”ç”¨å®ä¾‹</li><li>å®ŒæˆåŸºç¡€æ³¨å†Œ<ul><li>åŸºç¡€ç»‘å®š</li><li>åŸºç¡€æœåŠ¡æä¾›è€…æ³¨å†Œ<ul><li>event</li><li>log</li><li>route</li></ul></li><li>æ ¸å¿ƒç±»åˆ«åæ³¨å†Œ</li></ul></li><li>ç»‘å®šæ ¸å¿ƒ</li></ul><p>åˆ›å»ºåº”ç”¨å®ä¾‹ï¼Œç”± bootstrap/app.php å®Œæˆï¼Œç„¶åæ³¨å†Œä¸‰ä¸ªæ ¸å¿ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸€éƒ¨åˆ†ï¼š åˆ›å»ºåº”ç”¨å®ä¾‹</span><br><span class="line">$app &#x3D; new Illuminate\Foundation\Application(</span><br><span class="line">    realpath(__DIR__.&#39;&#x2F;..&#x2F;&#39;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure><h5 id="2-1-å®ŒæˆåŸºç¡€æ³¨å†Œ"><a href="#2-1-å®ŒæˆåŸºç¡€æ³¨å†Œ" class="headerlink" title="2.1 å®ŒæˆåŸºç¡€æ³¨å†Œ"></a>2.1 å®ŒæˆåŸºç¡€æ³¨å†Œ</h5><p>åº”ç”¨å®ä¾‹åˆ›å»ºåï¼Œå†æ¥çœ‹ä¸€ä¸‹å…·ä½“æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œæ‰“å¼€ <code>Illuminate\Foundation\Application</code>ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public function __construct($basePath &#x3D; null)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; åº”ç”¨çš„è·¯å¾„ç»‘å®š</span><br><span class="line">    if ($basePath) &#123;</span><br><span class="line">        $this-&gt;setBasePath($basePath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å°†åŸºç¡€ç»‘å®šæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨å</span><br><span class="line">    $this-&gt;registerBaseBindings();</span><br><span class="line">    &#x2F;&#x2F; å°†åŸºç¡€æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°å®¹å™¨ Eventã€Logã€Route</span><br><span class="line">    $this-&gt;registerBaseServiceProviders();</span><br><span class="line">    &#x2F;&#x2F; å°†æ ¸å¿ƒç±»åˆ«åæ³¨å†Œåˆ°å®¹å™¨</span><br><span class="line">    $this-&gt;registerCoreContainerAliases();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-2-å†…æ ¸ç»‘å®š"><a href="#2-2-å†…æ ¸ç»‘å®š" class="headerlink" title="2.2 å†…æ ¸ç»‘å®š"></a>2.2 å†…æ ¸ç»‘å®š</h5><p>æ¥ç€çœ‹ <code>bootstrap/app.php</code> ä¸­çš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">â€¦â€¦</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç¬¬äºŒæ­¥ï¼Œå†…æ ¸ç»‘å®š</span><br><span class="line"></span><br><span class="line">$app-&gt;singleton(</span><br><span class="line">    Illuminate\Contracts\Http\Kernel::class,</span><br><span class="line">    App\Http\Kernel::class</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">$app-&gt;singleton(</span><br><span class="line">    Illuminate\Contracts\Console\Kernel::class,</span><br><span class="line">    App\Console\Kernel::class</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$app-&gt;singleton(</span><br><span class="line">    Illuminate\Contracts\Debug\ExceptionHandler::class,</span><br><span class="line">    App\Exceptions\Handler::class</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç»‘å®šä¸‰ä¸ªå†…æ ¸ï¼ŒHTTPã€Consoleã€Exceptionå†…æ ¸ã€‚</p><h4 id="3-æ¥æ”¶è¯·æ±‚å¹¶å“åº”"><a href="#3-æ¥æ”¶è¯·æ±‚å¹¶å“åº”" class="headerlink" title="3 æ¥æ”¶è¯·æ±‚å¹¶å“åº”"></a>3 æ¥æ”¶è¯·æ±‚å¹¶å“åº”</h4><p>å†æ¬¡å›åˆ° index.phpï¼ŒæŸ¥çœ‹è¯·æ±‚å’Œå“åº”çš„ç›¸å…³ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â€¦â€¦</span><br><span class="line"></span><br><span class="line">$kernel &#x3D; $app-&gt;make(Illuminate\Contracts\Http\Kernel::class);</span><br><span class="line"></span><br><span class="line">$response &#x3D; $kernel-&gt;handle(</span><br><span class="line">    $request &#x3D; Illuminate\Http\Request::capture()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">$response-&gt;send();</span><br><span class="line"></span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥ä¹Ÿæ˜¯ç”±å‡ ä¸ªå°æ­¥éª¤ç»„æˆï¼š</p><ul><li>å®ä¾‹åŒ– HTTP æ ¸å¿ƒ<ul><li>å®ä¾‹åŒ–å†…æ ¸</li><li>æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±<ul><li>session</li><li>å…±äº«é”™è¯¯</li><li>èº«ä»½éªŒè¯è¯·æ±‚</li><li>â€¦â€¦</li></ul></li></ul></li><li>è¯·æ±‚å¤„ç†<ul><li>åˆ›å»ºè¯·æ±‚å®ä¾‹</li><li>å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”</li></ul></li><li>å‘é€å“åº”</li></ul><h5 id="3-1-æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±"><a href="#3-1-æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±" class="headerlink" title="3.1 æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±"></a>3.1 æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±</h5><p>åœ¨ <code>Illuminate\Contracts\Http\Kernel::class</code> ç±»çš„æ„é€ æ–¹æ³•ä¸­ï¼Œå°†åœ¨ HTTP å†…æ ¸å®šä¹‰çš„ã€Œä¸­é—´ä»¶ã€æ³¨å†Œåˆ°è·¯ç”±ï¼Œæ³¨å†Œå®Œåå°±å¯ä»¥åœ¨å®é™…å¤„ç† HTTP è¯·æ±‚å‰è°ƒç”¨è¿™äº›ã€Œä¸­é—´ä»¶ã€å®ç°è¿‡æ»¤è¯·æ±‚çš„ç›®çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">protected $middlewarePriority &#x3D; [</span><br><span class="line">    \Illuminate\Session\Middleware\StartSession::class,</span><br><span class="line">    \Illuminate\View\Middleware\ShareErrorsFromSession::class,</span><br><span class="line">    \Illuminate\Contracts\Auth\Middleware\AuthenticatesRequests::class,</span><br><span class="line">    \Illuminate\Routing\Middleware\ThrottleRequests::class,</span><br><span class="line">    \Illuminate\Session\Middleware\AuthenticateSession::class,</span><br><span class="line">    \Illuminate\Routing\Middleware\SubstituteBindings::class,</span><br><span class="line">    \Illuminate\Auth\Middleware\Authorize::class,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">public function __construct(Application $app, Router $router)</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;app &#x3D; $app;</span><br><span class="line">    $this-&gt;router &#x3D; $router;</span><br><span class="line"></span><br><span class="line">    $this-&gt;syncMiddlewareToRouter();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ³¨å†Œä¸­é—´ä»¶åˆ°è·¯ç”±</span><br><span class="line">protected function syncMiddlewareToRouter()</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;router-&gt;middlewarePriority &#x3D; $this-&gt;middlewarePriority;</span><br><span class="line"></span><br><span class="line">    foreach ($this-&gt;middlewareGroups as $key &#x3D;&gt; $middleware) &#123;</span><br><span class="line">        $this-&gt;router-&gt;middlewareGroup($key, $middleware);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    foreach ($this-&gt;routeMiddleware as $key &#x3D;&gt; $middleware) &#123;</span><br><span class="line">        $this-&gt;router-&gt;aliasMiddleware($key, $middleware);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-2-å¤„ç†è¯·æ±‚"><a href="#3-2-å¤„ç†è¯·æ±‚" class="headerlink" title="3.2 å¤„ç†è¯·æ±‚"></a>3.2 å¤„ç†è¯·æ±‚</h5><p>å¤„ç†è¯·æ±‚å®é™…åŒ…å«ä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆ›å»ºè¯·æ±‚å®ä¾‹</li><li>å¤„ç†è¯·æ±‚</li></ul><h6 id="3-2-1-åˆ›å»ºè¯·æ±‚å®ä¾‹"><a href="#3-2-1-åˆ›å»ºè¯·æ±‚å®ä¾‹" class="headerlink" title="3.2.1 åˆ›å»ºè¯·æ±‚å®ä¾‹"></a>3.2.1 åˆ›å»ºè¯·æ±‚å®ä¾‹</h6><p>é€šè¿‡ Symfony å®ä¾‹åˆ›å»ºä¸€ä¸ª Laravel è¯·æ±‚å®ä¾‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public static function capture()</span><br><span class="line">&#123;</span><br><span class="line">    static::enableHttpMethodParameterOverride();</span><br><span class="line"></span><br><span class="line">    return static::createFromBase(SymfonyRequest::createFromGlobals());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static function createFromBase(SymfonyRequest $request)</span><br><span class="line">&#123;</span><br><span class="line">    $newRequest &#x3D; (new static)-&gt;duplicate(</span><br><span class="line">        $request-&gt;query-&gt;all(), $request-&gt;request-&gt;all(), $request-&gt;attributes-&gt;all(),</span><br><span class="line">        $request-&gt;cookies-&gt;all(), $request-&gt;files-&gt;all(), $request-&gt;server-&gt;all()</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    $newRequest-&gt;headers-&gt;replace($request-&gt;headers-&gt;all());</span><br><span class="line"></span><br><span class="line">    $newRequest-&gt;content &#x3D; $request-&gt;content;</span><br><span class="line"></span><br><span class="line">    $newRequest-&gt;request &#x3D; $newRequest-&gt;getInputSource();</span><br><span class="line"></span><br><span class="line">    return $newRequest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="3-2-2-å¤„ç†è¯·æ±‚"><a href="#3-2-2-å¤„ç†è¯·æ±‚" class="headerlink" title="3.2.2 å¤„ç†è¯·æ±‚"></a>3.2.2 å¤„ç†è¯·æ±‚</h6><p>åœ¨ HTTP æ ¸å¿ƒçš„ handdle æ–¹æ³•å†…ï¼Œæ¥æ”¶ä¸€ä¸ªè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€æ­¥åˆ›å»ºçš„è¯·æ±‚å®ä¾‹ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªå“åº”ã€‚</p><p>ä¸»è¦æ­¥é©Ÿå¦‚ä¸‹ï¼š</p><ul><li>æ³¨å†Œè¯·æ±‚åˆ°å®¹å™¨</li><li>è¿è¡Œå¼•å¯¼ç¨‹åº<ul><li>ç¯å¢ƒæ£€æµ‹ï¼Œå°† env ä¸­çš„é…ç½®è¯»å–åˆ°å˜é‡ä¸­</li><li>é…ç½®æ–‡ä»¶åŠ è½½</li><li>åŠ è½½å¼‚å¸¸å¤„ç†</li><li>æ³¨å†Œé—¨é¢</li><li>æ³¨å†ŒæœåŠ¡æä¾›è€…</li><li>æœåŠ¡å¯åŠ¨</li></ul></li><li>å‘é€è¯·æ±‚åˆ°è·¯ç”±<ul><li>æŸ¥æ‰¾è·¯ç”±</li><li>è¿è¡Œæ§åˆ¶å™¨æˆ–åŒ¿åå‡½æ•°</li></ul></li><li>è¿”å›å“åº”</li></ul><p>HTTP æ ¸å¿ƒçš„ handle æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public function handle($request)</span><br><span class="line">&#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        $request-&gt;enableHttpMethodParameterOverride();</span><br><span class="line"></span><br><span class="line">        $response &#x3D; $this-&gt;sendRequestThroughRouter($request);</span><br><span class="line">    &#125; catch (Throwable $e) &#123;</span><br><span class="line">        $this-&gt;reportException($e);</span><br><span class="line"></span><br><span class="line">        $response &#x3D; $this-&gt;renderException($request, $e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $this-&gt;app[&#39;events&#39;]-&gt;dispatch(</span><br><span class="line">        new RequestHandled($request, $response)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    return $response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†å¾€ä¸‹æ·±å…¥ï¼ŒæŸ¥çœ‹ <code>$response = $this-&gt;sendRequestThroughRouter($request);</code>  çš„å…·ä½“å®ç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">protected function sendRequestThroughRouter($request)</span><br><span class="line">&#123;</span><br><span class="line">   &#x2F;&#x2F; å°†è¯·æ±‚æ³¨å†Œåˆ°å®¹å™¨</span><br><span class="line">    $this-&gt;app-&gt;instance(&#39;request&#39;, $request);</span><br><span class="line"></span><br><span class="line">    Facade::clearResolvedInstance(&#39;request&#39;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å¯åŠ¨å¼•å¯¼ç¨‹åº</span><br><span class="line">    $this-&gt;bootstrap();</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å‘é€è¯·æ±‚è‡³è·¯ç”±</span><br><span class="line">    return (new Pipeline($this-&gt;app))</span><br><span class="line">                -&gt;send($request)</span><br><span class="line">                -&gt;through($this-&gt;app-&gt;shouldSkipMiddleware() ? [] : $this-&gt;middleware)</span><br><span class="line">                -&gt;then($this-&gt;dispatchToRouter());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œå°† request æ³¨å†Œåˆ°å®¹å™¨å†…ï¼Œç„¶åæ¸…é™¤æ‰ä¹‹å‰çš„ request å®ä¾‹ç¼“å­˜ï¼Œå¯åŠ¨å¼•å¯¼ç¨‹åºï¼Œç„¶åå°†è¯·æ±‚å‘é€åˆ°è·¯ç”±ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œçœ‹ä¸€ä¸‹å¼•å¯¼ç¨‹åºæ˜¯åšä»€ä¹ˆçš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">protected $bootstrappers &#x3D; [</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\LoadEnvironmentVariables::class,</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\LoadConfiguration::class,</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\HandleExceptions::class,</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\RegisterFacades::class,</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\RegisterProviders::class,</span><br><span class="line">    \Illuminate\Foundation\Bootstrap\BootProviders::class,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">public function bootstrap()</span><br><span class="line">&#123;</span><br><span class="line">    if (! $this-&gt;app-&gt;hasBeenBootstrapped()) &#123;</span><br><span class="line">        $this-&gt;app-&gt;bootstrapWith($this-&gt;bootstrappers());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">protected function bootstrappers()</span><br><span class="line">&#123;</span><br><span class="line">    return $this-&gt;bootstrappers;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; src&#x2F;Illuminate&#x2F;Foundation&#x2F;Application.php</span><br><span class="line">public function bootstrapWith(array $bootstrappers)</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;hasBeenBootstrapped &#x3D; true;</span><br><span class="line"></span><br><span class="line">    foreach ($bootstrappers as $bootstrapper) &#123;</span><br><span class="line">        $this[&#39;events&#39;]-&gt;dispatch(&#39;bootstrapping: &#39;.$bootstrapper, [$this]);</span><br><span class="line"></span><br><span class="line">        $this-&gt;make($bootstrapper)-&gt;bootstrap($this);</span><br><span class="line"></span><br><span class="line">        $this[&#39;events&#39;]-&gt;dispatch(&#39;bootstrapped: &#39;.$bootstrapper, [$this]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å®¹å™¨å†…çš„å…·ä½“å®ç°æ–¹æ³•ä¸­ï¼Œä¼šå…ˆè§£æå¼•å¯¼ç¨‹åºï¼Œç„¶åå†é€šè¿‡è°ƒç”¨å¼•å¯¼ç¨‹åºçš„  <code>bootstrap</code> æ–¹æ³•æ¥å¯åŠ¨æœåŠ¡ã€‚<br>å¼•å¯¼ç¨‹åºåŠŸèƒ½ï¼š</p><ul><li>ç¯å¢ƒæ£€æµ‹ï¼Œå°† env é…ç½®æ–‡ä»¶è½½å…¥åˆ° <code>$_ENV</code> å˜é‡ä¸­</li><li>åŠ è½½é…ç½®æ–‡ä»¶</li><li>åŠ è½½å¼‚å¸¸å¤„ç†</li><li>åŠ è½½ Facadesï¼Œæ³¨å†Œå®Œæˆåå¯ä»¥ç”¨åˆ«åçš„æ–¹å¼è®¿é—®å…·ä½“çš„ç±»</li><li>æ³¨å†ŒæœåŠ¡æä¾›è€…ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¼šå°†é…ç½®åœ¨ app.php æ–‡ä»¶å¤¹ä¸‹ providers èŠ‚ç‚¹çš„æœåŠ¡å™¨æä¾›è€…æ³¨å†Œåˆ° APP å®¹å™¨ï¼Œä¾›è¯·æ±‚å¤„ç†é˜¶æ®µä½¿ç”¨</li><li>æœåŠ¡å¯åŠ¨</li></ul><p>åœ¨å‘é€è¯·æ±‚è‡³è·¯ç”±è¿™è¡Œä»£ç ä¸­ï¼Œå®Œæˆäº†ï¼šç®¡é“ï¼ˆpipelineï¼‰åˆ›å»ºã€å°† request ä¼ å…¥ç®¡é“ã€å¯¹ request æ‰§è¡Œä¸­é—´ä»¶å¤„ç†å’Œå®é™…çš„è¯·æ±‚å¤„ç†å››ä¸ªä¸åŒçš„æ“ä½œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">return (new Pipeline($this-&gt;app))</span><br><span class="line">    -&gt;send($request)</span><br><span class="line">    -&gt;through($this-&gt;app-&gt;shouldSkipMiddleware() ? [] : $this-&gt;middleware)</span><br><span class="line">    -&gt;then($this-&gt;dispatchToRouter());</span><br></pre></td></tr></table></figure><p>ç»§ç»­æ·±å…¥ <code>$this-&gt;dispatchToRouter()</code>ï¼Œåˆ†æç¨‹åºæ˜¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„ï¼š</p><ul><li>æ³¨å†Œè¯·æ±‚</li><li>æŸ¥æ‰¾è·¯ç”±</li><li>è¿è¡Œæ§åˆ¶å™¨</li><li>è¿”å›å“åº”ç»“æœ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">protected function dispatchToRouter()</span><br><span class="line">&#123;</span><br><span class="line">    return function ($request) &#123;</span><br><span class="line">        &#x2F;&#x2F; å°†è¯·æ±‚æ³¨å†Œåˆ°å®¹å™¨</span><br><span class="line">        $this-&gt;app-&gt;instance(&#39;request&#39;, $request);</span><br><span class="line"></span><br><span class="line">        return $this-&gt;router-&gt;dispatch($request);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public function dispatch(Request $request)</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;currentRequest &#x3D; $request;</span><br><span class="line"></span><br><span class="line">    return $this-&gt;dispatchToRoute($request);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public function dispatchToRoute(Request $request)</span><br><span class="line">&#123;</span><br><span class="line">  return $this-&gt;runRoute($request, $this-&gt;findRoute($request));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æŸ¥æ‰¾è·¯ç”±</span><br><span class="line">protected function findRoute($request)</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;current &#x3D; $route &#x3D; $this-&gt;routes-&gt;match($request);</span><br><span class="line"></span><br><span class="line">    $this-&gt;container-&gt;instance(Route::class, $route);</span><br><span class="line"></span><br><span class="line">    return $route;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">protected function runRoute(Request $request, Route $route)</span><br><span class="line">&#123;</span><br><span class="line">    $request-&gt;setRouteResolver(function () use ($route) &#123;</span><br><span class="line">        return $route;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $this-&gt;events-&gt;dispatch(new RouteMatched($route, $request));</span><br><span class="line"></span><br><span class="line">    return $this-&gt;prepareResponse($request,</span><br><span class="line">        $this-&gt;runRouteWithinStack($route, $request)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">protected function runRouteWithinStack(Route $route, Request $request)</span><br><span class="line">&#123;</span><br><span class="line">    $shouldSkipMiddleware &#x3D; $this-&gt;container-&gt;bound(&#39;middleware.disable&#39;) &amp;&amp;</span><br><span class="line">                            $this-&gt;container-&gt;make(&#39;middleware.disable&#39;) &#x3D;&#x3D;&#x3D; true;</span><br><span class="line"></span><br><span class="line">    $middleware &#x3D; $shouldSkipMiddleware ? [] : $this-&gt;gatherRouteMiddleware($route);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è¿”å›è¿è¡Œç»“æœ</span><br><span class="line">    return (new Pipeline($this-&gt;container))</span><br><span class="line">                    -&gt;send($request)</span><br><span class="line">                    -&gt;through($middleware)</span><br><span class="line">                    -&gt;then(function ($request) use ($route) &#123;</span><br><span class="line">                        &#x2F;&#x2F; è¿è¡ŒåŒ¹é…åˆ°çš„è·¯ç”±æ§åˆ¶å™¨æˆ–åŒ¿åå‡½æ•°</span><br><span class="line">                        return $this-&gt;prepareResponse(</span><br><span class="line">                            $request, $route-&gt;run()</span><br><span class="line">                        );</span><br><span class="line">                    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>$route-&gt;run()</code> çš„æ–¹æ³•å®šä¹‰åœ¨ <code>Illuminate\Routing\Route</code> ç±»ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public function run()</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;container &#x3D; $this-&gt;container ?: new Container;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        if ($this-&gt;isControllerAction()) &#123;</span><br><span class="line">            return $this-&gt;runController();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return $this-&gt;runCallable();</span><br><span class="line">    &#125; catch (HttpResponseException $e) &#123;</span><br><span class="line">        return $e-&gt;getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè·¯ç”±çš„å®ç°æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œä¼šå®Œæˆæ§åˆ¶å™¨å®ä¾‹åŒ–å¹¶æ‰§è¡ŒæŒ‡å®šæ–¹æ³•ï¼›å¦‚æœæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°å°±ä¼šç›´æ¥è°ƒç”¨ã€‚æœ€ç»ˆå“åº”é€šè¿‡ <code>prepareResponse</code> è¿”å›ã€‚</p><h5 id="3-2-3-å‘é€å“åº”"><a href="#3-2-3-å‘é€å“åº”" class="headerlink" title="3.2.3 å‘é€å“åº”"></a>3.2.3 å‘é€å“åº”</h5><p>ç»•äº†ä¸€å¤§åœˆï¼Œæœ€åç»ˆäºå›åˆ°äº†å¼€å§‹çš„åœ°æ–¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; å‘é€å“åº”</span><br><span class="line">$response-&gt;send();</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå‘é€ï¼Œç”± <code>src/Illuminate/Http/Response.php</code> çš„çˆ¶ç±» <code>Symfony\Component\HttpFoundation\Response</code> å®Œæˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public function send()</span><br><span class="line">&#123;</span><br><span class="line">  $this-&gt;sendHeaders();</span><br><span class="line">  $this-&gt;sendContent();</span><br><span class="line"></span><br><span class="line">  if (\function_exists(&#39;fastcgi_finish_request&#39;)) &#123;</span><br><span class="line">      fastcgi_finish_request();</span><br><span class="line">  &#125; elseif (!\in_array(\PHP_SAPI, [&#39;cli&#39;, &#39;phpdbg&#39;], true)) &#123;</span><br><span class="line">      static::closeOutputBuffers(0, true);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return $this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ"><a href="#4-è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ" class="headerlink" title="4 è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ"></a>4 è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$kernel-&gt;terminate($request, $response);</span><br></pre></td></tr></table></figure><p>ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ ¸å¿ƒçš„  <code>terminate</code> æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public function terminate($request, $response)</span><br><span class="line">&#123;</span><br><span class="line">    $this-&gt;terminateMiddleware($request, $response);</span><br><span class="line"></span><br><span class="line">    $this-&gt;app-&gt;terminate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>terminateMiddleware</code> ä¸­ï¼Œè¿›è¡Œç»ˆæ­¢ä¸­é—´ä»¶ï¼Œ<code>$this-&gt;app-&gt;terminate()</code> ç»ˆæ­¢ç¨‹åºã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>åˆ›å»ºåº”ç”¨å®ä¾‹ï¼Œå®Œæˆé¡¹ç›®è·¯å¾„æ³¨å†Œã€åŸºç¡€æœåŠ¡æ³¨å†Œã€æ ¸å¿ƒç±»åˆ«åæ³¨å†Œï¼Œç„¶åå°† HTTP å’Œ Consoleï¼Œ Exception æ ¸å¿ƒæ³¨å†Œåˆ°å®¹å™¨ã€‚</p><p>ç„¶åå†å®ä¾‹åŒ–å†…æ ¸ï¼Œå°†ä¸­é—´ä»¶åŠ è½½åˆ°è·¯ç”±ï¼Œå†å°†è¯·æ±‚æ³¨å†Œåˆ°å®¹å™¨ï¼Œç„¶åè¿è¡Œå¼•å¯¼ç¨‹åºï¼Œè¿›è¡Œç¯å¢ƒæ£€æµ‹ã€åŠ è½½ç³»ç»Ÿé…ç½®ç­‰ç³»ç»Ÿç¯å¢ƒé…ç½®ã€‚</p><p>ç„¶åè¿›è¡Œä¸­é—´ä»¶æ ¡éªŒï¼Œé€šè¿‡æ ¡éªŒåæ‰ä¼šæœ€ç»ˆå¤„ç†å®é™…çš„æ§åˆ¶å™¨æˆ–åŒ¿åå‡½æ•°å¹¶ç”Ÿæˆå“åº”ã€‚</p><p>æœ€ç»ˆï¼Œå‘é€å“åº”ç»™ç”¨æˆ·ï¼Œæ¸…ç†é¡¹ç›®ä¸­çš„ä¸­é—´ä»¶ï¼Œå®Œæˆä¸€ä¸ªè¯·æ±‚å‘¨æœŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ laravel mix ç¼–è¯‘èµ„æº</title>
      <link href="/2019/03/15/laravel-mix/"/>
      <url>/2019/03/15/laravel-mix/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸‹å¦‚ä½•åœ¨ laravel æ¡†æ¶ä¸­ï¼Œç”¨ laravel mix ç¼–è¯‘å‰ç«¯èµ„æºã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel-mix.png"></p><span id="more"></span><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>æœ¬æ¬¡æ“ä½œçš„ç¯å¢ƒä¾ç„¶æ˜¯ laradockï¼Œå¦‚æœæ²¡ç”¨ç‰¹æ®Šè¯´æ˜ï¼Œä»¥ååº”è¯¥é»˜è®¤ laradockã€‚</p><p>workspace å®¹å™¨ä¸­ï¼Œå·²ç»æå‰è£…å¥½äº† node ç¯å¢ƒï¼Œè€Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œpackage.json å’Œ webpack.mix.js ä¹Ÿå·²ç»ä¸ºæˆ‘ä»¬é¢„è®¾å¥½äº†ï¼Œæ‰€ä»¥laravel é¡¹ç›®å»ºå¥½åï¼Œç›´æ¥åœ¨æ ¹ç›®å½•å®‰è£…å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>åœ¨ webpack.mix.js ä¸­ï¼Œå·²ç»åŠ è½½äº†ä¸¤ä¸ªé»˜è®¤çš„æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mix.js(<span class="string">&#x27;resources/js/app.js&#x27;</span>, <span class="string">&#x27;public/js&#x27;</span>)</span><br><span class="line">   .sass(<span class="string">&#x27;resources/sass/app.scss&#x27;</span>, <span class="string">&#x27;public/css&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åªéœ€è¦æŠŠè‡ªå·±çš„èµ„æºæ–‡ä»¶ï¼ŒæŒ‰ç…§åŒæ ·çš„æ ¼å¼å†™å…¥è¿›å»ï¼Œç„¶åå¼€å§‹è¿è¡Œï¼Œå°±å¯ä»¥ç”Ÿæˆç¼–è¯‘åçš„èµ„æºäº†ã€‚</p><p>è™½ç„¶ç¤ºä¾‹ä¸­åªå†™äº† sass ä¸€ç§æ ·å¼æ–‡ä»¶ï¼Œä½†æ˜¯å…¶å®å¯ä»¥æ”¯æŒå¸¸è§çš„ä»¥åŠä¸å¸¸è§çš„å¾ˆå¤šä¸­æ ¼å¼ï¼Œåªéœ€è¦è°ƒç”¨å¯¹åº”çš„æ¥å£å³å¯ã€‚è€Œä¸”è¿˜å¯ä»¥æŠŠå¤šä¸ªèµ„æºæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mix.less(<span class="string">&#x27;resources/assets/less/app.less&#x27;</span>, <span class="string">&#x27;public/stylesheets/styles.css&#x27;</span>);</span><br><span class="line"></span><br><span class="line">mix.styles([</span><br><span class="line">    <span class="string">&#x27;public/css/vendor/normalize.css&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;public/css/vendor/videojs.css&#x27;</span></span><br><span class="line">], <span class="string">&#x27;public/css/all.css&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line">npm run watch</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹è§†å›¾åä½¿ä¹‹ç”Ÿæ•ˆçš„å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯é€šçŸ¥ mix å¼€å§‹å·¥ä½œçš„ã€‚</p><h4 id="å•ç‹¬ä½¿ç”¨"><a href="#å•ç‹¬ä½¿ç”¨" class="headerlink" title="å•ç‹¬ä½¿ç”¨"></a>å•ç‹¬ä½¿ç”¨</h4><p>åœ¨ laravel æ¡†æ¶ä¹‹å¤–ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ mix çš„ï¼Œå…·ä½“æ•™ç¨‹è¯·å‚è€ƒ <a href="https://learnku.com/docs4.0">[ learnku ]</a></p><p>å…¶å®ä¸éš¾ï¼ŒæŒºç®€å•çš„ã€‚ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel å†…ç½® vue çš„ä½¿ç”¨</title>
      <link href="/2019/03/14/laravel-vue/"/>
      <url>/2019/03/14/laravel-vue/</url>
      
        <content type="html"><![CDATA[<p>ä» 5.3 ç‰ˆæœ¬å¼€å§‹ï¼Œç”¨ Vue.js ä½œä¸ºé»˜è®¤ JavaScript å‰ç«¯æ¡†æ¶ã€‚</p><p>ä»åˆšæ¥è§¦ laravel åˆ°ç°åœ¨å·²ç»åˆè¿‡å»äº†å››ä¸ªç‰ˆæœ¬ï¼Œç§ç§åŸå› ï¼Œè¿˜æ˜¯ä¸€ç›´æ²¡èƒ½ç”¨ä¸Š vue.js æ¥åšå¼€å‘ï¼Œç°åœ¨åˆšå¥½å› ä¸ºå…¬å¸é¡¹ç›®ç”¨åˆ°äº† vueï¼Œå¯¹ vue æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œæ‰€ä»¥é¡ºä¾¿å°±ç ”ç©¶ä¸‹ vue åœ¨ laravel ä¸­çš„ä½¿ç”¨å§ã€‚</p><span id="more"></span><h4 id="å®‰è£…laravel"><a href="#å®‰è£…laravel" class="headerlink" title="å®‰è£…laravel"></a>å®‰è£…laravel</h4><p>æ“ä½œå‡åœ¨ laradock çš„ç¯å¢ƒä¸­è¿›è¡Œã€‚<br>è¿›å…¥ workspace å®¹å™¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… laravel</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project laravel&#x2F;laravel study</span><br></pre></td></tr></table></figure><h4 id="é…ç½®mysql"><a href="#é…ç½®mysql" class="headerlink" title="é…ç½®mysql"></a>é…ç½®mysql</h4><p>docker-compose up -d nginx mysql phpmyadmin å¯åŠ¨å®¹å™¨<br>é…ç½® nginxã€hosts å¹¶é‡å¯ nginx<br>è¿›å…¥ mysql å®¹å™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">root</span><br><span class="line">ALTER USER root IDENTIFIED WITH mysql_native_password BY &#x27;PASSWORD&#x27;;</span><br><span class="line">exit;</span><br><span class="line">exit</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®¿é—® phpmyadminï¼š localhost:8080ï¼Œhost å¡«å†™ mysqlï¼Œç”¨æˆ·åå¯†ç å‡ä¸º rootã€‚</p><h4 id="é…ç½®laravel"><a href="#é…ç½®laravel" class="headerlink" title="é…ç½®laravel"></a>é…ç½®laravel</h4><p>ä¿®æ”¹æ•°æ®åº“ä¿¡æ¯ï¼Œç”Ÿæˆç”¨æˆ·æ¨¡å—å¹¶å®‰è£…å‰ç«¯è„šæ‰‹æ¶:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:auth</span><br><span class="line">php artisan migrate</span><br><span class="line">php artisan make:seed UsersTableSeeder</span><br><span class="line"></span><br><span class="line">åœ¨ run æ–¹æ³•ä¸­æ·»åŠ ç”¨æˆ·ä¿¡æ¯ï¼š</span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> App\User;</span><br><span class="line"><span class="variable">$user</span>-&gt;name = <span class="string">&#x27;wu&#x27;</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;email = <span class="string">&#x27;yf-wu@qq.com&#x27;</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;password = Hash::make(<span class="string">&#x27;111111&#x27;</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;save();</span><br><span class="line"></span><br><span class="line">å†å» DatabaseSeeder ä¸­æ‰“å¼€ run ä¸­çš„æ³¨é‡Šï¼Œæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼š</span><br><span class="line">php artisan db:seed</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹è§†å›¾"><a href="#ä¿®æ”¹è§†å›¾" class="headerlink" title="ä¿®æ”¹è§†å›¾"></a>ä¿®æ”¹è§†å›¾</h4><p>home.blade.phpï¼š<br>vue çš„ç»„ä»¶åœ¨ resources/js/componentsï¼Œç„¶ååœ¨ app.js ä¸­æ³¨å†Œã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You are logged in!</span><br><span class="line"><span class="tag">&lt;<span class="name">example-component</span>&gt;</span><span class="tag">&lt;/<span class="name">example-component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ›´æ–°è„šæ‰‹æ¶ï¼šnpm run dev  or npm run watch</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.png" alt="ç»„ä»¶ç”Ÿæ•ˆ"></p><h4 id="å†å®éªŒä¸‹"><a href="#å†å®éªŒä¸‹" class="headerlink" title="å†å®éªŒä¸‹"></a>å†å®éªŒä¸‹</h4><p>ä¾‹å­æ¥è‡ªï¼š<a href="https://learnku.com/docs/laravel-core-concept/5.5/Laravel%E4%B8%8E%E5%89%8D%E7%AB%AF%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/3029">[ cxp1539 ]</a></p><p>è§†å›¾ç»„ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;transition name&#x3D;&quot;fade&quot;&gt;</span><br><span class="line">    &lt;div v-if&#x3D;&quot;isShow&quot; class&#x3D;&quot;goTop&quot; @click&#x3D;&quot;goTop&quot;&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;glyphicon glyphicon-menu-up&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;transition&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    const that &#x3D; this</span><br><span class="line">    $(window).scroll(function() &#123;</span><br><span class="line">      if ($(this).scrollTop() &gt; 50) &#123;</span><br><span class="line">        that.isShow &#x3D; true</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        that.isShow &#x3D; false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    goTop() &#123;</span><br><span class="line">      $(&#39;html,body&#39;).animate(&#123; scrollTop: 0 &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style scoped lang&#x3D;&quot;scss&quot;&gt;</span><br><span class="line">  .fade-enter-active, .fade-leave-active &#123;</span><br><span class="line">    transition: opacity .5s;</span><br><span class="line">  &#125;</span><br><span class="line">  .fade-enter, .fade-leave-to &#123;</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  .goTop &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    right: 36px;</span><br><span class="line">    bottom: 50px;</span><br><span class="line">    background: #FFF;</span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    line-height: 60px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    border-radius: 2px;</span><br><span class="line">    box-shadow: 0 4px 12px 0 rgba(7,17,27,.1);</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    z-index: 1000;</span><br><span class="line">    span &#123;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>app.js æ³¨å†Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#39;go-top&#39;, require(&#39;.&#x2F;components&#x2F;GoTop.vue&#39;));</span><br></pre></td></tr></table></figure><p>åœ¨ app.blade.php ä¸­å¼•å…¥ç»„ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;main class&#x3D;&quot;py-4&quot;&gt;</span><br><span class="line">    @yield(&#39;content&#39;)</span><br><span class="line">&lt;&#x2F;main&gt;</span><br><span class="line">&lt;go-top&gt;&lt;&#x2F;go-top&gt;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿é¡µé¢æ›´é«˜ï¼Œéšä¾¿ä¿®æ”¹ä¸ªæ ·å¼ä½¿æ»šåŠ¨æ¡å‡ºç°ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/up.png" alt="up"></p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><blockquote><p>æ¯æ¬¡ä¿®æ”¹ç»„ä»¶åéƒ½éœ€è¦é‡æ–°è¿è¡Œä¸€æ¬¡ npm run devï¼Œä¹Ÿå¯ä»¥ç”¨ watch-poll ç›‘å¬ã€‚</p></blockquote><h4 id="è¿›é˜¶ä½¿ç”¨"><a href="#è¿›é˜¶ä½¿ç”¨" class="headerlink" title="è¿›é˜¶ä½¿ç”¨"></a>è¿›é˜¶ä½¿ç”¨</h4><p>åˆ°äº†ä¸Šä¸€æ­¥å·²ç»å¯ä»¥å®Œæˆä¸€äº›åŸºç¡€çš„æ“ä½œäº†ï¼Œå®é™…ä¸Šï¼Œåˆšæ‰å¾—æ“ä½œè¿˜ç”¨åˆ°äº†ä¸€ä¸ªå«åš laravel-mix çš„ä¸œè¥¿ï¼Œåœ¨ <a href="https://learnku.com/"> [ LearnKu ] </a> (laravel-china ç¤¾åŒº)ç¤¾åŒºçš„æ–‡æ¡£ä¸­æ˜¯è¿™ä¹ˆä»‹ç»çš„ï¼š</p><blockquote><p>Laravel Mix æä¾›äº†ç®€æ´ä¸”å¯è¯»æ€§é«˜çš„ API ï¼Œç”¨äºä½¿ç”¨å‡ ä¸ªå¸¸è§çš„ CSS å’Œ JavaScript é¢„å¤„ç†å™¨ä¸ºåº”ç”¨å®šä¹‰ Webpack æ„å»ºæ­¥éª¤ã€‚å¯ä»¥é€šè¿‡ç®€å•é“¾å¼è°ƒç”¨æ¥å®šä¹‰èµ„æºçš„ç¼–è¯‘ã€‚</p></blockquote><blockquote><p>Laravel Mix æ˜¯å åŠ äº webpack ä¸Šçš„ä¸€å±‚å¹²å‡€çš„è†œï¼Œ å®ƒè®© webpack ç™¾åˆ†ä¹‹80çš„ç”¨ä¾‹å˜å¾—ååˆ†ç®€å•ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œlaravel-mix æ˜¯ç”¨æ¥ç®€åŒ– webpack å­¦ä¹ å’Œå¼€å‘æˆæœ¬çš„å·¥å…·ã€‚</p><p>å¯¹äºåç«¯äººå‘˜æ¥è¯´ï¼Œå‰ç«¯ä¸œè¥¿çœŸçš„å¤ªå¤šå¤ªéš¾ï¼Œmix å¯ä»¥è®©æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨ webpack çš„é…ç½®ï¼Œå³å¯è½»æ¾çš„ç¼–è¯‘å‰ç«¯è„šæœ¬ã€‚</p><p>ä¹‹å‰å› ä¸ºæ²¡åœ¨æ¡†æ¶ä¸­ç”¨è¿‡ vueï¼Œæ‰€ä»¥ä¸€ç›´ä¹Ÿæ²¡æœ‰æ¥è§¦åˆ°è¿™ä¸ªå·¥å…·ï¼Œç°åœ¨çœ‹å®Œå‘ç°ï¼Œå­¦ä¹ ä¹‹è·¯çœŸçš„æ˜¯æ°¸æ— æ­¢å¢ƒâ€¦ ğŸ˜‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>travis-ci å¯æŒç»­é›†æˆæµ‹è¯•</title>
      <link href="/2019/03/12/travis-ci-test/"/>
      <url>/2019/03/12/travis-ci-test/</url>
      
        <content type="html"><![CDATA[<p>ç»™åšå®¢æ·»åŠ äº†  travis ci å¯æŒç»­é›†æˆï¼Œä»¥åæœ¬åœ°å¯ä»¥ä¸è£… node ç¯å¢ƒäº†ã€‚</p><span id="more"></span><h2 id="æ“ä½œè¿‡ç¨‹ï¼š"><a href="#æ“ä½œè¿‡ç¨‹ï¼š" class="headerlink" title="æ“ä½œè¿‡ç¨‹ï¼š"></a>æ“ä½œè¿‡ç¨‹ï¼š</h2><h4 id="github-è´¦å·-ç™»é™†-travis-ci"><a href="#github-è´¦å·-ç™»é™†-travis-ci" class="headerlink" title="github è´¦å· ç™»é™† travis ci"></a>github è´¦å· ç™»é™† travis ci</h4><p>ç™»é™†åæŠŠåšå®¢é¡¹ç›®çš„å¼€å…³æ‰“å¼€ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/set.png"></p><h4 id="åšå®¢é¡¹ç›®åˆ›å»ºåˆ†æ”¯"><a href="#åšå®¢é¡¹ç›®åˆ›å»ºåˆ†æ”¯" class="headerlink" title="åšå®¢é¡¹ç›®åˆ›å»ºåˆ†æ”¯"></a>åšå®¢é¡¹ç›®åˆ›å»ºåˆ†æ”¯</h4><p>æŠŠåšå®¢é¡¹ç›®ï¼Œå³ .io çš„é‚£ä¸ªé¡¹ç›®æ‹‰åˆ°æœ¬åœ°ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ hexo:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git checkout -b hexo</span><br><span class="line">git rm -rf *    #åˆ é™¤ä»“åº“ä¸­çš„æ–‡ä»¶ï¼Œå¯èƒ½æœ¬åœ°çš„æ–‡ä»¶è¿˜å­˜æœ‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨ rm -rf å‘½ä»¤</span><br><span class="line">git commit -m &quot;æ¸…ç©ºæ–‡ä»¶å¤¹&quot; #æäº¤åˆ é™¤ä¿¡æ¯</span><br><span class="line">git push origin hexo:hexo #å°†åˆ é™¤çš„ä¿¡æ¯æ¨é€åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŠŠåšå®¢æºç æ”¾å…¥ hexo åˆ†æ”¯çš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åå†æ–°å»º .travis.yml:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè¯­è¨€ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="comment"># æŒ‡å®šéœ€è¦sudoæƒé™</span></span><br><span class="line"><span class="attr">sudo:</span> <span class="string">required</span></span><br><span class="line"><span class="comment"># æŒ‡å®šnode_jsç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">7.9</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># æŒ‡å®šç¼“å­˜æ¨¡å—ï¼Œå¯é€‰ã€‚ç¼“å­˜å¯åŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šåšå®¢æºç åˆ†æ”¯ï¼Œå› äººè€Œå¼‚ã€‚hexoåšå®¢æºç æ‰˜ç®¡åœ¨ç‹¬ç«‹repoåˆ™ä¸ç”¨è®¾ç½®æ­¤é¡¹</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hexo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Start: Build Lifecycle</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-deployer-git</span> <span class="string">--save</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œæ¸…ç¼“å­˜ï¼Œç”Ÿæˆç½‘é¡µæ“ä½œ</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®gitæäº¤åï¼Œé‚®ç®±ï¼›æ›¿æ¢çœŸå®tokenåˆ°_config.ymlæ–‡ä»¶ï¼Œæœ€ådepoyéƒ¨ç½²</span></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">init</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">&quot;M-finder&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.email</span> <span class="string">&quot;m@m-finder.com&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;Travis ci push&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">&quot;https://$&#123;travis_token&#125;@$&#123;gh_repo&#125;&quot;</span> <span class="string">master:master</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">gh_repo:</span> <span class="string">github.com/M-finder/M-finder.github.io.git</span></span><br><span class="line"><span class="comment"># End: Build LifeCycle</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="githubç”Ÿæˆtoken"><a href="#githubç”Ÿæˆtoken" class="headerlink" title="githubç”Ÿæˆtoken"></a>githubç”Ÿæˆtoken</h4><p>åœ¨ setting - developer settings ä¸­ç”Ÿæˆ tokenï¼Œå‹¾é€‰ repo æ‰€æœ‰é€‰é¡¹å’Œ user ä¸‹çš„ emailã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/github-set.png"></p><p>æŠŠç”Ÿæˆçš„ token å¡«å†™çš„ travis ci çš„è®¾ç½®ä¸­ã€‚</p><p>å®Œæˆåï¼Œæäº¤ä»£ç åˆ°åˆ†æ”¯æµ‹è¯•ä¸‹æ˜¯å¦æ­£å¸¸ã€‚</p><blockquote><ol><li><p>æ·»åŠ é…ç½®æ–‡ä»¶å¹¶æ¨é€åˆ°åˆ†æ”¯åï¼Œbuild æˆåŠŸä½†æ˜¯å¾½ç« ç°åœ¨è¿˜ä¸€ç›´æ˜¯ unknownã€‚</p></li><li><p>æ·»åŠ æµ‹è¯•æ–‡ç« åæ— æ³•æ¨é€åˆ° masterã€‚</p></li></ol></blockquote><p>å¾½ç« çŠ¶æ€åŸå› ï¼šmaster æ²¡æœ‰ build<br>æ¨é€å¤±è´¥åŸå› ï¼šgithub ç”Ÿæˆçš„ token åç§°å’Œé…ç½®æ–‡ä»¶ä¸­ä¸ä¸€è‡´ã€‚ </p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpstorm é…ç½® laradock xdebug</title>
      <link href="/2019/03/08/laradock-xdebug/"/>
      <url>/2019/03/08/laradock-xdebug/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ¬¡æ“ä½œä¸º win10 ç³»ç»Ÿï¼Œç†è®ºä¸Šå’Œå…¶ä»–ç³»ç»Ÿæ— å·®å¼‚ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laradock.png" alt="laradock"></p><span id="more"></span><p>å…‹éš† laradock åˆ°æœ¬åœ°ï¼š<br><code>git clone https://github.com/Laradock/laradock.git</code></p><p>è¿›å…¥ laradock æ–‡ä»¶å¤¹ï¼Œ ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š<br><code>cp .\env-example .env</code></p><p>ç¼–è¾‘ .env é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">WORKSPACE_INSTALL_XDEBUG&#x3D;true</span><br><span class="line">PHP_FPM_INSTALL_XDEBUG&#x3D;true</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>laradock/php-fpm/xdebug.ini</code> å’Œ <code>laradock/workspace/xdebug.ini</code>é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">xdebug.remote_host&#x3D;dockerhost</span><br><span class="line">xdebug.remote_connect_back&#x3D;0</span><br><span class="line">xdebug.remote_port&#x3D;9000</span><br><span class="line">xdebug.idekey&#x3D;PHPSTORM</span><br><span class="line"></span><br><span class="line">xdebug.remote_autostart&#x3D;1</span><br><span class="line">xdebug.remote_enable&#x3D;1</span><br><span class="line">xdebug.cli_color&#x3D;0</span><br><span class="line">xdebug.profiler_enable&#x3D;0</span><br><span class="line">xdebug.profiler_output_dir&#x3D;&quot;~&#x2F;xdebug&#x2F;phpstorm&#x2F;tmp&#x2F;profiling&quot;</span><br><span class="line"></span><br><span class="line">xdebug.remote_handler&#x3D;dbgp</span><br><span class="line">xdebug.remote_mode&#x3D;req</span><br><span class="line"></span><br><span class="line">xdebug.var_display_max_children&#x3D;-1</span><br><span class="line">xdebug.var_display_max_data&#x3D;-1</span><br><span class="line">xdebug.var_display_max_depth&#x3D;-1</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ laradock åŒçº§æ–°å»º www æ–‡ä»¶å¤¹å¹¶åœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»º index.php æ–‡ä»¶ã€‚<br>ä¿®æ”¹ <code>laradock/nginx/sites/default.conf</code> é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root &#x2F;var&#x2F;www;</span><br></pre></td></tr></table></figure><p>build æœåŠ¡ï¼š <code>docker-compose bild php-fpm workspace</code></p><p>å¯åŠ¨æœåŠ¡ï¼š<code>docker-compose up -d nginx mysql workspace</code></p><p>æ‰“å¼€ phpstormï¼Œæ·»åŠ  php è®¾ç½®å’Œ serverï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="/images/php.png" alt="php"></p><p><img src= "/img/loading.gif" data-lazy-src="/images/php-set.png" alt="php-option"></p><p>æ·»åŠ  php æ—¶ï¼Œè¦æŠŠ additional é‡Œçš„ä¸¤ä¸ªå†…å®¹å¡«å¥½ã€‚<br>options å†…å®¹å¦‚ä¸‹å›¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-dxdebug.remote_host&#x3D;docker.for.win.localhost -dxdebug.remote_enable&#x3D;1 -dxdebug.remote_port&#x3D;9000 -dxdebug.remote_mode&#x3D;req</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/option.png" alt="options"></p><p><img src= "/img/loading.gif" data-lazy-src="/images/server.png" alt="server"></p><p>å»ºå¥½ä»¥åï¼Œå†æ·»åŠ  remote_debugï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="/images/debug.png" alt="debug"></p><p>é…ç½®å¥½ä»¥åï¼Œå¯åŠ¨ debugï¼Œæ‰“å¼€ç”µè¯æŒ‰é’®ï¼Œæ·»åŠ æ–­ç‚¹åˆ·æ–°é¡µé¢ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/start.png" alt="start"></p><p><em>æ³¨ï¼š</em> é…ç½®å¥½ xdebug åï¼Œå¦‚æœéœ€è¦å®‰è£… laravelï¼Œéœ€è¦æŠŠ phpstorm å…³æ‰ã€‚å¦åˆ™ä¼šæ‹¦æˆªçš„ composer çš„è¯·æ±‚ã€‚<br>å…·ä½“è¡¨ç°ä¸ºæ‰§è¡Œä»»ä½• composer çš„å‘½ä»¤éƒ½æ²¡æœ‰ååº”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°å¹´å¿«ä¹</title>
      <link href="/2019/01/21/happy-2019/"/>
      <url>/2019/01/21/happy-2019/</url>
      
        <content type="html"><![CDATA[<p>ä¹…ä¸æ›´åšï¼Œæ˜¯å› ä¸ºæœ€è¿‘åœ¨å­¦ä¹ ï¼Œç„¶åæŠŠç¬”è®°éƒ½å†™åœ¨äº†ç®€ä¹¦ã€‚</p><p>åšå®¢ä¸ä¼šå…³ï¼ŒåŸŸåå·²ç»­è´¹ã€‚</p><p>ä¼šå¿™é‡ŒæŠ½é—²ç»§ç»­æŠ˜è…¾ã€‚</p><p>åªå¯æƒœæƒ³å­¦æƒ³åšçš„ä¸œè¥¿éƒ½å¤ªå¤šï¼Œæœ‰ç‚¹åˆ†èº«æ— æš‡ã€‚</p><p>ä¸è¯´äº†ï¼Œ19 å¹´ä¹Ÿéƒ½è¿›æ¥è¿™ä¹ˆä¹…äº†ï¼Œç¥å¤§å®¶æ–°å¹´å¿«ä¹å§ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/img.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨å·¥å…·åˆè®¡</title>
      <link href="/2018/08/31/web-tool/"/>
      <url>/2018/08/31/web-tool/</url>
      
        <content type="html"><![CDATA[<h4 id="å›¾ç‰‡å¤„ç†ç±»å·¥å…·"><a href="#å›¾ç‰‡å¤„ç†ç±»å·¥å…·" class="headerlink" title="å›¾ç‰‡å¤„ç†ç±»å·¥å…·"></a>å›¾ç‰‡å¤„ç†ç±»å·¥å…·</h4><ul><li><a href="https://aiviewer.com/ConvertAiToJpg.aspx">Aiè½¬å¸¸ç”¨å›¾ç‰‡æ ¼å¼</a></li><li><a href="http://www.faviconico.org/">å›¾ç‰‡è½¬favicon</a></li><li><a href="http://www.qt86.com/">è‰ºæœ¯å­—ç”Ÿæˆ</a></li><li><a href="https://www.logaster.com/">logoè®¾è®¡2ï¼ˆå›½å¤–ç½‘ç«™ï¼Œå¯èƒ½ä¼šæ…¢ï¼‰</a></li><li><a href="https://www.asqql.com/gifzip/">å›¾ç‰‡å‹ç¼©</a></li></ul><h4 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h4><ul><li><a href="http://www.bejson.com/">ä»£ç è½¬æ¢</a></li><li><a href="https://www.ascii-art-generator.org/">asciiæ–‡å­—ç”Ÿæˆ</a></li><li><a href="https://greasyfork.org/zh-CN/scripts">æ²¹çŒ´è„šæœ¬ä¸­å¿ƒ</a></li><li><a href="https://www.seniverse.com/">å¤©æ°”api</a></li><li><a href="https://ngrok.com/download">ç”Ÿæˆå¤–ç½‘å¯è®¿é—®çš„æœ¬æœºåŸŸå</a></li><li><a href="https://www.leangoo.com/">leangoo-å›¢é˜Ÿåä½œå·¥å…·</a></li></ul><h4 id="æˆ‘å–œæ¬¢çš„å‡ ä¸ªåšå®¢"><a href="#æˆ‘å–œæ¬¢çš„å‡ ä¸ªåšå®¢" class="headerlink" title="æˆ‘å–œæ¬¢çš„å‡ ä¸ªåšå®¢"></a>æˆ‘å–œæ¬¢çš„å‡ ä¸ªåšå®¢</h4><ul><li><a href="http://litten.me/">litten</a></li><li><a href="https://blog.keep.moe/">Makitoâ€™s Notebook</a></li><li><a href="https://primitivetechnology.wordpress.com/">æ¾³æ´²å°å“¥åŸå§‹æŠ€æœ¯</a></li><li><a href="https://molunerfinn.com/">MARKSZã®Blog</a></li><li><a href="https://blog.fishlee.net/">é­šÂ·åèŠ±å›­</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æµ‹è¯•åŒº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>im-a-test</title>
      <link href="/2018/08/27/im-a-test/"/>
      <url>/2018/08/27/im-a-test/</url>
      
        <content type="html"><![CDATA[<p>I am a testâ€¦</p><p>test for git push, because I losted an articleâ€¦</p><p><del>å¥½å§ï¼Œèƒ½æ¨é€ï¼Œå°±æ˜¯ä¸¢äº†å‘¨æœ«çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè™½ç„¶å®ƒæ˜æ˜å°±èººåœ¨æ–‡ä»¶å¤¹é‡Œ</del></p><p>æ—¢ç„¶èƒ½æ¨é€ï¼Œé‚£æˆ‘å°±å†å¾—ç‘Ÿä¸€ä¸‹ã€‚</p><p>å¤§èˆ…äºŒèˆ…éƒ½æ˜¯ä»–èˆ…ï¼Œå¤§å“ˆäºŒå“ˆéƒ½æ˜¯æ¡ç‹—~</p><p>å™¢<del>å™¢</del></p><p>éƒ½æ˜¯ç‹—~~</p>]]></content>
      
      
      <categories>
          
          <category> æµ‹è¯•åŒº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Happy Birthday</title>
      <link href="/2018/08/13/happy-birthday/"/>
      <url>/2018/08/13/happy-birthday/</url>
      
        <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘çˆ¹ç”Ÿæ—¥ï¼Œæˆ‘ç«Ÿç„¶å¯è€»çš„å¿˜äº†â€¦â€¦</p><p>æ™šä¸Šçœ‹åˆ°æˆ‘å§‘å§‘ä»¬åœ¨ç¾¤é‡Œå‘çº¢åŒ…ç¥ç¦ï¼Œå“å¾—æˆ‘èµ¶ç´§æ‰“ç”µè¯è¡¨ç¤ºæ…°é—®ã€‚</p><p>ç»“æœæ¥é€šç”µè¯æˆ‘å¦ˆä¹Ÿå¿˜äº†ã€‚</p><p>å¿ƒç–¼æˆ‘çˆ¹ã€‚</p><p>Happy Birthday!</p><p><img src= "/img/loading.gif" data-lazy-src="/images/birthday.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/08/13/hello-world/"/>
      <url>/2018/08/13/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>nothing to say,just hope</title>
      <link href="/2018/07/19/nothing-to-say/"/>
      <url>/2018/07/19/nothing-to-say/</url>
      
        <content type="html"><![CDATA[<p>ä¸€çœ¨çœ¼æˆ‘ä¸€ä¸ªæœˆæ²¡æ›´æ–°åšå®¢äº†â€¦â€¦</p><h4 id="æ— æ³•æŒ½ç•™çš„æ¶ˆé€"><a href="#æ— æ³•æŒ½ç•™çš„æ¶ˆé€" class="headerlink" title="æ— æ³•æŒ½ç•™çš„æ¶ˆé€"></a>æ— æ³•æŒ½ç•™çš„æ¶ˆé€</h4><p>æ—©ä¸Šèµ·æ¥,ç…§ä¾‹å»é˜³å°è§‚å¯Ÿæˆ‘çš„å‡ ç›†è‚‰è‚‰æ—¶ï¼Œå‘ç°å…¶ä¸­æœ€å¤§çš„ä¸€é¢—é»‘è…äº†ã€‚</p><p>åšå®çš„æ ¹èŒç˜ªä¸‹å»ä¸€åŠï¼Œå·²ç»æ’‘ä¸ä½å¶å† å¼€å§‹æ­ªäº†â€¦â€¦<br>æˆ‘æƒ³æŠŠå®ƒæªå‡ºæ¥ç å¤´ï¼Œè¯•å›¾å»æŒ½ç•™è¿™ä¸ªè„†å¼±çš„ç”Ÿå‘½ï¼Œç»“æœæªå‡ºæ¥å¶å­ä¹Ÿå¿«æ‰å…‰äº†ã€‚<br>å¼ºå¿ç€å¿ƒç–¼æŠŠå¶å† åˆ‡äº†ä¸‹æ¥ï¼Œæ”¾åœ¨ä¸€æ—é€šé£å¤„æ™¾ç€ï¼Œç„¶åæŠŠæ ¹å’Œæ‰è½çš„å¶å­éƒ½æ”¾è¿›æ—è¾¹çš„ç›’å­ï¼Œé‚£é‡Œå·²ç»æ”¾äº†å¾ˆå¤šå¹²æ¯è…æœ½çš„å¶å­ã€‚</p><p>åº”è¯¥æ˜¯ä¸€ä¸ªæœˆå‰å§ï¼Œå½“æ—¶é•¿å¾—æœ€å¥½çš„ä¸€é¢—è‚‰ï¼Œå¦‚ä»Šå°±èººåœ¨â€œæ£ºæâ€é‡Œï¼Œå¼ ç‰™èˆçˆªåœ°ç­‰ç€æ–°æˆå‘˜çš„åˆ°æ¥ã€‚</p><p>æˆ‘çš„è‚‰è‚‰éƒ½æŒºå‡„æƒ¨çš„ï¼š<br>æœ€å¥½çœ‹çš„ä¸€é¢—ï¼Œæ­»äº†ï¼ŒåŒ–æ°´ï¼›<br>ç¬¬äºŒå¥½çœ‹çš„ä¸€é¢—è€æ¡©ï¼Œé•¿å¾’äº†ï¼Œç°åœ¨è€·æ‹‰åœ¨ç›†å­å¤–è¾¹ï¼Œä¸€å‰¯çŒ¥ççš„æ ·å­ï¼›<br>æœ€å¤§çš„å’Œæœ€å¤§çš„æ­»åæœ€å¤§çš„ï¼Œæ­»äº†ï¼Œé»‘è…ï¼›<br>æœ€å°çš„ä¸€ä¸ªçŸ³ç”ŸèŠ±å‹æ ¹å„¿å°±æ²¡æ´»è¿‡ï¼›<br>æœ€å–œçˆ±çš„å‘è´¢æ ‘ä»™äººçƒæŸ“äº†èš§å£³è™«,å…‘äº†ç‚¹é†‹å–·äº†ä¸€ä¸‹,ç°åœ¨å¥½äº†ç‚¹ã€‚</p><p>è¿™ä¹ˆæ•´ç†äº†ä¸€ä¸‹è§‰å¾—æ›´å‡„å‡‰äº†ï¼Œå‡ æ£µæ­»çš„å¤šè‚‰æˆ‘ç‰¹ä¹ˆå°±çŸ¥é“ä¸ªçŸ³ç”ŸèŠ±å«çŸ³ç”ŸèŠ±ã€‚ğŸ˜‚</p><p>å¶æ’çš„è‹—æœ‰ä¸‰ä¸ªæ­£åœ¨èŒå£®æˆé•¿,æœ€å¤§çš„ä¸€ä¸ªè€å¶å­å´å¹²æ¯äº†,åªå‰©å‡ é¢—æ–°å‡ºçš„å«©èŠ½è¿˜å‚æ­»æŒ£æ‰,èƒ½ä¸èƒ½æŒ¨è¿‡è¿™ä¸ªå¤å¤©è¿˜æ˜¯ä¸€ä¸ªè¿·ã€‚</p><p>è¿˜æ˜¯æ’‘è¿‡è¿™ä¸ªå¤å¤©å§ï¼Œæˆ‘å¾ˆå¸Œæœ›ä½ ä»¬éƒ½å¥½å¥½æ´»ç€â€¦â€¦</p><p><img src= "/img/loading.gif" data-lazy-src="/images/heart.jpg" alt="æ¯”å¿ƒ"></p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelä½¿ç”¨chunkè‡ªæ›´æ–°æœ‰è¯¯çš„åŸå› </title>
      <link href="/2018/06/19/Laravel-chunk/"/>
      <url>/2018/06/19/Laravel-chunk/</url>
      
        <content type="html"><![CDATA[<p>Laravel çš„ chunk åœ¨æŸ¥è¯¢å¤§é‡æ•°æ®æ—¶éå¸¸å¥½ç”¨ï¼Œä½†æ˜¯åœ¨ç”¨æŸä¸ªå­—æ®µåšä¸ºæ£€ç´¢æ¡ä»¶ï¼Œå¹¶ä¸”åœ¨ç¨‹åºå†…éƒ¨æœ‰æ›´æ–°è¿™ä¸ªå­—æ®µçš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ä¸€éƒ¨åˆ†æ•°æ®ä¸¢å¤±ã€‚</p><p>åŸå› æ˜¯è¿™æ ·çš„ï¼Œæ¯”å¦‚æœ‰7æ¡æ•°æ®ï¼Œæ¯æ¬¡å–2æ¡ï¼Œé‚£ä¹ˆè¿™7æ¡æ•°æ®å°±ä¼šè¢«åˆ†ä¸º2ï¼Œ2ï¼Œ2ï¼Œ1è¿™æ ·å‡ å—ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œå–å¾—ç¬¬ä¸€é¡µï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ª2çš„æ•°æ®å—ï¼Œæ›´æ–°å®Œåå†å–æ•°æ®ï¼ŒåŸæ¥çš„ç¬¬äºŒé¡µå°±å˜æˆäº†ç¬¬ä¸€é¡µï¼Œä½†æ˜¯è¿™æ—¶å€™å–çš„è¿˜æ˜¯ç¬¬äºŒé¡µï¼Œæ‰€ä»¥è¿™æ—¶å€™å–çš„æ˜¯ç¬¬ä¸‰ä¸ªæ•°æ®å—ï¼Œåˆ°äº†ç¬¬ä¸‰æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼ŒåŸæ¥çš„ç¬¬äºŒé¡µå˜æˆäº†ç¬¬ä¸€é¡µï¼ŒåŸæ¥çš„ç¬¬å››é¡µå˜æˆäº†ç¬¬äºŒé¡µï¼Œç¬¬ä¸‰é¡µå°±å˜æˆäº†ç©ºçš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰é¡µå°±ä»€ä¹ˆéƒ½å–ä¸åˆ°äº†ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š<br>å¯ä»¥ä½¿ç”¨ laravel çš„æ¸¸æ ‡ cursor()</p><p><img src= "/img/loading.gif" data-lazy-src="/images/chunk.png" alt="å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelä½¿ç”¨ftpä¼ è¾“æ–‡ä»¶æ—¶æŠ¥é”™ftp_put() No data connectionçš„è§£å†³</title>
      <link href="/2018/06/12/Laravel-ftp/"/>
      <url>/2018/06/12/Laravel-ftp/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$file &#x3D; &quot;test.dat&quot;;</span><br><span class="line"></span><br><span class="line">$ftp_server&#x3D;&quot;ftp.server.com&quot;;</span><br><span class="line">$ftp_user &#x3D; &quot;myname&quot;;</span><br><span class="line">$ftp_pass &#x3D; &quot;mypass&quot;;</span><br><span class="line">$destination_file &#x3D; &quot;test.dat&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$cid&#x3D;ftp_connect($ftp_server);</span><br><span class="line">if(!$cid) &#123;</span><br><span class="line">    exit(&quot;Could not connect to server: $ftp_server\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$login_result &#x3D; ftp_login($cid, $ftp_user, $ftp_pass);</span><br><span class="line">if (!$login_result) &#123;</span><br><span class="line">    echo &quot;FTP connection has failed!&quot;;</span><br><span class="line">    echo &quot;Attempted to connect to $ftp_server for user $ftp_user&quot;;</span><br><span class="line">    exit;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">echo &quot;Connected to $ftp_server, for user $ftp_user&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$upload &#x3D; ftp_put($cid, $destination_file, $file, FTP_BINARY);</span><br><span class="line">if (!$upload) &#123;</span><br><span class="line">    echo &quot;Failed upload for $source_file to $ftp_server as $destination_file&lt;br&gt;&quot;;</span><br><span class="line">    echo &quot;FTP upload has failed!&quot;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    echo &quot;Uploaded $source_file to $ftp_server as $destination_file&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ftp_close($cid);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯æ²¡æœ‰å®šä¹‰ftpçš„ä¸»è¢«åŠ¨æ¨¡å¼ï¼Œtrueæ˜¯è¢«åŠ¨æ¨¡å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp_pasv($cid, true);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšä¸ªè®°å½•</title>
      <link href="/2018/05/24/money-to-house/"/>
      <url>/2018/05/24/money-to-house/</url>
      
        <content type="html"><![CDATA[<p>å‰å¤©æ™šä¸Šå›äº†è¶Ÿéƒ‘å·ï¼Œæ˜¨å¤©ä¸ºäº†åŠç†æŒ‰æ­æ»¡åŸè·‘ï¼Œé¡¶ç€ç¡•å¤§çš„å¤ªé˜³ï¼Œæ™’å¾—æˆ‘çä¸å¼€çœ¼ç›â€¦</p><p>ç´¯ï¼Œä½†æ˜¯è¿˜æ˜¯åšä¸‹è®°å½•å§ã€‚</p><ol><li>ä¸€å¹´ä»¥ä¸Šçš„åŠ³åŠ¡åˆåŒ</li><li>æ”¶å…¥è¯æ˜ï¼Œå…¬å¸ç›–ç« </li><li>ééƒ‘æˆ·ç±è´­æˆ¿ç”³è¯·è¡¨ï¼Œä¸¤ä»½ï¼Œç¬¬äºŒé¡µå…¬å¸ç›–ç« </li><li>å…¬å¸è¥ä¸šæ‰§ç…§å‰¯æœ¬å¤å°ä»¶åŠ å…¬å¸ç›–ç« </li><li>åœ¨èŒè¯æ˜ï¼Œå…¬å¸ç›–ç« </li><li>æ— æˆ¿è¯æ˜ï¼Œæˆ¿ç®¡å±€è‡ªåŠ©åŠç†</li><li>è´·æ¬¾é“¶è¡Œçš„é“¶è¡Œå¡åŠå¡ä¸»æ¡£</li><li>å­¦å£«è¯ã€å­¦ä½è¯å¤å°ä»¶</li><li>å­¦ä¿¡ç½‘å­¦ç±ã€å­¦å†éªŒè¯ä¿¡æ¯å¤å°ä»¶</li><li>ä¸ªäººä¿¡ç”¨æŠ¥å‘Š</li><li>é“¶è¡Œæµæ°´è®°å½•</li><li>è´­æˆ¿è½¬è´¦è®°å½•</li><li>è·Ÿé“¶è¡Œå®¢æˆ·ç»ç†åˆå½±â€“ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸€é¡¹ä½†æ˜¯ç¡®å®æ˜¯æœ‰</li></ol><p>è¿™æ˜¯åŠç†æŒ‰æ­ï¼Œè¿˜éœ€è¦å†å›å»ä¸€è¶Ÿç­¾äº›æ–‡ä»¶â€¦â€¦</p><p>å„ç§æ‰‹ç»­åŠç†å®Œæˆçš„ä¸¤ä¸ªæœˆåå¼€å§‹è¿˜æˆ¿è´·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelè½¬æ¢æ—¶é—´ä¸ºxxåˆ†é’Ÿå‰</title>
      <link href="/2018/05/08/Laravel-time-change/"/>
      <url>/2018/05/08/Laravel-time-change/</url>
      
        <content type="html"><![CDATA[<p><img src= "/img/loading.gif" data-lazy-src="/images/time.png" alt="ç¤ºæ„å›¾"></p><span id="more"></span><p>æ¯”å¦‚è¯´æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šä¸€ç¯‡æ–‡ç« çš„å‘è¡¨æ—¶é—´ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">**è·ç¦»ç°åœ¨æ—¶é—´**      **æ˜¾ç¤ºæ ¼å¼**</span><br><span class="line">&lt; 1å°æ—¶                 xxåˆ†é’Ÿå‰</span><br><span class="line">1å°æ—¶-24å°æ—¶            xxå°æ—¶å‰ </span><br><span class="line">1å¤©-10å¤©                xxå¤©å‰</span><br><span class="line">&gt;10å¤©                   ç›´æ¥æ˜¾ç¤ºæ—¥æœŸ</span><br></pre></td></tr></table></figure><p>å…¶å®laravelå·²ç»å†…ç½®å¥½äº†ï¼Œåªéœ€è¦ç”¨Carbonå°±å¯ä»¥å®ç°äº†ã€‚</p><h4 id="ä¸­æ–‡åŒ–æ˜¾ç¤º"><a href="#ä¸­æ–‡åŒ–æ˜¾ç¤º" class="headerlink" title="ä¸­æ–‡åŒ–æ˜¾ç¤º"></a>ä¸­æ–‡åŒ–æ˜¾ç¤º</h4><p>åœ¨ app\Providers\AppServiceProvider.php ä¸­æ·»åŠ ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public function boot() &#123;</span><br><span class="line">    Carbon::setLocale(&#39;zh&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Modelä¸­è°ƒç”¨"><a href="#Modelä¸­è°ƒç”¨" class="headerlink" title="Modelä¸­è°ƒç”¨"></a>Modelä¸­è°ƒç”¨</h4><p>å¦‚æœä½ æƒ³åœ¨æŸä¸ªç±»å‹çš„æ•°æ®ä¸­äººæ€§åŒ–æ˜¾ç¤ºæ—¶é—´ï¼Œé‚£ä¹ˆå°±åœ¨è¯¥Modelä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public function getCreatedAtAttribute($date)&#123;</span><br><span class="line">    &#x2F;&#x2F; é»˜è®¤100å¤©å‰è¾“å‡ºå®Œæ•´æ—¶é—´ï¼Œå¦åˆ™è¾“å‡ºäººæ€§åŒ–çš„æ—¶é—´</span><br><span class="line">    if (Carbon::now() &gt; Carbon::parse($date)-&gt;addDays(100)) &#123;</span><br><span class="line">        return Carbon::parse($date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return Carbon::parse($date)-&gt;diffForHumans();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºçˆ±å¥½å……å€¼</title>
      <link href="/2018/04/18/my-hobbies/"/>
      <url>/2018/04/18/my-hobbies/</url>
      
        <content type="html"><![CDATA[<p>é‚£ä¸ªå‘¨æœ«ï¼Œé˜³å…‰æ˜åªšã€‚</p><p>æˆ‘å…‰ç€è„šååœ¨çª—å°å‰ä¼ºå€™å¤šè‚‰ï¼Œçœ‹å®ƒä»¬ä¸€ä¸ªä¸ªæ†¨æ€å¯æ¬ï¼Œå’”å’”å‡ å¼ ç…§ç‰‡å¹¶éšæ‰‹å‘åˆ°äº†ç¾¤é‡Œã€‚</p><p>ç„¶åï¼ŒåŒæ ·å–œæ¬¢èŠ±èŠ±è‰è‰çš„å§‘å§‘å°±è¢«ç‚¸äº†å‡ºæ¥ï¼Œæˆ‘ä¿©å…´è‡´å‹ƒå‹ƒçš„èŠèµ·äº†å¿ƒå¾—ã€‚</p><span id="more"></span><p>çœ‹çœ‹èº«è¾¹æ…¢æ…¢ç§¯æ”’çš„ä¸€å †ä¸œè¥¿å’Œç¾¤é‡Œä¸åœè·³åŠ¨çš„æ–‡å­—ï¼Œçªç„¶è§‰å¾—è‡ªå·±ç¦»æƒ³è¦çš„ç”Ÿæ´»å¥½è¿‘ã€‚</p><p>ä»¥å‰åœ¨å­¦æ ¡ä¹°çš„ç¬¬ä¸€å¯¹å“‘é“ƒï¼Œå“å“çš„ç©äº†ä¸¤å¹´å¤šï¼Œç¦»å¼€éƒ‘å·æ—¶ç•™ç»™äº†ä¸€ä¸ªè€èƒ³è†Šè€è…¿å„¿çš„å®¶ä¼™ï¼Œè¿™å®¶ä¼™ä¹Ÿä¸ä¼šçˆ±æƒœå®ƒï¼Œå“ã€‚</p><p>å‰å‡ å¤©çœ‹ç€èº«ä¸Šæ—¥ç›Šå¢é•¿çš„è‚‰è‚‰ï¼Œç»ˆäºä¸å¿å¿ƒç»§ç»­å •è½ä¸‹å»ï¼Œç°åœ¨å·²ç»ç»“å®å¤šäº†ã€‚âœŒ</p><p><img src= "/img/loading.gif" data-lazy-src="/images/%E8%82%89%E8%82%89.jpg" alt="æˆ‘çš„è‚‰"><br>è™½ç„¶æˆ‘çš„æœå†»ä¹™å¥³å¿ƒè¿˜æ²¡æœ‰æœå†»è‰²ï¼Œç‰å ä¹Ÿæ²¡æœ‰å¼€å§‹å ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆçˆ±å®ƒä»¬å‘€~</p><p><img src= "/img/loading.gif" data-lazy-src="/images/%E5%88%BB%E5%88%80.jpg" alt="åˆ»åˆ€"></p><p>äººè¿˜æ˜¯è¦æœ‰ç‚¹å„¿çˆ±å¥½çš„ï¼Œæ¶ˆç£¨æ—¶å…‰ï¼Œè°ƒå‰‚ç”Ÿæ´»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerä½¿ç”¨æ•™ç¨‹-ä»¥Dockerfileå®šåˆ¶é•œåƒ</title>
      <link href="/2018/04/10/Docker-images/"/>
      <url>/2018/04/10/Docker-images/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å¯¹äº Linux è€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½ root æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚</p><p>è€Œ Docker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu 16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/docker.jpg" alt="Docker"></p><span id="more"></span><h4 id="ç†è§£é•œåƒæ„æˆ"><a href="#ç†è§£é•œåƒæ„æˆ" class="headerlink" title="ç†è§£é•œåƒæ„æˆ"></a>ç†è§£é•œåƒæ„æˆ</h4><p>é•œåƒæ˜¯å®¹å™¨çš„åŸºç¡€ï¼Œæ¯æ¬¡æ‰§è¡Œ docker run çš„æ—¶å€™éƒ½ä¼šæŒ‡å®šä»¥å“ªä¸ªé•œåƒä½œä¸ºå®¹å™¨è¿è¡Œçš„åŸºç¡€ã€‚</p><p>é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ï¼Œæ¯ä¸€å±‚æ˜¯åœ¨å‰ä¸€å±‚çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ä¿®æ”¹ï¼›è€Œå®¹å™¨åŒæ ·ä¹Ÿæ˜¯å¤šå±‚å­˜å‚¨ï¼Œæ˜¯åœ¨ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶åŸºç¡€ä¸ŠåŠ ä¸€å±‚ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶çš„å­˜å‚¨å±‚ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬ä»¥å®šåˆ¶ä¸€ä¸ª Web æœåŠ¡å™¨ä¸ºä¾‹å­ï¼Œæ¥è®²è§£é•œåƒæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name webserver -d -p 80:80 nginx</span><br></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤ä¼šç”¨ nginx é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å‘½åä¸º webserverï¼Œå¹¶ä¸”æ˜ å°„äº†å®¿ä¸»æœºçš„ 80 ç«¯å£ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å®¿ä¸»æœºç”¨æµè§ˆå™¨å»è®¿é—®è¿™ä¸ª nginx æœåŠ¡å™¨ã€‚<br>dockerçš„å¯åŠ¨ç”»é¢ä¸­æœ‰å½“å‰å®¹å™¨çš„ ipï¼Œä¾‹å¦‚ï¼š192.168.99.100ï¼Œæ‰“å¼€æµè§ˆå™¨ç›´æ¥è®¿é—®è¯¥ ip å°±èƒ½çœ‹åˆ°é»˜è®¤çš„ Nginx æ¬¢è¿é¡µé¢ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åšç‚¹å°è¯•ï¼Œä¿®æ”¹ä¸‹nginxçš„æ¬¢è¿é¡µé¢ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker exec -it webserver bash</span><br><span class="line">root@bcd5b7c85e68:&#x2F;# echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line">root@bcd5b7c85e68:&#x2F;# exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»¥äº¤äº’å¼ç»ˆç«¯æ–¹å¼è¿›å…¥ webserver å®¹å™¨ï¼Œå¹¶æ‰§è¡Œäº† bash å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è·å¾—ä¸€ä¸ªå¯æ“ä½œçš„ Shellã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ç”¨ Hello, Docker! è¦†ç›–äº† /usr/share/nginx/html/index.html çš„å†…å®¹ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å†åˆ·æ–°æµè§ˆå™¨çš„è¯ï¼Œä¼šå‘ç°å†…å®¹è¢«æ”¹å˜äº†ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/nginx.png" alt="Nginx"></p><p>æˆ‘ä»¬ä¿®æ”¹äº†å®¹å™¨çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ”¹åŠ¨äº†å®¹å™¨çš„å­˜å‚¨å±‚ã€‚è¦ä¿å­˜è¿™äº›ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ docker æä¾›çš„ docker commit å‘½ä»¤å°†å­˜å‚¨å±‚ä¿å­˜ä¸‹æ¥æˆä¸ºæ–°çš„é•œåƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯åœ¨åŸæœ‰é•œåƒçš„åŸºç¡€ä¸Šï¼Œå†å åŠ ä¸Šæ”¹åŠ¨äº†çš„å­˜å‚¨å±‚å¹¶æ„æˆæ–°çš„é•œåƒã€‚</p><p>è¿™æ„å‘³ç€æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½ä¼šè®©å­˜å‚¨å±‚å åŠ ï¼Œè€Œä¸”ä½ æ‰€åˆ é™¤çš„ä¸Šä¸€å±‚çš„ä¸œè¥¿å¹¶ä¸ä¼šä¸¢å¤±ï¼Œä¼šä¸€ç›´å¦‚å½±éšå½¢çš„è·Ÿç€è¿™ä¸ªé•œåƒï¼Œå³ä½¿æ ¹æœ¬æ— æ³•è®¿é—®åˆ°ã€‚</p><p>æƒ³æƒ³å°±æ˜¯ä»¶å¾ˆææ€–çš„äº‹æƒ…ã€‚ğŸ˜°</p><p>ä¸è¿‡ï¼Œå­˜åœ¨å³æ˜¯çœŸç†ï¼Œcommit è™½ç„¶ææ€–ï¼Œä½†è¿˜æ˜¯å¾ˆæœ‰ç”¨æ­¦ä¹‹åœ°çš„ï¼Œæ¯”å¦‚è¢«å…¥ä¾µåä¿å­˜ç°åœºå’Œä¸€äº›ç‰¹æ®Šåœºåˆã€‚</p><h4 id="ä½¿ç”¨-Dockerfile-å®šåˆ¶é•œåƒ"><a href="#ä½¿ç”¨-Dockerfile-å®šåˆ¶é•œåƒ" class="headerlink" title="ä½¿ç”¨ Dockerfile å®šåˆ¶é•œåƒ"></a>ä½¿ç”¨ Dockerfile å®šåˆ¶é•œåƒ</h4><p>å¦‚æœæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€å±‚ä¿®æ”¹ã€å®‰è£…ã€æ„å»ºã€æ“ä½œçš„å‘½ä»¤éƒ½å†™å…¥ä¸€ä¸ªè„šæœ¬ï¼Œç”¨è¿™ä¸ªè„šæœ¬æ¥æ„å»ºå’Œå®šåˆ¶é•œåƒï¼Œé‚£ä¹ˆä¹‹å‰æåŠé€æ˜æ€§å’Œä½“ç§¯è‡ƒè‚¿çš„é—®é¢˜å°±éƒ½ä¼šè§£å†³ã€‚</p><p>è¿™ä¸ªè„šæœ¬å°±æ˜¯ Dockerfileã€‚</p><p>Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å†…åŒ…å«äº†ä¸€æ¡æ¡çš„æŒ‡ä»¤(Instruction)ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚</p><p>è¿˜æ˜¯ä»¥ä¸Šè¾¹çš„ nginx ä¸ºä¾‹ã€‚</p><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;c&#x2F;docker</span><br><span class="line">cd &#x2F;c&#x2F;docker</span><br><span class="line">touch Dockerfile</span><br></pre></td></tr></table></figure><p>å…¶å†…å®¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line">RUN echo &#39;&lt;h1&gt;Hello, M-finder!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br></pre></td></tr></table></figure><h5 id="FROM-æŒ‡å®šåŸºç¡€é•œåƒ"><a href="#FROM-æŒ‡å®šåŸºç¡€é•œåƒ" class="headerlink" title="FROM æŒ‡å®šåŸºç¡€é•œåƒ"></a>FROM æŒ‡å®šåŸºç¡€é•œåƒ</h5><p>æ‰€è°“å®šåˆ¶é•œåƒï¼Œå°±æ˜¯ä»¥ä¸€ä¸ªé•œåƒä¸ºåŸºç¡€ï¼Œåœ¨å…¶ä¸Šè¿›è¡Œå®šåˆ¶ã€‚å°±åƒæˆ‘ä»¬å…ˆè¿è¡Œäº†ä¸€ä¸ª nginx é•œåƒçš„å®¹å™¨ï¼Œå†è¿›è¡Œä¿®æ”¹ä¸€æ ·ï¼ŒåŸºç¡€é•œåƒæ˜¯å¿…é¡»æŒ‡å®šçš„ã€‚</p><p>FROM å°±æ˜¯æŒ‡å®šåŸºç¡€é•œåƒï¼Œå› æ­¤ä¸€ä¸ª Dockerfile ä¸­ FROM æ˜¯å¿…å¤‡çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚</p><h5 id="RUN-æ‰§è¡Œå‘½ä»¤"><a href="#RUN-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="RUN æ‰§è¡Œå‘½ä»¤"></a>RUN æ‰§è¡Œå‘½ä»¤</h5><p>RUN æŒ‡ä»¤æ˜¯ç”¨æ¥æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤çš„ã€‚ç”±äºå‘½ä»¤è¡Œçš„å¼ºå¤§èƒ½åŠ›ï¼ŒRUN æŒ‡ä»¤åœ¨å®šåˆ¶é•œåƒæ—¶æ˜¯æœ€å¸¸ç”¨çš„æŒ‡ä»¤ä¹‹ä¸€ã€‚å…¶æ ¼å¼æœ‰ä¸¤ç§ï¼š</p><p>shell æ ¼å¼ï¼šRUN &lt;å‘½ä»¤&gt;ï¼Œå°±åƒç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‘½ä»¤ä¸€æ ·ã€‚<br>åˆšæ‰å†™çš„ Dockerfile ä¸­çš„ RUN æŒ‡ä»¤å°±æ˜¯è¿™ç§æ ¼å¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br></pre></td></tr></table></figure><p>run å‘½ä»¤åº”å°½å¯èƒ½çš„å‹ç¼©ä¸ºä¸€è¡Œï¼Œå› ä¸ºæ¯ä¸€ä¸ª run å‘½ä»¤å°±æ˜¯ä¸€å±‚å­˜å‚¨å±‚ï¼Œè€Œä¸”ï¼Œå‘½ä»¤åº”è¯¥éµå¾ªè‰¯å¥½çš„ä»£ç æ ¼å¼ï¼Œæ¯”å¦‚æ¢è¡Œã€ç¼©è¿›ã€æ³¨é‡Šç­‰ï¼Œä¼šè®©ç»´æŠ¤ã€æ’éšœæ›´ä¸ºå®¹æ˜“,æœ€åä¹Ÿåº”è¯¥æ·»åŠ æ¸…ç†å·¥ä½œçš„å‘½ä»¤ã€‚</p><h5 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h5><p>åœ¨ Dockerfile æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t nginx:v3 .</span><br><span class="line">Sending build context to Docker daemon   2.56kB</span><br><span class="line">Step 1&#x2F;2 : FROM nginx</span><br><span class="line"> ---&gt; c5c4e8fa2cf7</span><br><span class="line">Step 2&#x2F;2 : RUN echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line"> ---&gt; Running in 4e2f0f98fbfe</span><br><span class="line">Removing intermediate container 4e2f0f98fbfe</span><br><span class="line"> ---&gt; 8b70819a7261</span><br><span class="line">Successfully built 8b70819a7261</span><br><span class="line">Successfully tagged nginx:v3</span><br><span class="line">SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have &#39;-rwxr-xr-x&#39; permissions. It is recommended to double check and reset permissions for sensitive files and directories.</span><br></pre></td></tr></table></figure><p>ä»å‘½ä»¤çš„è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°é•œåƒçš„æ„å»ºè¿‡ç¨‹ã€‚åœ¨ Step 2 ä¸­ï¼Œå¦‚åŒæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é‚£æ ·ï¼ŒRUN æŒ‡ä»¤å¯åŠ¨äº†ä¸€ä¸ªå®¹å™¨ 4e2f0f98fbfeï¼Œæ‰§è¡Œäº†æ‰€è¦æ±‚çš„å‘½ä»¤ï¼Œå¹¶æœ€åæäº¤äº†è¿™ä¸€å±‚ c5c4e8fa2cf7ï¼Œéšååˆ é™¤äº†æ‰€ç”¨åˆ°çš„è¿™ä¸ªå®¹å™¨ 4e2f0f98fbfeã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† docker build å‘½ä»¤è¿›è¡Œé•œåƒæ„å»ºã€‚å…¶æ ¼å¼ä¸ºï¼š</p><p>docker build [é€‰é¡¹] &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt;<br>åœ¨è¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†æœ€ç»ˆé•œåƒçš„åç§° -t nginx:v3ï¼Œæ„å»ºæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åƒä¹‹å‰è¿è¡Œ nginx é‚£æ ·æ¥è¿è¡Œè¿™ä¸ªé•œåƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerä½¿ç”¨æ•™ç¨‹-å…¥é—¨</title>
      <link href="/2018/03/28/docker-use/"/>
      <url>/2018/03/28/docker-use/</url>
      
        <content type="html"><![CDATA[<p>dockerå·²ç»è£…å¥½äº†ï¼Œä½†æ˜¯å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆç”¨ï¼Œå…ˆæ¥ç‚¹å®˜ç½‘çš„ä¾‹å­çœ‹çœ‹å§ã€‚</p><p>dockerè‡ªå¸¦çš„ç»ˆç«¯ä¸å¤ªå¥½ç”¨ï¼Œæ‰€ä»¥å…ˆç”¨xshellè¿æ¥ä¸Šç»ˆç«¯ï¼Œipä¸ºç»ˆç«¯å¯åŠ¨æ—¶æ˜¾ç¤ºçš„ï¼š192.1168.99.100ï¼Œé»˜è®¤åº”è¯¥éƒ½æ˜¯è¿™ä¸ªã€‚<br>è´¦å·å¯†ç æ˜¯ï¼šdocker / tcuser</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">                        ##         .</span><br><span class="line">                  ## ## ##        &#x3D;&#x3D;</span><br><span class="line">               ## ## ## ## ##    &#x3D;&#x3D;&#x3D;</span><br><span class="line">           &#x2F;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\___&#x2F; &#x3D;&#x3D;&#x3D;</span><br><span class="line">      ~~~ &#123;~~ ~~~~ ~~~ ~~~~ ~~~ ~ &#x2F;  &#x3D;&#x3D;&#x3D;- ~~~</span><br><span class="line">           \______ o           __&#x2F;</span><br><span class="line">             \    \         __&#x2F;</span><br><span class="line">              \____\_______&#x2F;</span><br><span class="line"> _                 _   ____     _            _</span><br><span class="line">| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __</span><br><span class="line">| &#39;_ \ &#x2F; _ \ &#x2F; _ \| __| __) &#x2F; _&#96; |&#x2F; _ \ &#x2F; __| |&#x2F; &#x2F; _ \ &#39;__|</span><br><span class="line">| |_) | (_) | (_) | |_ &#x2F; __&#x2F; (_| | (_) | (__|   &lt;  __&#x2F; |</span><br><span class="line">|_.__&#x2F; \___&#x2F; \___&#x2F; \__|_____\__,_|\___&#x2F; \___|_|\_\___|_|</span><br></pre></td></tr></table></figure><span id="more"></span><h4 id="å®‰è£…centosé•œåƒ"><a href="#å®‰è£…centosé•œåƒ" class="headerlink" title="å®‰è£…centosé•œåƒ"></a>å®‰è£…centosé•œåƒ</h4><p>æ‹‰å–ä¸€ä¸ªcentosçš„æ˜ åƒå¹¶åœ¨è¡ç”Ÿå®¹å™¨å†…è¿è¡Œäº¤äº’å¼ç»ˆç«¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --interactive --tty centos bash</span><br></pre></td></tr></table></figure><p>å®˜ç½‘çš„ä¾‹å­æ˜¯ubuntuï¼Œæ²¡ç©è¿‡ï¼Œæ‰€ä»¥æ¢æˆäº†æ›´ç†Ÿæ‚‰ç‚¹çš„centos</p><p>å®‰è£…å®Œæˆåä¼šè‡ªåŠ¨è¿›å…¥centosçš„æ§åˆ¶å°ï¼Œè¾“å…¥exitå¯ä»¥é€€å‡ºã€‚</p><h4 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach --publish 80:80 --name webserver nginx</span><br></pre></td></tr></table></figure><p>è£…å®Œä»¥åï¼Œåœ¨ä½ çš„å®¿ä¸»æœºï¼Œä¹Ÿå°±æ˜¯è£…dockerçš„ç”µè„‘ä¸Šæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥dockerå¯åŠ¨æ—¶è¾“å‡ºçš„ipå°±èƒ½å¤Ÿçœ‹åˆ°nginxçš„æ¬¢è¿é¡µé¢äº†ã€‚</p><h4 id="åˆ é™¤é•œåƒ"><a href="#åˆ é™¤é•œåƒ" class="headerlink" title="åˆ é™¤é•œåƒ"></a>åˆ é™¤é•œåƒ</h4><p>1.åœæ­¢æ‰€æœ‰çš„containerï¼Œè¿™æ ·æ‰èƒ½å¤Ÿåˆ é™¤å…¶ä¸­çš„imagesï¼š</p><p>docker stop $(docker ps -a -q)</p><p>å¦‚æœæƒ³è¦åˆ é™¤æ‰€æœ‰containerçš„è¯å†åŠ ä¸€ä¸ªæŒ‡ä»¤ï¼š</p><p>docker rm $(docker ps -a -q)</p><p>2.æŸ¥çœ‹å½“å‰æœ‰äº›ä»€ä¹ˆimages</p><p>docker images</p><p>3.åˆ é™¤imagesï¼Œé€šè¿‡imageçš„idæ¥æŒ‡å®šåˆ é™¤è°</p><p>docker rmi <image id></p><p>æƒ³è¦åˆ é™¤untagged imagesï¼Œä¹Ÿå°±æ˜¯é‚£äº›idä¸º<None>çš„imageçš„è¯å¯ä»¥ç”¨</p><p>docker rmi $(docker images | grep â€œ^<none>â€œ | awk â€œ{print $3}â€)</p><p>è¦åˆ é™¤å…¨éƒ¨imageçš„è¯</p><p>docker rmi $(docker images -q)</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…æ•™ç¨‹</title>
      <link href="/2018/03/27/docker-install/"/>
      <url>/2018/03/27/docker-install/</url>
      
        <content type="html"><![CDATA[<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€ å¹¶éµä»Apache2.0åè®®å¼€æºã€‚</p><p>Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚</p><p>å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚</p><p>dockerå®˜æ–¹æ¨èäº†ä¸¤ç§å®‰è£…æ–¹å¼:appå’Œtoolboxã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/docker.jpg" alt="Docker"></p><span id="more"></span><p>æ³¨ï¼šappæ–¹å¼å¯¹ç³»ç»Ÿç‰ˆæœ¬å’Œé…ç½®ä¼šæœ‰ä¸€å®šè¦æ±‚ï¼ŒMacç‰ˆæœ¬ä¼šè‡ªåŠ¨ä¸ºä½ å®‰è£…å¥½VMï¼ˆè™šæ‹Ÿæœºï¼‰ï¼Œä½†Windowsç‰ˆæœ¬éœ€è¦ä½ å®‰è£…å¾®è½¯è™šæ‹ŸåŒ–äº§å“Hyper-Vï¼Œè€Œtoolboxæ–¹å¼åˆ™éœ€è¦ä½ é¢å¤–å®‰è£…virtualboxæ¥ä½œä¸ºdockerçš„VMã€‚</p><p><a href="https://docs.docker.com/docker-for-mac/">App-mac</a><br><a href="https://docs.docker.com/docker-for-windows/">App-win</a></p><p><a href="https://www.docker.com/products/docker-toolbox">Toolbox</a></p><h4 id="centos-å®‰è£…"><a href="#centos-å®‰è£…" class="headerlink" title="centos å®‰è£…"></a>centos å®‰è£…</h4><p><em><font color=red>æ³¨æ„ï¼šdockerè¦æ±‚centosåœ¨3.0ä»¥ä¸Š</font></em></p><p>å¯ä»¥ç”¨ uname -r æŸ¥çœ‹centoså†…æ ¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -r</span><br><span class="line">2.6.32-696.20.1.el6.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¥½å¯æƒœï¼Œæˆ‘çš„è™šæ‹Ÿæœºä¸æ”¯æŒ,å‡çº§ä¸ªå†…æ ¸å†ç»§ç»­è£…ã€‚</p><p>Docker è½¯ä»¶åŒ…å’Œä¾èµ–åŒ…å·²ç»åŒ…å«åœ¨é»˜è®¤çš„ CentOS-Extras è½¯ä»¶æºé‡Œï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install docker</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç° <font color=red>No package docker available</font><br>yumæ²¡æœ‰æ‰¾åˆ°dockeråŒ…ï¼Œæ›´æ–°epelç¬¬ä¸‰æ–¹è½¯ä»¶åº“ï¼Œè¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure><p>ç„¶åå†è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-io</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œå°±å¯ä»¥æ„‰å¿«åœ°å®‰è£…äº†ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/yum.png" alt="å®‰è£…"></p><p><img src= "/img/loading.gif" data-lazy-src="/images/yumdone.png" alt="å®‰è£…å®Œæˆ"></p><h4 id="docker-å¯åŠ¨"><a href="#docker-å¯åŠ¨" class="headerlink" title="docker å¯åŠ¨"></a>docker å¯åŠ¨</h4><p>å¯åŠ¨docker:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><p>æµ‹è¯•è¿è¡Œ hello-world</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/hello.png" alt="æµ‹è¯•è¿è¡Œ"></p><p>ç”±äºæœ¬åœ°æ²¡æœ‰hello-worldè¿™ä¸ªé•œåƒï¼Œæ‰€ä»¥ä¼šä¸‹è½½ä¸€ä¸ªhello-worldçš„é•œåƒï¼Œå¹¶åœ¨å®¹å™¨å†…è¿è¡Œã€‚</p><h4 id="windowså®‰è£…"><a href="#windowså®‰è£…" class="headerlink" title="windowså®‰è£…"></a>windowså®‰è£…</h4><p><em><font color=red>æ³¨æ„ï¼šwin7ï¼Œ8å’Œ10çš„å®¶åº­ç‰ˆéœ€è¦docker toolboxå®‰è£…</font></em></p><p><a href="https://docs.docker.com/toolbox/toolbox_install_windows/">ç‚¹æˆ‘ä¸‹è½½ï¼š</a></p><p>å®‰è£…å®Œæˆåï¼Œæ¡Œé¢ä¼šå¤šè¿™ä¸‰ä¸ªå›¾æ ‡å‡ºæ¥ã€‚å¼ºè¡Œç»™æˆ‘ä¹”å·´ç…§ç›¸ï¼Œå“ˆå“ˆï¼<br><img src= "/img/loading.gif" data-lazy-src="/images/winok.png" alt="å®‰è£…å®Œæˆ"></p><p>ç‚¹å‡» Docker QuickStart å›¾æ ‡æ¥å¯åŠ¨ Docker Toolbox ç»ˆç«¯ã€‚</p><p>å¦‚æœç³»ç»Ÿæ˜¾ç¤º User Account Control çª—å£æ¥è¿è¡Œ VirtualBox ä¿®æ”¹ä½ çš„ç”µè„‘ï¼Œé€‰æ‹© Yes</p><p><img src= "/img/loading.gif" data-lazy-src="/images/%E5%90%AF%E5%8A%A8.png" alt="å¯åŠ¨"></p><p>è¾“å…¥ä¸€ä¸‹å‘½ä»¤è°ƒç”¨æµ‹è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="hello-win.png" alt="å¯åŠ¨æµ‹è¯•"></p><h5 id="win10ä¸“ä¸šç‰ˆ"><a href="#win10ä¸“ä¸šç‰ˆ" class="headerlink" title="win10ä¸“ä¸šç‰ˆ"></a>win10ä¸“ä¸šç‰ˆ</h5><p>win10ä¸“ä¸šç‰ˆè‡ªå¸¦hyper-v,ç”¨æ¥è£…dockeræ›´æ–¹ä¾¿ã€‚ï¼ˆhyper-væ˜¯winç³»ç»Ÿè‡ªå¸¦çš„ä¸€ä¸ªè™šæ‹Ÿæœºå·¥å…·ï¼‰</p><p>æ‰¾åˆ°ç¨‹åºå’ŒåŠŸèƒ½ï¼Œæ‰“å¼€å¯ç”¨å’Œå…³é—­åŠŸèƒ½ï¼Œç„¶åå‹¾é€‰hyper-v</p><p>ç„¶åä¸‹è½½å®‰è£… <a href="https://www.docker.com/get-docker.png">Toolbox</a></p><p>å®‰è£…å®Œæˆåä¼šè‡ªåŠ¨æ‰“å¼€ï¼Œå³ä¸‹è§’çš„ç³»ç»Ÿé€šçŸ¥æ æœ‰ä¸ªå°é²¸é±¼çš„å›¾æ ‡ï¼Œè¿™è¡¨ç¤ºdockeråœ¨è¿è¡Œã€‚</p><p>åˆ°è¿™é‡Œå°±å®‰è£…å¥½äº†ï¼Œæ›´å¤šå§¿åŠ¿æˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨å™¨è¾“å…¥ docker æ¥è§£é”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»“åˆlayuiæµåŠ è½½å®ç°çš„ç€‘å¸ƒæµ</title>
      <link href="/2018/03/23/layui-waterfall/"/>
      <url>/2018/03/23/layui-waterfall/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç”¨layuiåšä¸€ä¸ªç¤¾åŒºç«™ç‚¹ï¼Œæœ‰ä¸ªé¡µé¢æƒ³åšæˆç€‘å¸ƒæµå½¢å¼ï¼Œä½†æ˜¯layuiæœ¬èº«çš„æµåŠ è½½å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ç ”ç©¶äº†å‡ ä¸ªè‡ƒè‚¿çš„æ’ä»¶æºç åï¼Œè‡ªå·±åšäº†ä¸€ä¸ªå¯ä»¥ç»“åˆlayuiæµåŠ è½½ä½¿ç”¨çš„è½»é‡çº§ç€‘å¸ƒæµæ’ä»¶ï¼Œç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/layui.png"></p><span id="more"></span><p>å›¾ä¸¢äº†ï¼Œæ¼”ç¤ºæ•ˆæœæ— ã€‚</p><h4 id="ä½¿ç”¨è¯´æ˜ï¼š"><a href="#ä½¿ç”¨è¯´æ˜ï¼š" class="headerlink" title="ä½¿ç”¨è¯´æ˜ï¼š"></a>ä½¿ç”¨è¯´æ˜ï¼š</h4><p><font color=red>å‹æƒ…æç¤ºï¼šå¦‚æœä¸ç†Ÿæ‚‰layuiçš„ç”¨æ³•ï¼Œè¯·ç™¾åº¦è¿‡å»ä»”ç»†é˜…è¯»ä¸€ä¸‹æ–‡æ¡£ã€‚</font></p><ul><li>åœ¨é¡µé¢ä¸­ç”¨layuiçš„å®šä¹‰çš„æ¨¡å¼æ‰©å±•å¼•å…¥common.js</li><li>ajaxåŠ è½½æ•°æ®ä¿¡æ¯ï¼Œè·å¾—æ•°æ®æ€»åˆ†é¡µæ•°</li><li>laytplæ¸²æŸ“æ•°æ®</li><li>æµåŠ è½½åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€é¡µæ•°æ®</li><li>waterfallæ•´ç†é¡µé¢å…ƒç´ çš„å®šä½</li></ul><p>javascript å†…å®¹ï¼š</p><p>common.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">layui.define([&#39;jquery&#39;, &#39;element&#39;, &#39;util&#39;, &#39;laytpl&#39;], function (exports) &#123;</span><br><span class="line"></span><br><span class="line">    var $ &#x3D; layui.jquery</span><br><span class="line">            , element &#x3D; layui.element</span><br><span class="line">            , layer &#x3D; layui.layer</span><br><span class="line">            , util &#x3D; layui.util</span><br><span class="line">            , laytpl &#x3D; layui.laytpl;</span><br><span class="line"></span><br><span class="line">    var gather &#x3D; &#123;</span><br><span class="line">        waterfall: function () &#123;</span><br><span class="line">            var box &#x3D; $(&quot;.layui-col-md3&quot;);</span><br><span class="line">            var boxWidth &#x3D; box.eq(0).width();</span><br><span class="line">            var num &#x3D; Math.floor($(&quot;#zone-list&quot;).width() &#x2F; boxWidth);</span><br><span class="line">            var boxArr &#x3D; [];</span><br><span class="line">            box.each(function (index, value) &#123;</span><br><span class="line">                var boxHeight &#x3D; box.eq(index).height();</span><br><span class="line">                if (index &lt; num) &#123;</span><br><span class="line">                    boxArr[index] &#x3D; boxHeight;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    var minboxHeight &#x3D; Math.min.apply(null, boxArr), minboxIndex &#x3D; $.inArray(minboxHeight, boxArr);</span><br><span class="line">                    $(value).css(&#123;</span><br><span class="line">                        &quot;position&quot;: &quot;absolute&quot;,</span><br><span class="line">                        &quot;top&quot;: minboxHeight + 15,</span><br><span class="line">                        &quot;left&quot;: box.eq(minboxIndex).position().left</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    boxArr[minboxIndex] +&#x3D; box.eq(index).height() + 15;</span><br><span class="line">                    if (boxHeight + minboxHeight &gt; $(&quot;#zone-list&quot;).height()) &#123;</span><br><span class="line">                        $(&quot;#zone-list&quot;).height(150 + boxArr[minboxIndex]);</span><br><span class="line">                    &#125;</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        json: function (url, data, func, options) &#123;</span><br><span class="line">            var that &#x3D; this, type &#x3D; typeof data &#x3D;&#x3D;&#x3D; &#39;function&#39;;</span><br><span class="line">            if (type) &#123;</span><br><span class="line">                options &#x3D; func</span><br><span class="line">                func &#x3D; data;</span><br><span class="line">                data &#x3D; &#123;&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            options &#x3D; options || &#123;&#125;;</span><br><span class="line">            return $.ajax(&#123;</span><br><span class="line">                type: options.type || &#39;post&#39;,</span><br><span class="line">                dataType: options.dataType || &#39;json&#39;,</span><br><span class="line">                data: data,</span><br><span class="line">                url: url,</span><br><span class="line">                success: function (res) &#123;</span><br><span class="line">                    func &amp;&amp; func(res);</span><br><span class="line">                &#125;, error: function (e) &#123;</span><br><span class="line">                    layer.msg(&#39;è¯·æ±‚å¼‚å¸¸ï¼Œè¯·é‡è¯•&#39;, &#123;shift: 6&#125;);</span><br><span class="line">                    options.error &amp;&amp; options.error(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    exports(&#39;common&#39;, gather);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è°ƒç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var action &#x3D; &#39;&#x2F;zone&#39;;</span><br><span class="line">common.json(action, &#39;&#39;, function (res) &#123;</span><br><span class="line">    flow.load(&#123;</span><br><span class="line">        elem: &#39;#zone-list&#39;</span><br><span class="line">        , isAuto: true</span><br><span class="line">        , isLazyimg: true</span><br><span class="line">        , mb: 100</span><br><span class="line">        , done: function (page, next) &#123;</span><br><span class="line">            var lis &#x3D; [];</span><br><span class="line">            common.json(action, &#123;page: page&#125;, function (res) &#123;</span><br><span class="line">                var getTpl &#x3D; zonesTpl.innerHTML, view &#x3D; document.getElementById(&#39;zone-list&#39;);</span><br><span class="line"></span><br><span class="line">                layui.each(res.data.data, function (index, item) &#123;</span><br><span class="line">                    laytpl(getTpl).render(item, function (html) &#123;</span><br><span class="line">                        lis.push(html);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                if (page &lt; res.data.last_page) &#123;</span><br><span class="line">                    next(lis.join(&#39;&#39;), true);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    next(lis.join(&#39;&#39;), false);</span><br><span class="line">                &#125;</span><br><span class="line">                common.waterfall();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>htmlå†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script id&#x3D;&quot;zonesTpl&quot; type&#x3D;&quot;text&#x2F;html&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;layui-col-md3&quot;&gt; </span><br><span class="line">        &lt;div class&#x3D;&quot;zone-box&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;dt_text&quot;&gt; </span><br><span class="line">                &lt;span class&#x3D;&quot;zone-word&quot;&gt;@&#123;&#123; d.content &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            @&#123;&#123;# var img &#x3D;  layui.jquery.grep(d.imgs.split(&#39;,&#39;), function(n) &#123;return layui.jquery.trim(n).length &gt; 0;&#125;) &#125;&#125;</span><br><span class="line">            &lt;div class&#x3D;&quot;img_box base-img-w img-w-@&#123;&#123; img.length &#125;&#125;&quot; &gt;</span><br><span class="line">                &lt;a class&#x3D;&quot;img_w &quot; href&#x3D;&quot;javascript:;&quot;&gt;</span><br><span class="line">                    @&#123;&#123;#  for(var k&#x3D;0;k&lt; img.length;k++)&#123; &#125;&#125;</span><br><span class="line">                    &lt;img src&#x3D;&quot;@&#123;&#123; img[k] &#125;&#125;&quot; &gt;</span><br><span class="line">                    @&#123;&#123;# &#125; &#125;&#125;</span><br><span class="line">                &lt;&#x2F;a&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pjaxçš„æ­£ç¡®ä½¿ç”¨</title>
      <link href="/2018/03/14/pjax/"/>
      <url>/2018/03/14/pjax/</url>
      
        <content type="html"><![CDATA[<p>ä»¥å‰å¶ç„¶ä¹‹é—´æ¥è§¦åˆ°pjaxè¿™ä¸ªæ’ä»¶ï¼Œçœ¼å‰ä¸€äº®ï¼Œè¢«å®ƒæƒŠè‰³åˆ°äº†ã€‚</p><p>é¡¿æ—¶è§‰å¾—å¿ƒç—’éš¾è€ï¼Œä¾¿ç€æ‰‹æµ‹è¯•æƒ³è¦åŠ åœ¨åšå®¢é‡Œï¼Œå‡ ç»æŠ˜è…¾ï¼Œé¡µé¢çš„è·³è½¬æ€»ç®—æ˜¯æ”¹å–„è®¸å¤šï¼Œä½†æ˜¯ç¦»æˆ‘æ‰€è§åˆ°çš„å®Œç¾å´æ€»æ˜¯å·®ä¸€æ­¥ï¼šæ¯æ¬¡è·³è½¬é¡µé¢éƒ½ä¼šé—ªä¸€ä¸‹ã€‚</p><p>å¥ˆä½•æ–‡æ¡£å¤ªå°‘ï¼Œæˆ–è€…è¯´æˆ‘æ‰€é‡åˆ°çš„é—®é¢˜æ°´å¹³å¤ªlowï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±ä¸€ç›´ä¼´éšç€æˆ‘çš„åšå®¢ã€‚</p><span id="more"></span><p>æœåŠ¡å™¨åˆ°æœŸåï¼Œæˆ‘å°±æŠŠåšå®¢è¿åˆ°äº†githubï¼Œç”¨ç€è¿˜æŒºæ»¡æ„ï¼Œè¿˜æ‹‰äº†å‡ ä¸ªåŒå­¦ä¹Ÿæ¥ç”¨è¿™ä¸ªï¼Œè¿™ä¸¤å¤©æœ‰ä¸ªåŒå­¦æ¢äº†å¥—åˆ«äººåšçš„æ¨¡æ¿ï¼Œè®©æˆ‘åˆè§è¯†åˆ°äº†pjaxçš„é­…åŠ›ã€‚</p><p>å¦ˆè›‹ï¼Œä¸èƒ½å¿ã€‚</p><p>çœ‹æ–‡æ¡£æ²¡èƒ½è§£å†³æˆ‘çš„é—®é¢˜ï¼Œé‚£æˆ‘æ‰¾åˆ«äººçš„æºç å»ã€‚</p><p>äºæ˜¯ä»Šå¤©ä¸‹ç­è·¯ä¸Šï¼Œæ‰’äº†å‡ ç¯‡ç äº‘çš„æºç ï¼Œç»ˆäºæ˜¯è§£å†³äº†è¿™ä¸ªä¼´éšå·²ä¹…çš„ä¸å®Œç¾ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    layui.config(&#123;</span><br><span class="line">        base: &#39;&#x2F;js&#x2F;&#39;</span><br><span class="line">        ,version: false</span><br><span class="line">    &#125;).extend(&#123;</span><br><span class="line">        index: &#39;index&#39;</span><br><span class="line">        ,pjax: &#39;pjax&#39;</span><br><span class="line">    &#125;).use([&#39;pjax&#39;,&#39;index&#39;],function ()&#123;</span><br><span class="line">        var $ &#x3D; layui.jquery;</span><br><span class="line">            $(function () &#123;</span><br><span class="line">                $(document).pjax(&#39;a&#39;, &#39;#main&#39;,&#123;fragment:&#39;#main&#39;&#125;);</span><br><span class="line">                $(document).on(&#39;pjax:start&#39;, function () &#123;</span><br><span class="line">                    NProgress.start();</span><br><span class="line">                &#125;);</span><br><span class="line">                $(document).on(&#39;pjax:end&#39;, function () &#123;</span><br><span class="line">                    NProgress.done();</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>å› ä¸ºå¼•å…¥äº†layuiï¼Œè™½ç„¶åœ¨è¿™ä¸ªç‰ˆæœ¬çš„åšå®¢é‡Œæ²¡ä»€ä¹ˆå¤§ç”¨ï¼Œæˆ‘è¿˜æ˜¯æŠŠpjaxè£¹äº†ä¸€å±‚åšæˆäº†layuiçš„æ‰©å±•ã€‚</p><p>ä¹‹å‰æˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(document).pjax(&#39;a&#39;, &#39;#main&#39;);</span><br></pre></td></tr></table></figure><p>ä»Šå¤©åœ¨å¯¹æ¯”ä¹‹ä¸‹ï¼Œå‘ç°æˆ‘å°‘äº† {fragment:â€™#mainâ€™}ï¼ŒåŠ è¿›å»ä¸€è¯•ï¼Œå¥½äº†ã€‚</p><p>åŸæ¥æˆ‘æ›¾ç»ç¦»å®Œç¾åªå·®ä¸€æ­¥ä¹‹é¥ã€‚</p><p>è¿™ä¸ªä¸œè¥¿åº”è¯¥æ˜¯æŒ‡å®šæ–°é¡µé¢æ‰€æ›¿æ¢çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯åœ¨æ‹¿åˆ°æ–°é¡µé¢çš„å†…å®¹ä»¥åä¼šåœ¨è¿™ä¸ªå…ƒç´ é‡Œè¾¹æ›¿æ¢ã€‚</p><p>åº”è¯¥å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€å§â€¦â€¦</p><p>è§£å†³äº†ï¼ŒæŒºå¼€å¿ƒçš„ï¼Œå°±æ˜¯è§‰å¾—æˆ‘çœŸçš„è¯¥å†ä¸‹ä¸‹åŠŸå¤«å­¦è‹±æ–‡äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7.2 64ä½å®‰è£…LNMP php7+Mysql 5.7æ­å»ºæ•™ç¨‹</title>
      <link href="/2018/03/10/lnmp/"/>
      <url>/2018/03/10/lnmp/</url>
      
        <content type="html"><![CDATA[<p>å‰å‰ååæ­å»ºè¿‡æ— æ•°æ¬¡ç¯å¢ƒï¼Œå¤§å¤§å°å°çš„å‘ä¹Ÿå·®ä¸å¤šéƒ½è¸©äº†ï¼Œä»Šå¤©è¶ç€è…¾è®¯ææ´»åŠ¨ï¼Œ120å—ä¹°äº†å°16ä¸ªæœˆçš„æœåŠ¡å™¨ï¼Œæƒ³ç€æ™šä¸ŠæŠŠç¯å¢ƒæ­å»ºä¸‹å§ï¼Œç»“æœæŠŠä¹‹å‰çš„æ–‡æ¡£æå‡ºæ¥å‘ç°æ˜¯æ²¡æ›´æ–°çš„ï¼Œæœ€æ–°ç‰ˆåœ¨å…¬å¸â€¦â€¦</p><p>ç®—äº†ï¼Œè€å­å†æä¸€éï¼Œæ”¾åœ¨ç½‘ä¸Šéšä¾¿çœ‹ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/1.jpg"></p><span id="more"></span><h4 id="æ›´æ–°ç»„ä»¶"><a href="#æ›´æ–°ç»„ä»¶" class="headerlink" title="æ›´æ–°ç»„ä»¶"></a>æ›´æ–°ç»„ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br><span class="line"></span><br><span class="line">yum -y groupinstall &#39;Development Tools&#39;</span><br><span class="line"></span><br><span class="line">yum install gcc-c++ patch readline readline-devel zlib zlib-devel  bzip2 autoconf automake libtool bison iconv-devel libyaml-devel libffi-devel openssl-devel make   </span><br><span class="line"></span><br><span class="line">yum -y install readline readline-devel ncurses-devel gdbm-devel glibc-devel tcl-devel openssl-devel curl-devel expat-devel db4-devel byacc sqlite-devel libyaml libyaml-devel libffi libffi-devel libxml2 libxml2-devel libxslt libxslt-devel libicu libicu-devel system-config-firewall-tui sudo wget crontabs logwatch logrotate perl-Time-HiRes git cmake libcom_err-devel.i686 libcom_err-devel.x86_64</span><br><span class="line"></span><br><span class="line">yum install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel libicu-devel openldap-devel</span><br></pre></td></tr></table></figure><p>å®‰è£…Pcre:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;excellmedia.dl.sourceforge.net&#x2F;project&#x2F;pcre&#x2F;pcre2&#x2F;10.31&#x2F;pcre2-10.31.tar.gz</span><br><span class="line">tar -xf pcre2-10.31</span><br><span class="line">cd pcre2-10.31</span><br><span class="line">.&#x2F;configure</span><br><span class="line"> make </span><br><span class="line"> make install</span><br></pre></td></tr></table></figure><p>å®‰è£…Libmcryptï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;nchc.dl.sourceforge.net&#x2F;project&#x2F;mcrypt&#x2F;Libmcrypt&#x2F;2.5.8&#x2F;libmcrypt-2.5.8.tar.gz</span><br><span class="line">tar -xf libmcrypt-2.5.8.tar.gz</span><br><span class="line">cd libmcrypt-2.5.8</span><br><span class="line">.&#x2F;configure</span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…php"><a href="#å®‰è£…php" class="headerlink" title="å®‰è£…php"></a>å®‰è£…php</h4><p>å—¯â€¦â€¦æœ€æ–°ç‰ˆ7.2å¼€æ€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;cn2.php.net&#x2F;get&#x2F;php-7.2.3.tar.gz&#x2F;from&#x2F;this&#x2F;mirror</span><br><span class="line">tar -xf mirror</span><br><span class="line">cd php-7.2.3</span><br></pre></td></tr></table></figure><p>è¯¥ç¼–è¯‘äº†ï¼Œå¥½é•¿â€¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure \</span><br><span class="line">--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php \</span><br><span class="line">--with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--with-fpm-user&#x3D;nginx  \</span><br><span class="line">--with-fpm-group&#x3D;nginx \</span><br><span class="line">--enable-inline-optimization \</span><br><span class="line">--disable-debug \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-shared  \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--with-xmlrpc \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-mhash \</span><br><span class="line">--with-pcre-regex \</span><br><span class="line">--with-sqlite3 \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-bcmath \</span><br><span class="line">--with-iconv \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--enable-calendar \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-cdb \</span><br><span class="line">--enable-dom \</span><br><span class="line">--enable-exif \</span><br><span class="line">--enable-fileinfo \</span><br><span class="line">--enable-filter \</span><br><span class="line">--with-pcre-dir \</span><br><span class="line">--enable-ftp \</span><br><span class="line">--with-gd \</span><br><span class="line">--with-openssl-dir \</span><br><span class="line">--with-jpeg-dir \</span><br><span class="line">--with-png-dir \</span><br><span class="line">--with-zlib-dir  \</span><br><span class="line">--with-freetype-dir \</span><br><span class="line">--enable-gd-native-ttf \</span><br><span class="line">--enable-gd-jis-conv \</span><br><span class="line">--with-gettext \</span><br><span class="line">--with-gmp \</span><br><span class="line">--with-mhash \</span><br><span class="line">--enable-json \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--enable-mbregex \</span><br><span class="line">--enable-mbregex-backtrack \</span><br><span class="line">--with-libmbfl \</span><br><span class="line">--with-onig \</span><br><span class="line">--enable-pdo \</span><br><span class="line">--with-mysqli&#x3D;mysqlnd \</span><br><span class="line">--with-pdo-mysql&#x3D;mysqlnd \</span><br><span class="line">--with-zlib-dir \</span><br><span class="line">--with-pdo-sqlite \</span><br><span class="line">--with-readline \</span><br><span class="line">--enable-session \</span><br><span class="line">--enable-shmop \</span><br><span class="line">--enable-simplexml \</span><br><span class="line">--enable-sockets  \</span><br><span class="line">--enable-sysvmsg \</span><br><span class="line">--enable-sysvsem \</span><br><span class="line">--enable-sysvshm \</span><br><span class="line">--enable-wddx \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--with-xsl \</span><br><span class="line">--enable-zip \</span><br><span class="line">--enable-mysqlnd-compression-support \</span><br></pre></td></tr></table></figure><p>ç»“æŸåmakeï¼Œmake installï¼Œæ—¶é—´è¾ƒé•¿ï¼Œè€å¿ƒç­‰å¾…ã€‚</p><p>å¥½äº†ä»¥åï¼Œå¤åˆ¶ä¸€ä»½iniæ–‡ä»¶å¤‡ä»½ï¼Œç„¶åæŠŠphp-fpmæ·»åŠ æˆservice</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp php.ini-development &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</span><br><span class="line">cp sapi&#x2F;fpm&#x2F;init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php-fpm.d&#x2F;www.conf.default www.conf</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;www.conf.default www.conf</span><br><span class="line">chmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span><br><span class="line">service php-fpm start</span><br></pre></td></tr></table></figure><p>æ·»åŠ phpè¿›ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;profile </span><br><span class="line">PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin  </span><br><span class="line">export PATH  </span><br></pre></td></tr></table></figure><p>ä½¿ä¿®æ”¹ç”Ÿæ•ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &#x2F;etc&#x2F;profile  </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è·¯å¾„å’Œphpç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br><span class="line">php -v </span><br></pre></td></tr></table></figure><h4 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h4><p>å®‰è£…nginx yumæº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall http:&#x2F;&#x2F;nginx.org&#x2F;packages&#x2F;centos&#x2F;7&#x2F;noarch&#x2F;RPMS&#x2F;nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…nginxï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå¯åŠ¨ä¸‹è¯•è¯•ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service nginx start</span><br></pre></td></tr></table></figure><p>è®¿é—®http://ä½ çš„ip/ å¦‚æœæˆåŠŸå®‰è£…ä¼šå‡ºæ¥nginxé»˜è®¤çš„æ¬¢è¿ç•Œé¢</p><p>æ²¡æˆåŠŸå°±æ£€æŸ¥ä¸‹ç«¯å£æ˜¯å¦å¯ä»¥è®¿é—® ,è™šæ‹Ÿæœºå¯ä»¥ç›´æ¥å¹²æ‰é˜²ç«å¢™</p><h4 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h4><p>ä¸‹è½½æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>å¼€å§‹å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql57-community-release-el7-8.noarch.rpm</span><br><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¯”è¾ƒå¿«ï¼Œè£…å¥½å¼€å§‹è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><p>åŠ å…¥å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹é»˜è®¤å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç™»é™†ä¿®æ”¹å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_34_176_centos ~]# mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.7.21</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; &#x3D; PASSWORD(&#39;Xx..XXXX&#39;);</span><br><span class="line">#å¯†ç ä¸èƒ½å¤ªç®€å•</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; exit;</span><br><span class="line">Bye</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®‰è£…swoole"><a href="#å®‰è£…swoole" class="headerlink" title="å®‰è£…swoole"></a>å®‰è£…swoole</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pecl install swoole</span><br><span class="line">#æ·»åŠ åˆ°php.ini</span><br><span class="line">cd &#x2F;etc</span><br><span class="line">vi php.ini</span><br><span class="line">extension&#x3D;swoole.so</span><br></pre></td></tr></table></figure><p><em><font color=red>æ³¨ï¼š</font></em><br>å®‰è£…å¥½PHPåå¤åˆ¶iniæ–‡ä»¶æ˜¯å› ä¸ºç¼–è¯‘æ—¶æŒ‡å®šäº† </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc \</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸å¤åˆ¶çš„è¯ä¹Ÿä¸€æ ·èƒ½å¤Ÿè¿è¡Œphpï¼Œä½†æ˜¯å°±æ— æ³•è£…æ‰©å±•äº†ï¼Œè¸©å‘åƒç™¾éç»ˆæœ‰ä¸€ç–ï¼Œè£…å®Œswooleå‘ç°æ— æ³•åŠ è½½ï¼Œæœ€åæŸ¥åˆ°æ—¶è¿™é‡Œçš„é—®é¢˜ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/swoole.png" alt="swoole"></p><p>æ‰“å®Œæ”¶å·¥ï¼Œä¸€ä¸ªä¸å°å¿ƒåˆæåˆ°å‡Œæ™¨ä¸€ç‚¹ï¼Œæ„Ÿè§‰å¤´ä¸Šå‡‰å‡‰å“’~</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoå¤šè®¾å¤‡æ”¯æŒ</title>
      <link href="/2018/02/26/hexo-new-pc/"/>
      <url>/2018/02/26/hexo-new-pc/</url>
      
        <content type="html"><![CDATA[<p>æµ‹è¯•æ—¶æœªçŸ¥åŸå› ï¼Œmarkdownæ ¼å¼çš„å›¾ç‰‡æ ‡ç­¾æ— æ³•è¯†åˆ«ï¼Œåªèƒ½ç”¨ä¸‹è¾¹hexoæ¨èçš„æ ‡ç­¾ã€‚<br>å„ç§å°è¯•ï¼Œæœ€åæ¨æ‰é‡æ¥ï¼Œå¥½äº†ã€‚</p><p>mmpï¼Œå¯èƒ½æ˜¯ä¸­é—´æœ‰ä»€ä¹ˆæ­¥éª¤æ²¡åšå¥½ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] &#x2F;path&#x2F;to&#x2F;image [width] [height] [title text [alt text]] %&#125;</span><br></pre></td></tr></table></figure><p>å¤šè®¾å¤‡ä»€ä¹ˆçš„æŠŠæºç ä¸¢åœ¨.ioçš„åˆ†æ”¯ä¸Šå°±å¥½äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git init   #åˆå§‹åŒ–æœ¬åœ°ä»“åº“</span><br><span class="line">git add .  #æ·»åŠ æ–‡ä»¶</span><br><span class="line">git commit -m &quot;Blog Source Hexo&quot;</span><br><span class="line">git branch hexo  #æ–°å»ºhexoåˆ†æ”¯</span><br><span class="line">git checkout hexo  #åˆ‡æ¢åˆ°hexoåˆ†æ”¯ä¸Š</span><br><span class="line">git remote add origin git@github.com:yourname&#x2F;yourname.github.io.git  #å°†æœ¬åœ°ä¸Githubé¡¹ç›®å¯¹æ¥</span><br><span class="line">git push origin hexo  #pushåˆ°Githubé¡¹ç›®çš„hexoåˆ†æ”¯ä¸Š</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/%E6%88%AA%E5%9B%BE.png" alt="æ•ˆæœå›¾"></p><p>åˆ«çš„è®¾å¤‡åªéœ€è¦æ‹‰ä¸‹ä»£ç ï¼Œç„¶ååˆ‡æ¢ä¸‹åˆ†æ”¯ï¼Œå†æ‰§è¡Œä¸‹ â€œnpm installâ€ å°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†ã€‚</p><p>åæ¥æµ‹è¯•ä¸‹æŠŠæºç æ”¾åœ¨ç äº‘ä¹Ÿå¯ä»¥çš„ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼ŒæŠŠæºç æ”¾åœ¨ç äº‘çš„ç§æœ‰é¡¹ç›®å»äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–°å»ºç§æœ‰ä»“åº“</span><br><span class="line">å…‹éš†åˆ°æœ¬åœ°</span><br><span class="line">ç„¶åæŠŠåšå®¢æºæ–‡ä»¶ä¸¢è¿›å»</span><br><span class="line">æäº¤</span><br><span class="line">æå®š</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="/images/x.gif" alt="test"></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°å¹´å¿«ä¹ï¼Œç¥å¤§å®¶ç‹—å¹´æ—ºæ—ºæ—º</title>
      <link href="/2018/02/15/year-of-dog/"/>
      <url>/2018/02/15/year-of-dog/</url>
      
        <content type="html"><![CDATA[<p>ä¸€æ™šä¸Šçš„ç«è½¦ï¼Œå†åŠ ä¸Š3ä¸ªå°æ—¶çš„å¤§å·´ï¼Œæ€»ç®—æ˜¯åœ¨å¹´å‰èµ¶å›äº†å®¶ã€‚</p><p>çœ‹ç€å‘¨å›´ç†Ÿæ‚‰çš„ç¯å¢ƒï¼Œå¬ç€äº²åˆ‡ä¸‡åˆ†çš„ä¹¡éŸ³ï¼Œç¬é—´è§‰å¾—ï¼Œè¿™ä¸€è·¯çš„æŠ˜è…¾ä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚</p><p>å¯èƒ½è¿™å°±æ˜¯â€œå®¶â€æ‰€èµ‹äºˆâ€œå¹´â€çš„ç‰¹æ®ŠåŠ›é‡å§ã€‚</p><p>å¿å¿å¿‘å¿‘çš„æœ¬å‘½å¹´ï¼Œç»ˆäºåœ¨ä»Šå¤©ç”»ä¸Šäº†å¥å·ã€‚</p><p>å›å¤´æƒ³æƒ³ï¼Œåˆç‰¹ä¹ˆä¸€å¦‚æ—¢å¾€åœ°ç©·äº†ä¸€å¹´ã€‚ä¸è¿‡ï¼Œè¿™äº›åœ¨ä»Šå¤©çœ‹æ¥ï¼Œä¼¼ä¹éƒ½ä¸å¤ªé‡è¦äº†ï¼Œé‡è¦çš„æ˜¯è€å­ç•ç•ç¼©ç¼©çš„è¿‡äº†æœ¬å‘½å¹´ï¼Œæ˜å¤©åˆå¯ä»¥ç»§ç»­å¼€å§‹æµª~</p><p>å“ˆå“ˆå“ˆå“ˆå“ˆâ€¦â€¦</p><p>2017â€é¸¡â€å°†ç»“æŸï¼Œ2018â€çŠ¬â€åŠ›ä»¥èµ´ï¼ï¼</p><p>ç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼Œç‹—å¹´å¥½åˆï¼Œå“¦ä¸ï¼Œç‹—å¹´å¤§å‰ï¼Œç‹—å¹´æ—ºæ—ºæ—ºï¼</p><p><img src= "/img/loading.gif" data-lazy-src="/images/2018.jpg" alt="å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šåƒé¸¡"></p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openssl_pkey_get_private å†…å­˜æ³„æ¼</title>
      <link href="/2018/02/07/openssl-pkey-get-private/"/>
      <url>/2018/02/07/openssl-pkey-get-private/</url>
      
        <content type="html"><![CDATA[<p>ä»å‰ï¼Œæœ‰ä¸€å—ä½¿ç”¨ swoole_process åšå¤šçº¿ç¨‹å¤„ç†çš„ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºæœ‰ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼šæ¯è¿è¡Œä¸€ä¸ªæ˜ŸæœŸå·¦å³éƒ½ä¼šå› ä¸ºå†…å­˜çˆ†è¡¨è€Œåœæ‰ã€‚</p><p>å› ä¸ºçˆ†è¡¨çš„æ—¶é—´å…³ç³»ï¼Œå¼€å‘çš„å°ä¼™ä¼´ä»¬éƒ½è®¤ä¸ºæ˜¯è¿™æ®µä½¿ç”¨ swoole_process çš„ç¨‹åºæœ‰é—®é¢˜ï¼Œå‡ ç»æ›´æ–°æ”¹ç‰ˆï¼Œä»£ç å·²ç»è¶‹äºå®Œç¾ï¼Œå¹³ç¨³çš„è¿è¡Œäº†å‡ å¤©åï¼Œå°ä¼™ä¼´ä»¬ç»ˆäºéƒ½æ¾äº†ä¸€å£æ°”ï¼Œç»ˆäºè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>ç„¶è€Œï¼Œä¼´éšç€ç™¾å¹´éš¾é‡çš„è¡€æœˆï¼Œè¿™å—ç¨‹åºè¿˜æ˜¯åœ¨ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„æ—¶é—´åˆçˆ†äº†ä¸€æ¬¡ï¼Œå°ä¼™ä¼´ä»¬ç»ˆäºæ„è¯†åˆ°ï¼Œé—®é¢˜çš„æ ¹æœ¬å¹¶ä¸åœ¨è¿™é‡Œï¼Œæƒ³è¦æ‰¾å‡ºå¹¶æ”¹æ‰è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯ä½•ç­‰è‰°éš¾ï¼ä½†æ˜¯ä»–ä»¬çŸ¥é“ï¼ŒçœŸç›¸åªæœ‰ä¸€ä¸ªï¼</p><p>åˆç»è¿‡å‡ å¤©çš„æ’æŸ¥ï¼Œå‡¶æ‰‹ç»ˆäºæµ®å‡ºæ°´é¢ï¼</p><p>å‘ï¼Œå°±æ˜¯è¿™å­™å­ï¼šopenssl_pkey_get_private</p><p>æŠ½å‡ºçš„æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while(true)&#123;</span><br><span class="line">    $key &#x3D; file_get_contents(&#39;mock_A.pem&#39;);</span><br><span class="line">echo $m&#x3D;memory_get_usage(),PHP_EOL;</span><br><span class="line">$getkey &#x3D; openssl_pkey_get_private($key, &#39;&#39;);</span><br><span class="line">openssl_pkey_free($getkey);</span><br><span class="line">echo $mm &#x3D; memory_get_usage(),PHP_EOL;</span><br><span class="line">        echo &quot;Before unset:  &quot;,$mm-$m ,PHP_EOL;</span><br><span class="line">sleep(3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/2018-02-08-07-30-12-5a7bfc84465bf.png" alt="è¿è¡Œç»“æœ"></p><p>å®¡åˆ¤ç»“æœï¼šè¯¥é˜‰çš„å°±èµ¶ç´§é˜‰äº†å§</p><p>è¡Œåˆ‘åé•¿ç›¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$key &#x3D; file_get_contents(&#39;mock_A.pem&#39;);</span><br><span class="line">$getkey &#x3D; openssl_pkey_get_private($key, &#39;&#39;);</span><br><span class="line"></span><br><span class="line">while(true)&#123;</span><br><span class="line">echo $m&#x3D;memory_get_usage(),PHP_EOL;</span><br><span class="line">openssl_pkey_free($getkey);</span><br><span class="line">echo $mm &#x3D; memory_get_usage(),PHP_EOL;</span><br><span class="line">        echo &quot;Before unset:  &quot;,$mm-$m ,PHP_EOL;</span><br><span class="line">sleep(3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰çº¿ä¸“å®¶ç‚¹è¯„ï¼šçº¯å±å†¤æ¡ˆï¼Œå“ªå„¿ç‰¹ä¹ˆè¿™ä¹ˆå®¹æ˜“æ³„æ¼ï¼Œéƒ½æ˜¯å› ä¸ºè‡ªå·±å†™çš„ä¸è§„èŒƒï¼</p><p>æ³¨ï¼šç”Ÿæˆå…¬ç§é’¥æ˜¯éœ€è¦æ¶ˆè€—å†…å­˜çš„ï¼Œæ¯æ¬¡è„šæœ¬æ‰§è¡Œç»“æŸåä¼šé‡Šæ”¾æ‰ï¼Œä½†æ˜¯å¸¸é©»å†…å­˜çš„è„šæœ¬æ²¡æœ‰é‡Šæ”¾çš„æœºä¼šï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯è°ƒç”¨éƒ½ä¼šé€ æˆå†…å­˜å¢åŠ ï¼ŒæŒç»­å¢åŠ åˆ°ä¸€å®šé‡åç³»ç»Ÿä¹Ÿå°±å´©äº†ã€‚<br>æ‰€ä»¥è§£å†³åŠæ³•æ˜¯åœ¨å¾ªç¯å¼€å§‹ä¹‹å‰å°±æŠŠå¯†é’¥ç”Ÿæˆå¥½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> openssl </tag>
            
            <tag> swoole </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel5.4ç–‘éš¾æ‚ç—‡</title>
      <link href="/2018/01/04/laravel-5-4-bug/"/>
      <url>/2018/01/04/laravel-5-4-bug/</url>
      
        <content type="html"><![CDATA[<p>å…¬å¸é¡¹ç›®æœ€è¿‘ç¿»æ–°äº†é¡µé¢ï¼ŒæŠŠ bootstrap å®Œå…¨æ”¹æˆäº† layui ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"><br>æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸Šçº¿ä¹‹å‰å…ˆåœ¨æµ‹è¯•ç¯å¢ƒè·‘å‡ å¤©ï¼Œç»“æœåœ¨æ­å»ºæµ‹è¯•ç¯å¢ƒçš„æ—¶å€™ï¼Œé—®é¢˜å°±å‡ºæ¥äº†ï¼š</p><p>laravel ç‰ˆæœ¬æ˜¯ 5.4.63 ï¼ŒæœåŠ¡å™¨çš„ php ç‰ˆæœ¬æ˜¯ 5.6 ï¼Œæ‰§è¡Œ composer install æ—¶ï¼Œæç¤ºæˆ‘éœ€è¦ php7.1 ã€‚</p><p>å“å¾—æˆ‘ä¸€é˜µæ‡µé€¼ï¼Œéš¾é“æ˜¯ä»€ä¹ˆæ—¶å€™è£…é”™æ‰©å±•äº†ï¼Ÿ</p><p>æŠŠ composer.json é‡Œæ²¡ä»€ä¹ˆç”¨çš„æ‰©å±•å®Œå…¨å»é™¤åå†è¯•ï¼Œç»“æœè¿˜æ˜¯ä¸€æ ·ã€‚</p><p>åå¤æŠ˜è…¾æ— æœï¼Œæƒ³èµ·è¿˜æœ‰ update å¯ä»¥ç”¨ï¼Œé‚æ”¹ä¸ºæ‰§è¡Œ composer update ï¼Œç»ˆäºå¼€å§‹å®‰è£…äº†ã€‚</p><p>å°æ ·ï¼Œè¿˜æ²»ä¸äº†ä½ äº†ï¼å®¹è€å¤«æŠ½æ ¹çƒŸå¾—ç‘Ÿä¸€ä¸‹ã€‚</p><p>ä¸‹ä¸€ç§’ï¼Œä¸€ä¸ªæ–°çš„æŠ¥é”™åˆç ¸æˆ‘ä¸ªæªæ‰‹ä¸åŠï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/error.png" alt="é”™è¯¯ä¿¡æ¯"></p><p>class â€˜â€™ not found !</p><p>è™½ç„¶ä¸çŸ¥é“è¿™ä¸ªæŠ¥é”™æ˜¯å’‹å›äº‹ï¼Œä½†æ˜¯æ½œæ„è¯†è§‰å¾—åº”è¯¥æ˜¯æŸä¸ª Kernel æ–‡ä»¶å‡ºé”™äº†ã€‚</p><p>æ‰¾åˆ°ä¸€ä»½ä¹‹å‰çš„å¤‡ä»½ï¼Œä¸€é€šå¯¹æ¯”ï¼Œç»ˆäºæœ‰æ‰€å‘ç°ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/2018-01-05-03-03-33-5a4eeb050862d.png" alt="å¯¹æ¯”ç»“æœ"></p><p>å‡ºé”™çš„ä»£ç æ¯”ä¹‹å‰æ­£å¸¸çš„ä»£ç å¤šäº†ä¸ª â€œï¼Œâ€ï¼Œä¸«çš„ï¼Œå¤ªç²—ç³™äº†ï¼</p><p>å»æ‰ï¼Œå†æ¬¡æ‰§è¡Œ update ï¼Œæœç„¶ä¸€è·¯ç•…é€šæ— é˜»ã€‚</p><p>ä½†æ˜¯é‚£ä¸ªè¯¥æ­»çš„ install æ˜¯å†ä¹Ÿæ²¡å›æ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Layimæ¨¡å—åŒ–å³é”®èœå•</title>
      <link href="/2017/12/27/Layim-contextmenu/"/>
      <url>/2017/12/27/Layim-contextmenu/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç›´è§‰å¾—ç¤¾åŒºé‚£ç¾¤â€œå…ˆé©±â€æçš„å³é”®èœå•è¦ä¹ˆå¤ªä¸‘ï¼Œè¦ä¹ˆé£æ ¼ä¸ç»Ÿä¸€ï¼Œå¾ˆéš¾å—ã€‚</p><p>è¿™ä¸¤å¤©ä»”ç»†çœ‹äº†çœ‹å¿ƒå§çš„æºç ï¼ŒæŠŠå†å²æ¶ˆæ¯é‡Œçš„å³é”®èœå•æªå‡ºæ¥æ”¹äº†ä¸€æŠŠï¼Œæ„Ÿè§‰å¾ˆè‰¯å¥½ã€‚</p><p>æ¼”ç¤ºåœ°å€å·²æŒ‚ï¼Œè¯·åœ¨æœ¬åœ°æ­å»ºåæµ‹è¯•ã€‚</p><p>è°ƒç”¨æ–¹æ³•ï¼Œå…ˆå¼•ç”¨ä¸Šè¾¹æš´éœ²å‡ºæ¥çš„æ–¹æ³•ï¼Œç„¶åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">layim.on(&#39;ready&#39;, function (options) &#123;</span><br><span class="line">    $(&quot;.layim-list-friend &gt;li &gt; ul &gt; li&quot;).menu(&#123;</span><br><span class="line">        menu: [&#123;</span><br><span class="line">                text: &quot;æ–°å¢&quot;,</span><br><span class="line">                callback: function () &#123;</span><br><span class="line">                    alert(&quot;æ–°å¢&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                text: &quot;å¤åˆ¶&quot;,</span><br><span class="line">                callback: function () &#123;</span><br><span class="line">                    alert(&quot;å¤åˆ¶&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                text: &quot;ç²˜è´´&quot;,</span><br><span class="line">                callback: function () &#123;</span><br><span class="line">                    alert(&quot;ç²˜è´´&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                text: &quot;åˆ é™¤&quot;,</span><br><span class="line">                callback: function () &#123;</span><br><span class="line">                    alert(&quot;åˆ é™¤&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸‹è½½åœ°å€ï¼š<br><a href="https://gitee.com/M-finder/Layim-contextmenu">ç äº‘</a><br><a href="https://github.com/M-finder/Layim-contextmenu">Github</a></p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> layui </tag>
            
            <tag> layim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Layuiä½¿ç”¨å¤‡å¿˜</title>
      <link href="/2017/12/22/Layui-notes/"/>
      <url>/2017/12/22/Layui-notes/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå…³äº form æ¸²æŸ“ç‰¹æ®Šç”¨æ³•çš„è§£å†³æ–¹æ¡ˆã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/layui.png"></p><span id="more"></span><h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚ :"></a>éœ€æ±‚ :</h3><p>é¡¹ç›®ä¸­éœ€è¦åšä¸€ä¸ªå¸¦å‚å¯¼å…¥åŠŸèƒ½ , ç”»é¢æ•ˆæœå¦‚ä¸‹å›¾:<br><img src= "/img/loading.gif" data-lazy-src="2017-11-16-10-48-47-5a0cfc8febf33.png" alt="æ•ˆæœå›¾"></p><h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜ :"></a>é‡åˆ°çš„é—®é¢˜ :</h3><ol><li>å¼¹çª—ä¸­ select ä¸æ˜¾ç¤º</li><li>select æ˜¾ç¤ºå , é€‰ä¸­æŸé¡¹æ—¶æ— æ³•æŠŠå€¼ä¼ å…¥åå°</li></ol><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³• :"></a>è§£å†³åŠæ³• :</h3><ol><li>åœ¨å¼¹çª—çš„ success ä¸­ä½¿ç”¨ form.render(â€˜selectâ€™) é‡æ–°æ¸²æŸ“select</li><li>åœ¨å¼¹çª—çš„ success ä¸­å¢åŠ  select åˆ‡æ¢äº‹ä»¶ç›‘å¬ , ç„¶åä½¿ç”¨å˜é‡ uploader æ‰¿æ¥ upload.render , åœ¨ç›‘å¬åˆ° select åˆ‡æ¢æ—¶ , ä½¿ç”¨ uploader.config.data = {â€˜asset_typeâ€™: data.value} æ¥æ›´æ–° upload ä¸­çš„ data å‚æ•° , æœ€åå†ç»™ upload å¢åŠ  before å‚æ•° , æ¥æ¥æ”¶ä¸åˆ‡æ¢ select æ—¶çš„ data å€¼ .</li></ol><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç  :"></a>ä»£ç  :</h3><p>html :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script id&#x3D;&quot;importTpl&quot; type&#x3D;&quot;text&#x2F;html&quot;&gt;</span><br><span class="line">    &lt;form class&#x3D;&quot;layui-form layui-form-pane &quot; method&#x3D;&quot;POST&quot;  onsubmit&#x3D;&quot;return false&quot; &gt;</span><br><span class="line">        &lt;div style&#x3D;&quot;padding: 15px;width:400px;margin:0 auto;&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;layui-form-item&quot; &gt;</span><br><span class="line">                &lt;label class&#x3D;&quot;layui-form-label&quot;&gt;å¯¼å…¥æ–‡ä»¶ç±»å‹&lt;&#x2F;label&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;layui-input-block&quot;&gt;</span><br><span class="line">                    &lt;select name&#x3D;&quot;asset_type&quot; id&#x3D;&#39;asset_type&#39; lay-filter&#x3D;&quot;asset_type&quot;&gt;</span><br><span class="line">                        &lt;option value&#x3D;&quot;1&quot; selected&gt;ä¸ªäººè´·æ¬¾&lt;&#x2F;option&gt;</span><br><span class="line">                        &lt;option value&#x3D;&quot;4&quot;&gt;ç¥¨æ®&lt;&#x2F;option&gt;</span><br><span class="line">                    &lt;&#x2F;select&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;layui-form-item&quot; &gt;</span><br><span class="line">                &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;layui-btn layui-btn-primary&quot; id&#x3D;&quot;import&quot;&gt;</span><br><span class="line">                    &lt;i class&#x3D;&quot;layui-icon&quot;&gt;î™¼&lt;&#x2F;i&gt;</span><br><span class="line">                    é€‰æ‹©æ–‡ä»¶</span><br><span class="line">                &lt;&#x2F;button&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class&#x3D;&quot;layui-row&quot; &gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;layui-btn do-import layui-btn-danger &quot; type&#x3D;&quot;button&quot;&gt;</span><br><span class="line">                    ç¡®å®šå¯¼å…¥</span><br><span class="line">                &lt;&#x2F;button&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>javascript :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$(&#39;#asset-import&#39;).click(function () &#123;</span><br><span class="line">    layer.open(&#123;</span><br><span class="line">        area: [&#39;450px&#39;, &#39;250px&#39;],</span><br><span class="line">        title: &#39;é¡¹ç›®å¯¼å…¥&#39;,</span><br><span class="line">        type: 1,</span><br><span class="line">        content: $(&#39;#importTpl&#39;).html(),</span><br><span class="line">        success: function (layero, index) &#123;</span><br><span class="line">            form.render(&#39;select&#39;);</span><br><span class="line"></span><br><span class="line">            form.on(&#39;select&#39;, function (data) &#123;</span><br><span class="line">                uploader.config.data &#x3D; &#123;&#39;asset_type&#39;: data.value&#125;;</span><br><span class="line">            &#125;);</span><br><span class="line">            var uploader &#x3D; upload.render(&#123;</span><br><span class="line">                url: &#39;&#x2F;reg&#x2F;asset-import&#39;</span><br><span class="line">                , elem: &#39;#import&#39;</span><br><span class="line">                , accept: &#39;file&#39;</span><br><span class="line">                , auto: false</span><br><span class="line">                , bindAction: &#39;.do-import&#39;</span><br><span class="line">                , before: function (obj) &#123;</span><br><span class="line">                        uploader.config.data &#x3D; &#123;&#39;asset_type&#39;: $(&#39;#asset_type&#39;).val()&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">                , done: function (res) &#123;</span><br><span class="line">                    layer.close(index);</span><br><span class="line">                    if (res.code &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                        layer.msg(res.msg, &#123;icon: 1&#125;);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        layer.alert(res.msg, &#123;icon: 2&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç å¤‡å¿˜å½•</title>
      <link href="/2017/12/22/notes/"/>
      <url>/2017/12/22/notes/</url>
      
        <content type="html"><![CDATA[<p>æ‚ä¸ƒæ‚å…«å¤§ä¹±ç‚–ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="/images/st.jpg"></p><span id="more"></span><h3 id="è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼"><a href="#è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼" class="headerlink" title="è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼"></a>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$datetime1 &#x3D; new DateTime(&#39;2009-10-11&#39;);  </span><br><span class="line">&#x2F;&#x2F;new DateTime &#x3D; date_create , åœ¨æŸäº›æ¡†æ¶ä¸­ç”¨ new DateTime éœ€è¦åŠ  &#39;\&#39; ;</span><br><span class="line">$datetime2 &#x3D; new DateTime(&#39;2009-10-13&#39;);  </span><br><span class="line">$interval &#x3D; $datetime1-&gt;diff($datetime2);  </span><br><span class="line">echo $interval-&gt;format(&#39;%R%a days&#39;); </span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºæ–‡ä»¶å¤¹"><a href="#æ–°å»ºæ–‡ä»¶å¤¹" class="headerlink" title="æ–°å»ºæ–‡ä»¶å¤¹"></a>æ–°å»ºæ–‡ä»¶å¤¹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$dir &#x3D; iconv(&quot;UTF-8&quot;, &quot;GBK&quot;, &quot;C:&#x2F;www&#x2F;report&#x2F;&quot;); &#x2F;&#x2F;linuxä¸‹å¯ä¸è½¬ç </span><br><span class="line">if (!file_exists($dir))&#123;</span><br><span class="line">      mkdir ($dir,0755,true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Ascii-ç è½¬æ¢"><a href="#Ascii-ç è½¬æ¢" class="headerlink" title="Ascii ç è½¬æ¢"></a>Ascii ç è½¬æ¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function stringFromColumnIndex($pColumnIndex &#x3D; 0) &#123;</span><br><span class="line">    static $_indexCache &#x3D; array();</span><br><span class="line">    if (!isset($_indexCache[$pColumnIndex])) &#123;</span><br><span class="line">        &#x2F;&#x2F; Determine column string</span><br><span class="line">        if ($pColumnIndex &lt; 26) &#123;</span><br><span class="line">            $_indexCache[$pColumnIndex] &#x3D; chr(65 + $pColumnIndex);</span><br><span class="line">        &#125; elseif ($pColumnIndex &lt; 702) &#123;</span><br><span class="line">            $_indexCache[$pColumnIndex] &#x3D; chr(64 + ($pColumnIndex &#x2F; 26)) .</span><br><span class="line">                    chr(65 + $pColumnIndex % 26);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            $_indexCache[$pColumnIndex] &#x3D; chr(64 + (($pColumnIndex - 26) &#x2F; 676)) . chr(65 + ((($pColumnIndex - 26) % 676) &#x2F; 26)) . chr(65 + $pColumnIndex % 26);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return $_indexCache[$pColumnIndex];</span><br><span class="line">&#125;</span><br><span class="line">echo stringFromColumnIndex(37);</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—æ—¶é—´è¿‡å»äº†å¤šä¹…-å¤©-æ—¶-åˆ†-ç§’"><a href="#è®¡ç®—æ—¶é—´è¿‡å»äº†å¤šä¹…-å¤©-æ—¶-åˆ†-ç§’" class="headerlink" title="è®¡ç®—æ—¶é—´è¿‡å»äº†å¤šä¹… å¤©\æ—¶\åˆ†\ç§’"></a>è®¡ç®—æ—¶é—´è¿‡å»äº†å¤šä¹… å¤©\æ—¶\åˆ†\ç§’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function secsToStr($secs) &#123;</span><br><span class="line">    $r &#x3D; &#39;&#39;;</span><br><span class="line">    if ($secs &gt;&#x3D; 86400) &#123;</span><br><span class="line">        $days &#x3D; floor($secs &#x2F; 86400);</span><br><span class="line">        $secs &#x3D; $secs % 86400;</span><br><span class="line">        $r &#x3D; $days . &#39; å¤©&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    if ($secs &gt;&#x3D; 3600) &#123;</span><br><span class="line">        $hours &#x3D; floor($secs &#x2F; 3600);</span><br><span class="line">        $secs &#x3D; $secs % 3600;</span><br><span class="line">        $r .&#x3D; $hours . &#39; å°æ—¶&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    if ($secs &gt;&#x3D; 60) &#123;</span><br><span class="line">        $minutes &#x3D; floor($secs &#x2F; 60);</span><br><span class="line">        $secs &#x3D; $secs % 60;</span><br><span class="line">        $r .&#x3D; $minutes . &#39; åˆ†é’Ÿ&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    $r .&#x3D; $secs . &#39; ç§’&#39;;</span><br><span class="line">    return $r;</span><br><span class="line">&#125;</span><br><span class="line">echo secsToStr(545517.1111111111);</span><br></pre></td></tr></table></figure><h3 id="win10-é…ç½®-pthreads-å¤šçº¿ç¨‹æ‰©å±•"><a href="#win10-é…ç½®-pthreads-å¤šçº¿ç¨‹æ‰©å±•" class="headerlink" title="win10 é…ç½® pthreads å¤šçº¿ç¨‹æ‰©å±•"></a>win10 é…ç½® pthreads å¤šçº¿ç¨‹æ‰©å±•</h3><p>pthreads åªæ”¯æŒ ts ç‰ˆæœ¬çš„ php , å³çº¿ç¨‹å®‰å…¨ç‰ˆ</p><p>phpstudy è‡ªå®šä¹‰ç‰ˆæœ¬æ—¶æ€»åœ¨æŠ¥é”™ , æ‰€ä»¥æ¢äº† xmapp</p><p>pthreads ä¸‹è½½åœ°å€ : <a href="http://windows.php.net/downloads/pecl/releases/pthreads/">æ²¡é”™ï¼Œç‚¹æˆ‘</a></p><p>è¦å¯¹åº”ç‰ˆæœ¬å·å’Œä½æ•°  ä½æ•°ä»¥ php çš„ä¸ºå‡†</p><p>ä¸‹è½½è§£å‹å , æŠŠ php_pthreads.dll å’Œ  pthreadVC2.dll å¤åˆ¶åˆ° php\ext ä¸‹è¾¹</p><p>php.ini æœ€åè¾¹æ–°å¢ : extension=php_pthreads.dll</p><p>ç„¶åå†å¤åˆ¶ä¸€ä¸ª pthreadVC2.dll åˆ°ç³»ç»Ÿç›®å½•</p><p>ç³»ç»Ÿä¸º 32 ä½çš„å°±å¤åˆ¶è¿› C:\Windows\System32</p><p>64 ä½çš„å°±å¤åˆ¶è¿› C:\Windows\SysWOW64</p><p>é‡å¯ xmapp , æ–°å»ºä¸€ä¸ª test.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class AsyncOperation extends \Thread &#123;</span><br><span class="line">    public function __construct($arg)&#123;</span><br><span class="line">        $this-&gt;arg &#x3D; $arg;</span><br><span class="line">    &#125;</span><br><span class="line">    public function run()&#123;</span><br><span class="line">        if($this-&gt;arg)&#123;</span><br><span class="line">            printf(&quot;Hello %s\n&quot;, $this-&gt;arg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$thread &#x3D; new AsyncOperation(&quot;World&quot;);</span><br><span class="line"></span><br><span class="line">if($thread-&gt;start())&#123;</span><br><span class="line">    $thread-&gt;join();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ url è®¿é—® test æ–‡ä»¶ , å‡ºç° Hello World å°±æˆåŠŸäº†</p><p>æˆ–è€…æŸ¥çœ‹ phpinfo é‡Œè¾¹æœ‰æ²¡æœ‰ pthreads æ‰©å±•</p><h3 id="Jsè°ƒç”¨ç³»ç»Ÿæ¡Œé¢é€šçŸ¥"><a href="#Jsè°ƒç”¨ç³»ç»Ÿæ¡Œé¢é€šçŸ¥" class="headerlink" title="Jsè°ƒç”¨ç³»ç»Ÿæ¡Œé¢é€šçŸ¥:"></a>Jsè°ƒç”¨ç³»ç»Ÿæ¡Œé¢é€šçŸ¥:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (window.Notification &amp;&amp; Notification.permission !&#x3D;&#x3D; &quot;denied&quot;) &#123;</span><br><span class="line">Notification.requestPermission(function (status) &#123;</span><br><span class="line">var n &#x3D; new Notification(&quot;sir, you got a message&quot;, &#123;</span><br><span class="line">icon: &#39;&#x2F;img&#x2F;logo.png&#39;,</span><br><span class="line">body: &#39;you will have a meeting 5 minutes later.&#39;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jså£°éŸ³æé†’"><a href="#jså£°éŸ³æé†’" class="headerlink" title="jså£°éŸ³æé†’"></a>jså£°éŸ³æé†’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">audioElementHovertree &#x3D; document.createElement(&#39;audio&#39;);  </span><br><span class="line">audioElementHovertree.setAttribute(&#39;src&#39;, &#39;http:&#x2F;&#x2F;w.qq.com&#x2F;audio&#x2F;classic.mp3&#39;);  </span><br><span class="line">audioElementHovertree.setAttribute(&#39;autoplay&#39;, &#39;autoplay&#39;);</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åˆ†é…ï¼š"><a href="#æ•°æ®åˆ†é…ï¼š" class="headerlink" title="æ•°æ®åˆ†é…ï¼š"></a>æ•°æ®åˆ†é…ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$max_worker_num &#x3D; 30;</span><br><span class="line">$data_num &#x3D; 74;</span><br><span class="line"></span><br><span class="line">if ($data_num &#x3D;&#x3D; 0) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for ($i &#x3D; 0; $i &lt; $data_num; $i++) &#123;</span><br><span class="line">$data[$i] &#x3D; $i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$min_worker_num &#x3D; min($data_num, $max_worker_num);</span><br><span class="line"></span><br><span class="line">$data_arr &#x3D; array_chunk($data, ceil($data_num &#x2F; $min_worker_num), true);</span><br><span class="line"></span><br><span class="line">$worker_num &#x3D; ceil($data_num &#x2F; ceil($data_num &#x2F; $min_worker_num));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel ä½¿ç”¨ç¬”è®°</title>
      <link href="/2017/12/22/laravel-notes/"/>
      <url>/2017/12/22/laravel-notes/</url>
      
        <content type="html"><![CDATA[<p><img src= "/img/loading.gif" data-lazy-src="/images/laravel.jpg"></p><span id="more"></span><p>å…ˆä»æœ€ç®€å•çš„å¼€å§‹ï¼š</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>laravel çš„å®‰è£…éœ€è¦å€ŸåŠ© composer ï¼Œç™¾åº¦ä¸€ä¸‹ï¼Œå®‰è£…ï¼Œç„¶åå» GitHub ä¸‹è½½ laravel</p><p>åˆ‡æ¢åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ ï¼Œåœ¨ä¸é€‰ä¸­ä»»ä½•æ–‡ä»¶çš„å‰æä¸‹æŒ‰ä½ shift + é¼ æ ‡å³é”®ï¼Œæ‰“å¼€ Powershell æˆ–è€… cmd</p><p>è¾“å…¥ï¼šcomposer install </p><p>å°† .env.example å¦å­˜ä¸º .env</p><p>ä¿®æ”¹æ•°æ®åº“é…ç½®ä¿¡æ¯å’Œé‚®ä»¶ç³»ç»Ÿé…ç½®ä¿¡æ¯</p><p>ç„¶ååœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼šphp artisan key:generate ç”Ÿæˆå¯†é’¥</p><p>ç„¶åé…ç½®ä¸€ä¸ªæœ¬åœ°åŸŸåæŒ‡å‘ public æ–‡ä»¶å¤¹ï¼Œç„¶åï¼Œå°±å¥½äº†ã€‚[å“ˆå“ˆ] </p><h3 id="é‚®ä»¶"><a href="#é‚®ä»¶" class="headerlink" title="é‚®ä»¶"></a>é‚®ä»¶</h3><p>é‚®ä»¶ç³»ç»Ÿé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MAIL_DRIVER&#x3D;smtp</span><br><span class="line">MAIL_HOST&#x3D;smtp.mxhichina.com</span><br><span class="line">MAIL_PORT&#x3D;25&#x2F;&#x2F;465</span><br><span class="line">MAIL_USERNAME&#x3D;m@m-finder</span><br><span class="line">MAIL_PASSWORD&#x3D;é‚®ç®±å¯†ç </span><br><span class="line">MAIL_FROM_NAME&#x3D;M-finder</span><br><span class="line">MAIL_FROM_ADDRESS&#x3D;m@m-finder</span><br><span class="line">MAIL_ENCRYPTION&#x3D;null&#x2F;&#x2F;ssl #å¦‚æœç”¨465ç«¯å£çš„è¯ï¼Œéœ€è¦å‚æ•° MAIL_ENCRYPTION&#x3D;ssl</span><br></pre></td></tr></table></figure><p>é‚®ä»¶æœ‰ 3 ç§æ¨¡å¼ï¼ˆå¯èƒ½æ›´å¤šï¼Œæš‚æ—¶åªæ¥è§¦åˆ°3ç§ï¼‰:<br>ä¸€ç§ç”¨ Mail::send æ–¹æ³•<br>ä¸€ç§ç”¨ Mail::raw<br>å¦å¤–ä¸€ç§åˆ™æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„ï¼Œæ–°å»ºä¸€ä¸ªç±»ï¼Œç„¶åå‘é€é‚®ä»¶æ—¶å®ä¾‹åŒ–è¿™ä¸ªç±»ã€‚3 ç§æ–¹æ³•å®ç°çš„åŠŸèƒ½ä¸€æ ·ã€‚<br>Mail::send</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mail::send(&#39;admin.email&#39;, [&#39;orderPrice&#39; &#x3D;&gt; &#39;laravel&#39;], function ($message) &#123;</span><br><span class="line">    $message-&gt;to(&#39;m@m-finder&#39;);</span><br><span class="line">    $message-&gt;subject(&#39;æˆ‘æ˜¯è‡ªå®šä¹‰æ ‡é¢˜&#39;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè§†å›¾æ–‡ä»¶ï¼Œè§†å›¾æ–‡ä»¶çš„ç”¨æ³•ç­‰åŒäºæ™®é€šè§†å›¾ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè§†å›¾ä¸­æ‰€ç”¨åˆ°çš„æ•°æ®<br>Mail::raw</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$content &#x3D; &#39;è¿™æ˜¯ä¸€å°æ¥è‡ªLaravelçš„æµ‹è¯•é‚®ä»¶.&#39;;</span><br><span class="line">$toMail &#x3D; &#39;m@m-finder&#39;;</span><br><span class="line">        </span><br><span class="line"> Mail::raw($content, function ($message) use ($toMail) &#123;</span><br><span class="line">$message-&gt;subject(&#39;[ æµ‹è¯• ] æµ‹è¯•é‚®ä»¶SendMail - &#39; . date(&#39;Y-m-d H:i:s&#39;));</span><br><span class="line">$message-&gt;to($toMail);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ç­‰åŒäºMail::send</p><p>ç¬¬ä¸‰ç§æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:controller MailController</span><br><span class="line"></span><br><span class="line">php artisan make:mail OrderShipped</span><br><span class="line"></span><br><span class="line">åœ¨ OrderShipped å¢åŠ å†…å®¹</span><br><span class="line"></span><br><span class="line">return $this-&gt;view(&#39;admin.email&#39;)-&gt;with([</span><br><span class="line">            &#39;orderName&#39; &#x3D;&gt; &#39;test&#39;,</span><br><span class="line">            &#39;orderPrice&#39; &#x3D;&gt; 1500,</span><br><span class="line"> ]);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨è¦å‘é€é‚®ä»¶çš„æ–¹æ³•ä¸­è°ƒç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mail::to(&#39;m@m-finder&#39;)-&gt;send(new OrderShipped());</span><br></pre></td></tr></table></figure><p>å¼€æ”¾è·¯ç”±ï¼Œè®¿é—®ä¸‹å°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰é‚®ä»¶æ ‡é¢˜ï¼Œå¯ä»¥è¯•ä¸€ä¸‹ä»¥ä¸‹æ–¹æ³•ï¼ˆæœªæµ‹è¯•ï¼‰ï¼š</p><p>åœ¨ä½ çš„ç±»ä¸­å®šä¹‰ä¸€ä¸ªsubjectå˜é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public $subject &#x3D; &#39;è¿™é‡Œæ˜¯é‚®ä»¶è‡ªå®šä¹‰æ ‡é¢˜&#39;;</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨ä½ çš„viewåè·Ÿä¸€ä¸ªsubjectæ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view(&#39;emails.activate-user&#39;)-&gt;subject(&#39;è¿™é‡Œå®šä¹‰é‚®ä»¶æ ‡é¢˜&#39;)ï¼›</span><br></pre></td></tr></table></figure><h3 id="å¤šè§†å›¾å…±äº«æ•°æ®"><a href="#å¤šè§†å›¾å…±äº«æ•°æ®" class="headerlink" title="å¤šè§†å›¾å…±äº«æ•°æ®"></a>å¤šè§†å›¾å…±äº«æ•°æ®</h3><p>åœ¨ app\Providers æ–‡ä»¶å¤¹ä¸‹ boot() æ–¹æ³•ä¸­å†™å…¥è¦å…±äº«çš„æ•°æ®å³å¯ , ä¾‹å¦‚ :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public function boot() &#123;</span><br><span class="line">$links &#x3D; Link::orderBy(&#39;id&#39;, &#39;desc&#39;)-&gt;get();</span><br><span class="line">$web_info &#x3D; SysConfig::first();</span><br><span class="line">$menus &#x3D;  Menu::select(&#39;id&#39;, &#39;name&#39;, &#39;type&#39;, &#39;seo_title&#39;, &#39;seo_describe&#39;, &#39;link&#39;)</span><br><span class="line">        -&gt;where(&#39;pid&#39;, &#39;&#x3D;&#39;, 0)</span><br><span class="line">        -&gt;where(&#39;is_show&#39;, &#39;&#x3D;&#39;, &#39;2&#39;)</span><br><span class="line">        -&gt;get();</span><br><span class="line"></span><br><span class="line">view()-&gt;share(&#39;links&#39;, $links);</span><br><span class="line">view()-&gt;share(&#39;web_info&#39;, $web_info);</span><br><span class="line">view()-&gt;share(&#39;menus&#39;, $menus);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™å®Œä»¥åï¼Œä½ ä¼šå‘ç°ä½ çš„ migrate æŒ‚äº†ï¼Œå“ˆå“ˆ ï¼Œè§£å†³åŠæ³•æ˜¯ä½¿ç”¨é—­åŒ…ï¼Œå³ composer æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public function boot() &#123;</span><br><span class="line">        Schema::defaultStringLength(191); &#x2F;&#x2F;è§£å†³æ•°æ®åº“ç‰ˆæœ¬è¿‡ä½æ— æ³•æ‰§è¡Œ migrate</span><br><span class="line"></span><br><span class="line">        view()-&gt;composer([&#39;layouts.home&#39;, &#39;layouts.userhome&#39;,&#39;layouts.admin&#39;], function($view) &#123;</span><br><span class="line">            $links &#x3D; Link::orderBy(&#39;id&#39;, &#39;desc&#39;)-&gt;get();</span><br><span class="line">            $web_info &#x3D; SysConfig::first();</span><br><span class="line">            $menus &#x3D; Menu::select(&#39;id&#39;, &#39;name&#39;, &#39;type&#39;, &#39;seo_title&#39;, &#39;seo_describe&#39;, &#39;link&#39;)</span><br><span class="line">            -&gt;where(&#39;pid&#39;, &#39;&#x3D;&#39;, 0)</span><br><span class="line">            -&gt;where(&#39;is_show&#39;, &#39;&#x3D;&#39;, &#39;2&#39;)</span><br><span class="line">            -&gt;get();</span><br><span class="line">            $view-&gt;with([&#39;links&#39; &#x3D;&gt; $links, &#39;web_info&#39; &#x3D;&gt; $web_info, &#39;menus&#39; &#x3D;&gt; $menus]);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p>config æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª filesystems.phpï¼Œé‡Œè¾¹æ˜¯é»˜è®¤çš„ä¸Šä¼ åœ°å€ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åšä¿®æ”¹æˆ–è€…æ·»åŠ </p><p>ä¸Šä¼ çš„æ§åˆ¶å™¨ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">if ($file-&gt;isValid()) &#123;</span><br><span class="line">if ($file-&gt;getClientSize() &gt; 2097152) &#123;</span><br><span class="line">return $this-&gt;json_response(1, &quot;è¯·ä¸Šä¼ å°äº 2 mb çš„å›¾ç‰‡&quot;, 0);</span><br><span class="line">&#125;</span><br><span class="line">$ext &#x3D; $file-&gt;getClientOriginalExtension();</span><br><span class="line">$realPath &#x3D; $file-&gt;getRealPath();</span><br><span class="line">$type &#x3D; $file-&gt;getClientMimeType();</span><br><span class="line">$filename &#x3D; date(&#39;Y-m-d-H-i-s&#39;) . &#39;-&#39; . uniqid() . &#39;.&#39; . $ext;</span><br><span class="line">$bool &#x3D; Storage::disk($path)-&gt;put($filename, file_get_contents($realPath));</span><br><span class="line">$url &#x3D; Storage::disk($path)-&gt;url($filename);</span><br><span class="line">if ($filename) &#123;</span><br><span class="line">return [&#39;code&#39; &#x3D;&gt; 0, &#39;msg&#39; &#x3D;&gt; &#39;&#39;, &#39;src&#39; &#x3D;&gt; $url, </span><br><span class="line">                 &#39;data&#39;&#x3D;&gt;[&#39;src&#39;&#x3D;&gt;$url,&#39;title&#39;&#x3D;&gt;$filename]]; </span><br><span class="line">         &#x2F;&#x2F;&#123;&quot;code&quot;: 0 ,&quot;msg&quot;: &quot;&quot; ,&quot;data&quot;: &#123;&quot;src&quot;: &quot;å›¾ç‰‡è·¯å¾„&quot;,&quot;title&quot;: &quot;å›¾ç‰‡åç§°&quot;&#125;  layui å›¾ç‰‡ä¸Šä¼ æ¥å£</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®ä¸Šä¼ åˆ°æœ¬åœ°çš„æ–‡ä»¶èµ„æºï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼šphp artisan storage:link</p><p>ä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¦‚æœæœ‰ ajax è°ƒå–æ•°æ®çš„ï¼Œå¯ä»¥æŠŠ ajax ä½¿ç”¨çš„è·¯ç”±å’Œé¡µé¢çš„è·¯ç”±åç§°å®šä¹‰ä¸ºåŒä¸€ä¸ªï¼Œä¸åŒçš„æ˜¯é¡µé¢æ˜¯ get ï¼Œajax æ˜¯ post</p><h3 id="è‡ªå®šä¹‰404é¡µé¢"><a href="#è‡ªå®šä¹‰404é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰404é¡µé¢"></a>è‡ªå®šä¹‰404é¡µé¢</h3><p>åœ¨ app\Exceptionsæ–‡ä»¶å¤¹ä¸‹çš„Handerä¸­æœ‰ä¸ªrenderæ–¹æ³•ï¼Œæ”¹é€ ä¸€ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public function render($request, Exception $exception)&#123;</span><br><span class="line"></span><br><span class="line">    if ($exception instanceof ModelNotFoundException) &#123;</span><br><span class="line">        $exception &#x3D; new NotFoundHttpException($exception-&gt;getMessage(), $exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if ( ! config(&#39;app.debug&#39;)) &#123;</span><br><span class="line">        return response()-&gt;view(&#39;errors.500&#39;, [], 500);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return parent::render($request, $exception);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨viewsæ–‡ä»¶å¤¹æ–°å»ºerroræ–‡ä»¶å¤¹å’Œå¯¹åº”é”™è¯¯ä»£ç çš„bladeæ–‡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ä¸èƒ½åœ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åƒè´§å°±è¯¥èµ°åˆ°å“ªå„¿åƒåˆ°å“ªå„¿</title>
      <link href="/2017/03/28/eat-more/"/>
      <url>/2017/03/28/eat-more/</url>
      
        <content type="html"><![CDATA[<p>1å·å»4å·å›ï¼Œæ­¦æ±‰ä¸‰æ—¥æ¸¸ã€‚å“ˆå“ˆå“ˆ~</p><p><img src= "/img/loading.gif" data-lazy-src="/images/%E7%A7%8B%E6%B0%B4%E9%95%BF%E5%A4%A9.jpg"></p><span id="more"></span><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»¥ä¸‹å†…å®¹å†™è‡ªæ­¦æ±‰æ¸¸å›æ¥ã€‚ --2017å¹´04æœˆ08 </span><br></pre></td></tr></table></figure><p>ä»4å¹´å‰å¼€å§‹ï¼Œå°±ä¸€ç›´æ€€æ£ç€ä¸€ä¸ªæ¢¦ï¼Œæƒ³è¦å¤šå‡ºå»èµ°èµ°ã€‚</p><p>å¹´è½»å˜›ï¼Œå¿ƒé‡Œéš¾å…èºåŠ¨ã€‚</p><p>åœ¨å‡†å¤‡äº†ä¸€å¹´å¤šåï¼Œç»ˆäºå¼€å§‹äº†ç¬¬ä¸€æ¬¡å‡ºè¡Œï¼Œå’Œæˆ‘å¥½åŸºå‹é€—æ–Œï¼Œç›®æ ‡æ‹‰è¨ã€‚</p><p>è¯´æ˜¯å‡†å¤‡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯çœ‹çœ‹æ”»ç•¥ï¼Œå¿ƒé‡Œå¤§æ¦‚æœ‰äº†ç‚¹å„¿éƒ½è¦å»å“ªå„¿ç©ï¼Œéœ€è¦å‡†å¤‡ä»€ä¹ˆä¸œè¥¿çš„é€¼æ•°ã€‚</p><p>åˆ°äº†è¦å»äº†ï¼Œåˆå‘ç°æˆ‘åšçš„å‡†å¤‡æ ¹æœ¬å°±è¡Œä¸é€šï¼Œå› ä¸ºæ—¶é—´åªæœ‰ä¸€å‘¨ï¼Œè€Œæˆ‘ä¹‹å‰çœ‹çš„å…¨æ˜¯å¾’æ­¥ã€‚</p><p>è¿™ä¹Ÿæœ‰ç‚¹å„¿å¤ªé€—é€¼äº†ï¼Œè€Œä¸”é‚£æ—¶ç¾å›¢ä¹Ÿä¸ä¼šç”¨ï¼Œä½æˆ¿ä»€ä¹ˆçš„ä¹Ÿä¸ä¼šå®šï¼Œæœ€åè¿˜æ˜¯æ–Œå­åœ¨è´´å§ä¸Šæ‰¾çš„ï¼Œå‡ºè¡Œè®¡åˆ’ä¹Ÿæ˜¯æ–Œå­åšçš„ã€‚</p><p>è€Œæˆ‘ï¼Œåˆç®€å•çš„æ‰’æ‹‰äº†ä¸¤ç¯‡æ”»ç•¥ï¼Œå‡­ç€ä¸€è‚¡å­250 plusçš„æ„£åŠ²å„¿ï¼Œå°±ç¡¬ç”Ÿç”Ÿçš„çªƒå–å¹¶äº«å—äº†æ–Œå­çš„åŠ³åŠ¨æˆæœã€‚</p><p>38å°æ—¶çš„ç¡¬åº§å’Œä¸æ–­å¢é«˜çš„æµ·æ‹”ç®€ç›´æ˜¯ç§æŠ˜ç£¨ï¼Œå¥½åœ¨æ²¿é€”çš„é£æ™¯çœŸçš„å¾ˆç¾ï¼Œå’¬å’¬ç‰™ä¹Ÿå°±æ’‘è¿‡å»äº†ã€‚</p><p>é‚£æ—¶å€™æ²¡ä»€ä¹ˆé’±ï¼Œï¼ˆç°åœ¨ä¹Ÿæ²¡ä»€ä¹ˆé’±ï¼‰ä¹Ÿä¸ä¼šæ‹ç…§ï¼Œæ›´é‡è¦çš„ä¸€ç‚¹æ˜¯è¿˜ä¸ä¼šç©ï¼</p><p>ç°åœ¨æƒ³æƒ³ï¼Œæœ‰ç‚¹å„¿å¯¹ä¸ä½å»ä¸€è¶Ÿçš„æŠ˜è…¾ã€‚</p><p>å»çš„è¿™å‡ å¤©ï¼Œå°äº†å°è—é¢ã€é’ç¨é¢ã€é…¥æ²¹èŒ¶ï¼Œå»çš„éƒ½æ˜¯ä¸èµ·çœ¼çš„è—æ—å°é¦†å­ï¼Œåº”è¯¥æŒºæ­£å®—ã€‚</p><p>è¿˜åœ¨å¸ƒå®«å‰è¾¹åƒäº†å†»å¥¶è¿˜æ˜¯å•¥çš„ï¼Œä¸è¿‡æŒºå‘çˆ¹ï¼Œå°±æ˜¯ä¸ªå°é›ªç³•ã€‚</p><p>ç©çš„åœ°æ–¹ä¸å¤šï¼Œå»äº†è¶Ÿå¸ƒå®«ï¼Œå› ä¸ºæ²¡æå‰è®¢ç¥¨ï¼Œä¹Ÿå°±åœ¨å¤–è¾¹å¹¿åœºè½¬è½¬ï¼Œç„¶åè·‘å»å…«å»“è¡—é€›äº†é€›ï¼Œä¹°äº†ä¸²æ•£çš„è©æç å­ï¼Œåˆè·Ÿå»æ—¶é‡åˆ°çš„å†²å“¥ç‡•å§ä¸€èµ·å»ç›å‰é˜¿ç±³è¥¿é¤å…å¥¢ä¾ˆäº†ä¸€æŠŠï¼Œå–äº†å£¶é’ç¨é…’ï¼Œåƒäº†å¥½å¤šå¸¦ç‚¹å„¿è—æ—è‰²å½©çš„â€œè¥¿é¤â€ã€‚å½“æ—¶å¥½åƒæœ‰ä¸ªä»€ä¹ˆå±•è§ˆåœ¨åšç‰©é¦†ï¼Œæ‰€ä»¥å°±èµ°è¿‡å»çœ‹äº†çœ‹ã€‚</p><p>å“¦ï¼Œè¿˜æœ‰æ‹‰è¨æ²³ï¼Œå½“æ—¶å…¶å®æƒ³å»è¥¿è—å¤§å­¦æ¥ç€ï¼Œè¢«é—¨å«æ‹¦äº†ã€‚</p><p>å›æ¥çš„å‰ä¸€å¤©æ™šä¸Šï¼Œç¢ç£¨ç€ä¸èƒ½å°±è¿™ä¹ˆèµ°äº†å‘€ï¼Œåˆæ‰“è½¦å»äº†è¶Ÿå¸ƒå®«ï¼Œæ²¿ç€å¸ƒå®«èµ°äº†ä¸€åœˆï¼Œä¸€è¾¹èµ°ä¸€è¾¹èŠç†æƒ³ã€èŠæœªæ¥ï¼Œä¹Ÿä¹åœ¨å…¶ä¸­ã€‚å½“æ—¶è¿˜é‡åˆ°ä¸ªå¼¹å‰ä»–çš„èƒ–å“¥å“¥ï¼Œæ–Œå­å½•äº†è§†é¢‘åœ¨å¾®åšï¼Œå¥½å¬æäº†ã€‚</p><p>å¯èƒ½æˆ‘å°±æ˜¯ä»é‚£å„¿å›æ¥åï¼Œå¼€å§‹å–œæ¬¢å¬æ°‘è°£çš„ã€‚</p><p>å½“å¹´å½•çš„è§†é¢‘åœ°å€ï¼š<a href="http://t.cn/RhkI899/">This link</a></p><p>å›æ¥çš„ç«è½¦ä¸Šï¼Œå›´ç€æˆ‘å’Œæ–Œå­ä¸€åœˆéƒ½æ˜¯è€ä¹¡ï¼Œä¸¤å¥³ä¸€ç”·ï¼Œå†åŠ ä¸Šæˆ‘ä»¬ä¿©ã€‚</p><p>é‚£è€å“¥30æ¥å²ï¼Œä¸€è·¯ç‹‚é£šè£…é€¼æ¨¡å¼ï¼Œè¯´ä»–çˆ¬äº†ç å³°ï¼Œå¸¦ä¸‹æ¥ä¸€æ¡¶ç å³°é›ªæ°´ï¼Œå»äº†é˜¿é‡Œè½¬äº†å±±ã€è¯·äº†æ„¿ç­‰ç­‰ç­‰ç­‰ã€‚</p><p>æœŸé—´å¯¹æˆ‘å’Œæ–Œå­å†·å˜²çƒ­è®½ï¼Œæˆ‘ç¢ç£¨ç€ä»–è¿™ä¹ˆä¸é—ä½™åŠ›å¯èƒ½æ˜¯å› ä¸ºä¸¤ç‚¹ï¼Œä¸€æ˜¯æƒ³åœ¨ä¿©å¦¹å­é¢å‰æ˜¾æ‘†ï¼Œå› ä¸ºä»–ä¸€ç›´è¯´è¦ä¸æ˜¯ç»“å©šäº†ï¼Œéè¦æŠŠå…¶ä¸­ä¸€ä¸ªå¦¹å­ç»™æ”¶äº†ä¸æˆï¼ŒäºŒæ˜¯è§æˆ‘ä»¬ä¿©æ‰20å‡ºå¤´ï¼Œå•¥éƒ½æ²¡æœ‰å°±æ•¢å»è¥¿è—ï¼Œè€Œä»–å´ç­‰åˆ°30æ‰æ•¢åŠ¨èº«ï¼Œå«‰å¦’ï¼</p><p>è¢«äººå†·å˜²çƒ­è®½äº†ä¸€è·¯ï¼Œæˆ‘ç…§å•å…¨æ”¶äº†ï¼Œå› ä¸ºæˆ‘è§‰å¾—å¤šå¬å¬äººå®¶æ€ä¹ˆç©çš„ä¹Ÿç®—æ˜¯ç§æˆé•¿å§ï¼Œç°åœ¨æƒ³æƒ³ï¼Œä¹Ÿç¡®å®æ˜¯ç§æˆé•¿ã€‚</p><p>è¿™ä¸¤å¼ æ˜¯æˆ‘æ‹çš„ï¼Œå¹¶ä¸æ‡‚æ„å›¾ä»€ä¹ˆçš„ï¼Œåªèƒ½çæ‹ç€ç©ç©ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/cloud.jpg" alt="è—åŒºçš„ç™½äº‘"><br><img src= "/img/loading.gif" data-lazy-src="/images/mou.jpg" alt="ç‰¦ç‰›"></p><p>è¿™å¼ æ˜¯é€—æ–Œæ‹çš„ï¼Œç¾ä¸èƒœæ”¶ï¼Œä½†æ˜¯ç»å¯¹æ˜¯ççŒ«ç¢°ä¸Šæ­»è€—å­ï¼<br><img src= "/img/loading.gif" data-lazy-src="/images/%E7%A7%8B%E6%B0%B4%E9%95%BF%E5%A4%A9.jpg" alt="ç§‹æ°´é•¿å¤©"></p><p>å›æ¥å‰ä¸€å¤œæ‹çš„å¸ƒå®«å¤œæ™¯ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/%E5%B8%83%E5%AE%AB%E5%A4%9C%E6%99%AF1.jpg" alt="å¸ƒå®«å¤œæ™¯"><br><img src= "/img/loading.gif" data-lazy-src="/images/%E5%B8%83%E5%AE%AB%E5%A4%9C%E6%99%AF2.jpg" alt="å¸ƒå®«å¤œæ™¯"></p><p>å»å¸ƒå®«æ˜¯å¸¦ç€ä½¿å‘½å»çš„ï¼Œå¤§å­¦ä¸¤å¹´äº†ï¼Œè§‰å¾—è‡ªå·±ä¸€æ— æ˜¯å¤„ï¼Œæ•´å¤©æµ‘æµ‘å™©å™©ï¼Œä»€ä¹ˆä¹Ÿå­¦ä¸ä¼šï¼Œä»€ä¹ˆä¹Ÿéƒ½ä¸æƒ³å­¦ï¼Œéƒ½è¯´å»æ‹‰è¨æ˜¯è¶Ÿå‡€åŒ–å¿ƒçµä¹‹æ—…ï¼Œæˆ‘ä¿¡äº†ã€‚</p><p>å¯èƒ½ä¹ŸçœŸçš„ç®¡ç”¨äº†å§ã€‚å› ä¸ºåæ¥çš„ä¸¤å¹´å¤§å­¦ç”Ÿæ´»ä¹Ÿç®—æ˜¯æ²¡æœ‰ç™½è´¹ã€‚</p><p>åœ¨å­¦æ ¡æ—¶ï¼Œå»äº†å¥½å¤šè¶Ÿå´æ±Ÿï¼Œéƒ½æ˜¯å­¦æ ¡ç»„ç»‡çš„æš‘å‡æ‰“å·¥å’Œå®ä¹ ã€‚</p><p>å´æ±Ÿæœ‰ä¸ªåŒé‡Œå¤é•‡ï¼Œç¦»å‚åŒºä¸è¿œã€‚</p><p>ä½†æ˜¯å»äº†å‡ è¶Ÿå´æ±Ÿï¼Œä¸€ç›´éƒ½æ²¡è¿‡å»ï¼Œäººå¤ªæ‡’ï¼Œä¹Ÿè§‰å¾—è¿™ä¹ˆå¤šäººéƒ½èµ·ç€å“„è¿‡å»ï¼Œä¿—ä¸ä¿—å•Šï¼Œå“¥å¯æ˜¯å»æ‹‰è¨çš„äººã€‚</p><p>æœ€åä¸€å¹´å®ä¹ ï¼Œé€—æ–Œåä¸ä½äº†ï¼Œå»äº†è¿™ä¹ˆå¤šè¶Ÿï¼Œæ±Ÿè‹æœ‰åçš„ç™½é±¼ç™½è™¾å’Œé“¶é±¼æ˜¯å•¥å‘³å„¿è¿˜æ²¡å°è¿‡ï¼Œè¿™è¾¹è¿™ä¹ˆå¤šå¥½åƒçš„ä¹Ÿéƒ½ä¸çŸ¥é“ä»€ä¹ˆå‘³å„¿å‘¢ã€‚</p><p>è¿™å®ä¹ è¿‡å°±è¦æ¯•ä¸šäº†ï¼Œä»¥åå†æ¥å¯ä¸çŸ¥é“æ˜¯å“ªä¸€å¹´ã€‚</p><p>å°±è¿™ä¹ˆåœ¨æ–Œå­çš„â€œæ•¦ä¿ƒâ€ä¸‹ï¼Œå¤§å®¶ä¼™ä¸€å•†é‡ï¼Œå»äº†ï¼Œæ™šä¸Šåœ¨åŒé‡Œåƒäº†ä¸ªâ€œå¤œå¸‚â€å§ï¼Œè¿˜æŒºæœ‰æ„Ÿè§‰ã€‚</p><p>å†åŠ ä¸Šåƒè´§å¥³æœ‹å‹çš„â€œè°ƒæ•™â€ï¼Œæˆ‘å¿ƒé‡Œå°±å¼€å§‹ç¢ç£¨ç€ï¼Œæ—¢ç„¶æƒ³è¦å¤šå‡ºå»è½¬è½¬ï¼Œé‚£ä¸ºå•¥ä¸èƒ½å»ä¸€ä¸ªåœ°æ–¹ï¼Œå°±å…ˆæŠŠé‚£åœ°æ–¹å¥½åƒçš„éƒ½ç»™å°å°å‘¢ã€‚</p><p>åƒè´§çš„ç§å­å°±æ˜¯è¿™ä¹ˆæ ¹æ·±è’‚å›ºçš„ã€‚</p><p>é‚£å¤©æ™šä¸Šçš„æ°›å›´å¾ˆç¾ï¼Œæˆ‘æƒ³æˆ‘åº”è¯¥ä¼šè®°åˆ°è€ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/%E8%A5%BF%E7%93%9C.jpg" alt="è¥¿ç“œ"></p><p>åæ¥å¥³æœ‹å‹è€ƒåˆ°æ–°ä¹¡ï¼Œå…ˆæ˜¯å·å·æ‘¸æ‘¸çš„æŸ¥äº†æŸ¥ï¼Œå‘ç°ä¹Ÿæ²¡ä»€ä¹ˆç‰¹åˆ«å¥½åƒçš„ï¼Œä¹Ÿå°±æ²¡æ€ä¹ˆæ³¨æ„ã€‚</p><p>å»ä¸‡ä»™å±±çˆ¬å±±æ—¶å•¥ä¹Ÿæ²¡åƒåˆ°ï¼Œå€’æ˜¯åœ¨å¥¹ä»¬å­¦æ ¡é—¨å£åƒäº†ä¸å°‘å¥½åƒçš„ï¼Œé—æ†¾çš„æ˜¯éƒ½æ˜¯å¤–æ¥çš„ï¼Œæ²¡æœ‰æ–°ä¹¡ç‰¹è‰²ã€‚</p><p>æ¸…æ˜èŠ‚è®¡åˆ’ç€å»æ­¦æ±‰ï¼Œæå‰æŸ¥äº†æŸ¥éƒ½æœ‰ä»€ä¹ˆå¥½åƒçš„ï¼Œä»¥åŠæœ‰å“ªäº›å‡ºåçš„å°åƒè¡—ï¼Œå› ä¸ºæ—¶é—´å…³ç³»ï¼Œæœ€åå°±å†³å®šå»è¶Ÿæˆ·éƒ¨å··å°±è¡Œäº†ï¼Œæœ‰ä»€ä¹ˆå¥½åƒçš„åº”è¯¥ä¹Ÿèƒ½åƒä¸ªéäº†ã€‚</p><p>æƒ³ä¸åˆ°çš„æ˜¯ï¼Œåˆ°æˆ·éƒ¨å··ä¸€å»å°±æ”¶ä¸ä½äº†ï¼Œä»…ç€æ²¡åƒè¿‡çš„ï¼Œä»æ—©ä¸Š10ç‚¹åƒåˆ°ä¸­åˆæœ‰ä¿©å°æ—¶å§ï¼Œæ™šä¸Šè¦å»é•¿æ±Ÿå¤§æ¡¥çœ‹çœ‹å¤œæ™¯ï¼Œç»“æœåˆ°äº†å‘ç°èµ°é”™äº†ï¼Œçˆ¬åˆ°äº†å¤§æ¡¥ä¸Šï¼Œå»æ±Ÿè¾¹è¦ä»æˆ·éƒ¨å··ç©¿è¿‡å»ï¼Œç„¶åç†æ‰€å½“ç„¶çš„åˆåƒäº†ä¸€æ¬¡ã€‚</p><p>ä¸å¾—ä¸è¯´ï¼Œå¥½åƒçš„å¤ªå¤šäº†ï¼Œè¦ä¸æ˜¯é’±ä¸å¤Ÿï¼Œæˆ‘éå¾—ä¸€æ ·ä¸è½åœ°ä»è¡—å¤´åƒåˆ°è¡—å°¾ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/%E6%8E%92%E9%AA%A8.jpg" alt="æ’éª¨"><br><img src= "/img/loading.gif" data-lazy-src="/images/%E8%BF%98%E6%98%AF%E6%8E%92%E9%AA%A8.jpg" alt="è¿˜æ˜¯æ’éª¨"></p><p>æœ€åä¸€å¤©è¦å›æ¥æ—¶ï¼Œä¹°çš„æ­¦æ˜Œç«™æ™šä¸Šçš„è½¦ç¥¨ï¼Œä¸­åˆè¿‡å»å°±å»è¾›äº¥é©å‘½çºªå¿µé¦†è½¬äº†è½¬ï¼Œä½†æ˜¯ä¸€ä¸ªæ²¡å¿ä½ï¼Œ3åˆ·äº†æˆ·éƒ¨å··ã€‚</p><p>æˆ‘ç°åœ¨æ·±æ·±çš„åæ‚”æ²¡å»æ˜™åæ—å•Šå‰åº†è¡—å•Šä»€ä¹ˆçš„ï¼</p><p>çƒ§å–ï¼Œé‚£å®¶åº—çš„æ‹›ç‰Œä¸Šå†™çš„æ˜¯çƒ§æ¢…ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/%E7%83%A7%E5%8D%96.jpg" alt="çƒ§å–"></p><p>åƒåˆ°ä¸€åŠæ‰æƒ³èµ·æ¥è¦æ‹ç…§çš„çŒªè¹„ï¼Œå¥½åƒæäº†ï¼Œæˆ‘ä»¥åä¼šçˆ±ä¸ŠåƒçŒªè¹„ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/%E7%8C%AA%E8%B9%84.jpg" alt="çŒªè¹„"></p><p>é•¿æ²™çš„è‡­è±†è…ï¼Œæˆ‘ä¹Ÿæä¸æ‡‚ä¸ºå•¥è¿™é‡Œå–çš„ä¹Ÿè¿™ä¹ˆå¤šï¼Œè¿˜æœ‰å¾ˆå¤šç…§ç‰‡ï¼Œå°±ä¸æ”¾äº†ï¼Œä¸€å¼ å¼ çš„çœ‹è¿‡å»å¯¹æˆ‘å¤ªæ®‹å¿â€¦â€¦<br><img src= "/img/loading.gif" data-lazy-src="/images/%E8%87%AD%E8%B1%86%E8%85%90.jpg" alt="è‡­è±†è…"></p><p>æˆ‘ä¹Ÿç®—æ˜¯åœ¨åƒçš„è·¯ä¸Šä¸€å»ä¸è¿”äº†ï¼Œåˆšæ‰è·Ÿå¦ä¸€ä¸ªå¥½åŸºå‹èŠå¤©ï¼Œè¯´ç­‰æˆ‘å»ä¸Šæµ·äº†è¯·æˆ‘åƒæ‹‰é¢ï¼ˆåœ¨å´æ±Ÿæ‰“å·¥çš„æœŸé—´ï¼Œæˆ‘å–œæ¬¢ä¸Šäº†åƒæ‹‰é¢ï¼‰ï¼Œæˆ‘è¯´æˆ‘è¦å…ˆå»é€›åƒé€›åƒé€›åƒï¼ŒåŸºå‹ç»™æˆ‘å‘äº†ä¸‹è¾¹çš„è¡¨æƒ…ï¼Œç™½çœ¼å¯ä¸å¯ä»¥æ”¶èµ·æ¥å˜›â€¦â€¦</p><p>å¹´è½»äººå°±è¯¥å¤šè½¬è½¬ï¼Œå¹´è½»çš„åƒè´§æ›´åº”è¯¥èµ°åˆ°å“ªå„¿åƒåˆ°å“ªå„¿ï¼</p>]]></content>
      
      
      <categories>
          
          <category> é—²è¨€èµ˜è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—²è¨€èµ˜è¯­ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
